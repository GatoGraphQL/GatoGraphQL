{
    "name": "leoloso/pop",
    "extra": {
        "wordpress-install-dir": "vendor/wordpress/wordpress"
    },
    "authors": [
        {
            "name": "Leonardo Losoviz",
            "email": "leo@getpop.org",
            "homepage": "https://getpop.org"
        }
    ],
    "description": "Monorepo for all the PoP packages",
    "homepage": "https://github.com/leoloso/PoP",
    "license": "GPL-2.0-or-later",
    "config": {
        "sort-packages": true
    },
    "repositories": [
        {
            "type": "composer",
            "url": "https://wpackagist.org"
        },
        {
            "type": "vcs",
            "url": "https://github.com/leoloso/monorepo-builder.git"
        }
    ],
    "scripts": {
        "all": [
            "@validate-monorepo",
            "@test",
            "@analyse",
            "@fix-style"
        ],
        "test": "phpunit",
        "check-style": "phpcs -n src $(monorepo-builder source-packages --config=config/monorepo-builder/source-packages.php --psr4-only --subfolder=src --subfolder=tests)",
        "fix-style": "phpcbf -n src $(monorepo-builder source-packages --config=config/monorepo-builder/source-packages.php --psr4-only --subfolder=src --subfolder=tests)",
        "analyse": "phpstan analyse --ansi",
        "preview-src-downgrade": "rector process $(monorepo-builder source-packages --config=config/monorepo-builder/source-packages.php --psr4-only --subfolder=src) --config=config/rector/downgrade/monorepo/rector.php --ansi --dry-run || true",
        "preview-vendor-downgrade": "ci/downgrade/downgrade_code.sh config/rector/downgrade/monorepo/rector.php --dry-run \"\" \"\" \"$(monorepo-builder local-package-owners --config=config/monorepo-builder/local-package-owners.php)\" || true",
        "preview-code-downgrade": [
            "@preview-src-downgrade",
            "@preview-vendor-downgrade"
        ],
        "preview-graphql-api-downgrade": "bash -x ci/downgrade/downgrade_code.sh config/rector/downgrade/graphql-api/rector.php --dry-run layers/GraphQLAPIForWP/plugins/graphql-api-for-wp \"\" \"$(monorepo-builder local-package-owners --config=config/monorepo-builder/local-package-owners.php)\"",
        "ssh-server": "composer ssh-server -d webservers/graphql-api-for-wp",
        "build-server": "composer build-server -d webservers/graphql-api-for-wp",
        "init-server": "composer init-server -d webservers/graphql-api-for-wp",
        "start-server": "composer start-server -d webservers/graphql-api-for-wp",
        "update-deps": "composer update-deps -d webservers/graphql-api-for-wp",
        "log-server-errors": "composer log-server-errors -d webservers/graphql-api-for-wp",
        "log-server-warnings": "composer log-server-warnings -d webservers/graphql-api-for-wp",
        "rebuild-server": "composer rebuild-server -d webservers/graphql-api-for-wp",
        "enable-caching": "composer enable-caching -d webservers/graphql-api-for-wp",
        "disable-caching": "composer disable-caching -d webservers/graphql-api-for-wp",
        "enable-unsafe-defaults": "composer enable-unsafe-defaults -d webservers/graphql-api-for-wp",
        "disable-unsafe-defaults": "composer disable-unsafe-defaults -d webservers/graphql-api-for-wp",
        "delete-settings": "composer delete-settings -d webservers/graphql-api-for-wp",
        "purge-cache": "composer purge-cache -d webservers/graphql-api-for-wp",
        "server-info": "composer server-info -d webservers/graphql-api-for-wp",
        "merge-monorepo": "monorepo-builder merge --config=config/monorepo-builder/merge.php --ansi",
        "propagate-monorepo": "monorepo-builder propagate --config=config/monorepo-builder/propagate.php --ansi",
        "validate-monorepo": "monorepo-builder validate --config=config/monorepo-builder/validate.php --ansi",
        "release-patch": "monorepo-builder release patch --config=config/monorepo-builder/release.php --ansi",
        "release-minor": "monorepo-builder release minor --config=config/monorepo-builder/release.php --ansi",
        "release-major": "monorepo-builder release major --config=config/monorepo-builder/release.php --ansi",
        "merge-phpstan": "monorepo-builder merge-phpstan --config=config/monorepo-builder/merge-phpstan.php --skip-unmigrated --ansi",
        "improve-code-quality": "rector process --config=config/rector/code-quality/rector.php --ansi",
        "remove-unused-imports": "php-cs-fixer fix --config=.php-cs-fixer.dist.php",
        "build-js": "bash -x dev-helpers/scripts/build-js.sh layers/GraphQLAPIForWP/plugins/graphql-api-for-wp",
        "install-deps-build-js": "bash -x dev-helpers/scripts/build-js.sh layers/GraphQLAPIForWP/plugins/graphql-api-for-wp true"
    },
    "scripts-descriptions": {
        "all": "Execute all required tests (except downgrade)",
        "test": "Execute PHPUnit tests",
        "check-style": "Validate PSR-12 coding standards (via phpcs)",
        "fix-style": "Fix PSR-12 coding standards (via phpcbf)",
        "analyse": "Run PHPStan static analysis of the code",
        "preview-src-downgrade": "Run Rector in 'dry-run' mode to preview how the src/ folder will be downgraded to PHP 7.1",
        "preview-vendor-downgrade": "Run Rector in 'dry-run' mode to preview how the vendor/ folder will be downgraded to PHP 7.1",
        "preview-code-downgrade": "Run Rector in 'dry-run' mode to preview how the all code (i.e. src/ + vendor/ folders) will be downgraded to PHP 7.1",
        "ssh-server": "SSH into the Lando webserver with the 'GraphQL API for WordPress' demo site",
        "build-server": "Initialize the Lando webserver with the 'GraphQL API for WordPress' demo site, for development. To be executed only the first time",
        "init-server": "Alias of 'start-server",
        "start-server": "Start the Lando webserver with the 'GraphQL API for WordPress' demo site, for development",
        "update-deps": "Update the Composer dependencies for the 'GraphQL API for WordPress' demo site",
        "log-server-errors": "Show (on real time) the errors from the Lando webserver",
        "log-server-warnings": "Show (on real time) the warnings from the Lando webserver",
        "rebuild-server": "Rebuild the Lando webserver",
        "enable-caching": "Enable caching for the 'GraphQL API for WordPress' in DEV",
        "disable-caching": "Disable caching for the 'GraphQL API for WordPress' in DEV",
        "enable-unsafe-defaults": "Set the application nature as 'static'",
        "disable-unsafe-defaults": "Set the application nature as 'live'",
        "delete-settings": "Delete the plugin settings from the DB",
        "purge-cache": "Purge the cache for the 'GraphQL API for WordPress' in DEV",
        "server-info": "Retrieve information from the Lando webserver",
        "validate-monorepo": "Validate that version constraints for dependencies are the same for all packages",
        "merge-monorepo": "Create the monorepo's composer.json file, containing all dependencies from all packages",
        "propagate-monorepo": "Propagate versions from the monorepo's composer.json file to all packages",
        "release-patch": "Release a new 'patch' version (xx.xx.PATCH) (bump version, commit, push, tag, revert to 'dev-master', commit, push)",
        "release-minor": "Release a new 'minor' version (xx.MINOR.xx) (bump version, commit, push, tag, revert to 'dev-master', commit, push)",
        "release-major": "Release a new 'major' version (MAJOR.xx.xx) (bump version, commit, push, tag, revert to 'dev-master', commit, push)",
        "merge-phpstan": "Generate a single PHPStan config for the monorepo, invoking the config for the PHPStan config for all packages",
        "improve-code-quality": "Improve code quality (via Rector)",
        "remove-unused-imports": "Remove unused `use` imports",
        "build-js": "Build all JS packages, blocks and editor scripts from the GraphQL API plugin",
        "install-deps-build-js": "Build all JS packages, blocks and editor scripts from the GraphQL API plugin, installing all dependencies from npm"
    },
    "minimum-stability": "dev",
    "prefer-stable": true
}
