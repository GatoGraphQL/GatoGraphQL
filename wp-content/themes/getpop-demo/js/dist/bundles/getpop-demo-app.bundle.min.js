/* Minify: at least one missing file. See http://code.google.com/p/minify/wiki/Debugging */

;"use strict";function getMultiLayoutKey(e,t){var r=M.MULTILAYOUT_KEYFIELDS[e]||[];if(!r.length)return"default";var n=[];return jQuery.each(r,function(e,r){n.push(t[r])}),n.join("-")}Handlebars.registerHelper("showmore",function(e,t){var r=t.hash.len||0;if(r>0&&e.length>r+100){var n=r,a='<a href="#" class="pop-showmore-more">'+M.STRING_MORE+"</a>",s='<a href="#" class="pop-showmore-less hidden">'+M.STRING_LESS+"</a>",i=!1,o=!0;if(e.length>n&&e.substr(r).indexOf("</p>")>-1&&(i=!0,o=!1,n=r+(e=e.substr(0,r)+'<span class="pop-showmore-more-full hidden">'+e.substr(r,e.substr(r).indexOf("</p>"))+"</span> "+a+e.substr(r+e.substr(r).indexOf("</p>"))).substr(r).indexOf("</p>")+"</p>".length),i||e.length>n){var h=e.substr(n),p=h.trim().length;if(i||p){var u='<span class="pop-showmore-more-teaser">'+e.substr(0,n)+"</span>"+(p?'<span class="pop-showmore-more-full hidden">'+h+"</span> ":" ")+(o?a:"")+s;return new Handlebars.SafeString(u)}}}return e}),Handlebars.registerHelper("ondate",function(e,t){return new Handlebars.SafeString(M.ONDATE.format(e))}),Handlebars.registerHelper("addParam",function(e,t,r,n){return jQuery.isArray(r)||(r=[r]),jQuery.each(r,function(r,n){e=add_query_arg(t,n,e)}),e}),Handlebars.registerHelper("destroyUrl",function(e,t){return new Handlebars.SafeString(popManager.getDestroyUrl(e))}),Handlebars.registerHelper("statusLabel",function(e,t){var r='<span class="label '+M.STATUS.class[e]+" label-"+e+'">'+M.STATUS.text[e]+"</span>";return new Handlebars.SafeString(r)}),Handlebars.registerHelper("labelize",function(e,t,r){var n="";if(e)for(var a=0;a<e.length;a++)n+='<span class="label '+t+" "+(M.LABELIZE_CLASSES[e[a]]?M.LABELIZE_CLASSES[e[a]]:"")+'">'+e[a]+"</span> ";return new Handlebars.SafeString(n)}),Handlebars.registerHelper("mod",function(e,t,r){if(arguments.length<3)throw new Error("Handlebars Helper equal needs 2 parameters");return(e+(r.hash.offset||0))%t==0?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("compare",function(e,t,r){if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var n=r.hash.operator||"==",a={eq:function(e,t){return e==t||e.toString()==t.toString()},"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},typeof:function(e,t){return typeof e==t},in:function(e,t){return t.indexOf(e)>=0},notin:function(e,t){return-1==t.indexOf(e)}};if(!a[n])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+n);return a[n](e,t)?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("get",function(e,t,r){return void 0===e||void 0===e[t]?"":e[t]}),Handlebars.registerHelper("ifget",function(e,t,r){if(void 0===e)return"";var n=r.hash.context||this,a=!1;if(r.hash.method){var s=popJSLibraryManager.execute(r.hash.method,{domain:n.tls.domain,input:e[t]});jQuery.each(s,function(e,t){if(t)return a=!0,-1})}else a=e[t];return a?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("withget",function(e,t,r){if(void 0===e||void 0===e[t])return"";var n=e[t];return"object"===jQuery.type(n)&&popManager.expandJSKeys(n),r.fn(n)}),Handlebars.registerHelper("iffirstload",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId;return popManager.isFirstLoad(r)?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("interceptAttr",function(e){var t=(e.hash.context||this)[M.JS_INTERCEPT]||{};return new Handlebars.SafeString((t[M.JS_TYPE]?' data-intercept="'+t[M.JS_TYPE]+'"':"")+(t.settings?' data-intercept-settings="'+t[M.JS_SETTINGS]+'"':"")+(t[M.JS_TARGET]?' target="'+t[M.JS_TARGET]+'"':"")+(t[M.JS_SKIPSTATEUPDATE]?' data-intercept-skipstateupdate="true"':"")+' style="display: none;"')}),Handlebars.registerHelper("generateId",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId,n=e.hash.targetId||t.bs.bsId,a=e.hash.template||t[M.JS_TEMPLATE],s=e.hash.fixed||t[M.JS_FIXEDID],i=e.hash.idUnique||t[M.JS_ISIDUNIQUE],o=e.hash.group,h=e.fn(this),p=t.ignorePSRuntimeId,u=t.tls.domain,d=e.hash.addURL?t.tls.feedback[M.URLPARAM_URL]:"";d&&popJSRuntimeManager.setBlockURL(d);var l=popJSRuntimeManager.addTemplateId(u,r,n,a,h,o,s,i,p),S=[];return S.push('id="'+l+'"'),S.push('data-templateid="'+a+'"'),d&&(S.push("data-"+M.PARAMS_TOPLEVEL_URL+'="'+d+'"'),S.push("data-"+M.PARAMS_TOPLEVEL_DOMAIN+'="'+getDomain(d)+'"')),new Handlebars.SafeString(S.join(" "))}),Handlebars.registerHelper("lastGeneratedId",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId,n=e.hash.targetId||t.bs.bsId,a=e.hash.template||t[M.JS_TEMPLATE],s=e.hash.domain||t.tls.domain,i=e.hash.group;return popJSRuntimeManager.getLastGeneratedId(s,r,n,a,i)}),Handlebars.registerHelper("applyLightTemplate",function(e,t){var r=t.hash.context||this,n=popManager.getHtml(e,r);return new Handlebars.SafeString(n)}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),Handlebars.registerHelper("enterModule",function(e,t){var r=t.hash.context||this,n=t.hash.template||r[M.JS_TEMPLATE],a=e.tls,s=e.pss,i=e.bs,o=e.itemObject,h=e.itemObjectDBKey,p=e.ignorePSRuntimeId,u=void 0!==t.hash.itemDBKey?t.hash.itemDBKey:e.itemDBKey,d={itemObject:o,itemObjectDBKey:h,itemDBKey:u,items:void 0!==t.hash.items?t.hash.items:e.items,tls:a,pss:s,bs:i,ignorePSRuntimeId:p},l=a.domain,S=s.pssId,c=(s.psId,i.bsId),f=i.bId;jQuery.extend(r,popManager.getRuntimeConfiguration(l,S,c,n)),popManager.expandJSKeys(r);var m=t.hash.itemObjectId;"array"===jQuery.type(m)&&(m.length?m=m[0]:(m=null,o=null,d.itemObject=o)),t.hash.itemDBKey&&m?(u=t.hash.itemDBKey,o=popManager.getItemObject(l,u,m),d.itemObject=o,d.itemObjectDBKey=u,d.itemDBKey=u,d.items=[m]):t.hash.itemDBKey&&t.hash.items?(d.itemDBKey=t.hash.itemDBKey,d.items=t.hash.items):t.hash.subcomponent&&m?(u=i["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],o=popManager.getItemObject(l,u,m),d.itemObject=o,d.itemObjectDBKey=u,d.itemDBKey=u,d.items=[m]):t.hash.subcomponent&&t.hash.items?(u=i["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],d.itemDBKey=u,d.items=t.hash.items):t.hash.items?d.items=t.hash.items:t.hash.itemDBKey&&(d.itemDBKey=t.hash.itemDBKey,d.itemObject=null,d.itemObjectDBKey=null,d.items=null),d.items&&"array"!==jQuery.type(d.items)&&(d.items=[d.items]),t.hash["feedback-msg"]&&(d["feedback-msg"]=t.hash["feedback-msg"]);var g=[],b=[],y=[];r[M.JS_MODULEOPTIONS]&&(g=r[M.JS_MODULEOPTIONS][M.JS_OVERRIDEFROMITEMOBJECT]||[],b=r[M.JS_MODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),r[M.JS_RUNTIMEMODULEOPTIONS]&&(y=r[M.JS_RUNTIMEMODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),g.length&&popManager.overrideFromItemObject(o,d,g);var E=b.concat(y);E.length&&popManager.replaceFromItemObject(l,S,c,n,o,d,E);var O=t.hash.parentContext||{};if(O){d["parent-context"]=O;for(var H=O;H["parent-context"];)H=H["parent-context"];d["root-context"]=H}jQuery.extend(r,d);var I=popManager.getHtml(n,r);if(M.PRINTTAGSINBODY){var T=r[M.JS_RESOURCES];T&&(I=popResourceLoader.includeResources(l,f,T,!0)+I)}return t.hash.unsafe?I:new Handlebars.SafeString(I)}),Handlebars.registerHelper("withLayout",function(e,t,r,n,a){var s=n.tls.domain,i=r[getMultiLayoutKey(e,popManager.getItemObject(s,e,t))];if(i||(i=r.default),!i)return"";var o=n[M.JS_MODULES][i];return jQuery.extend(o,{itemDBKey:e,itemObjectId:t}),popManager.expandJSKeys(o),a.fn(o)}),Handlebars.registerHelper("layoutLabel",function(e,t,r){var n=getMultiLayoutKey(e,t);return M.MULTILAYOUT_LABELS[n]||""}),Handlebars.registerHelper("withBlock",function(e,t,r){if(void 0!==e&&void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][t])return e=e[M.JS_MODULES][t],popManager.expandJSKeys(e),r.fn(e)}),Handlebars.registerHelper("withModule",function(e,t,r){if(void 0!==e&&void 0!==e[M.JS_SETTINGSIDS]&&void 0!==e[M.JS_SETTINGSIDS][t]){var n=e[M.JS_SETTINGSIDS][t];if(void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][n])return e=e[M.JS_MODULES][n],popManager.expandJSKeys(e),jQuery.extend(e,r.hash),r.fn(e)}}),Handlebars.registerHelper("withSublevel",function(e,t){var r=t.hash.context||this;return"object"===jQuery.type(r)&&popManager.expandJSKeys(r),t.fn(r[e])}),Handlebars.registerHelper("withItemObject",function(e,t,r){var n=(a=r.hash.context||this).tls.domain,a=popManager.getItemObject(n,e,t);return r.fn(a)}),Handlebars.registerHelper("join",function(e,t){var r=t.hash.delimiter||",",n=n=t.hash.start||0,a=e?e.length:0,s=t.hash.end||a,o="";if(s>a&&(s=a),"function"==typeof t){for(i=n;i<s;i++)i>n&&(o+=r),"string"==typeof e[i]?o+=e[i]:o+=t(e[i]);return o}return[].concat(e).slice(n,s).join(r)});
;"use strict";function getDomain(A){var u=A.split("/");return u[0]+"//"+u[2]}function removeScheme(A){var u=A.split("//");return 1==u.length?u[0]:u[1]}function getDomainId(A){return removeScheme(A).replace(/\./g,"-")}function unescapeHtml(A){var u=document.createElement("div");return u.innerHTML=A,u.innerText||u.text||u.textContent}function add_query_arg(A,u,e){return e+=(e.split("?")[1]?"&":"?")+A+"="+u}function removeQueryFields(A,u){if(!u||!u.length)return A;var e=document.createElement("a");e.href=A;var r=e.search.slice(1).split("&").map(function(A){return A.split("=")}).filter(function(A){return u.every(function(u){return u!=A[0]})}).map(function(A){return A.join("=")}).join("&");return e.protocol+"//"+e.host+e.pathname+(r?"?"+r:"")+e.hash}function removeParams(A){return A.indexOf("?")>-1?A.substr(0,A.indexOf("?")):A}function getParams(A){if(A.indexOf("?")>-1){var u=A.substr(A.indexOf("?")+1);return u.indexOf("#")>-1&&(u=u.substr(0,u.indexOf("#"))),u}return""}function getParam(A,u){return splitUrlParams(u?getParams(u):window.location.search.substring(1))[A]}function splitUrlParams(A){return void 0!==urlParams[A]?urlParams[A]:(urlParams[A]=jQuery.extend({},splitParams(A)),urlParams[A])}function splitParams(A){for(var u,e={},r=function(A){return decodeURIComponent(A).replace(/\+/g," ")},n=decodeURI(A),t=/([^&=]+)=?([^&]*)/g;u=t.exec(n);)if("-1"==u[1].indexOf("["))e[r(u[1])]=r(u[2]);else{var F=u[1].indexOf("["),o=u[1].slice(F+1,u[1].indexOf("]",F)),a=r(u[1].slice(0,F));"object"!=typeof e[a]&&(e[r(a)]={}),o?e[r(a)][r(o)]=r(u[2]):Array.prototype.push.call(e[r(a)],r(u[2]))}return e}function searchInObject(A,u){for(var e in A)if(Object.prototype.hasOwnProperty.call(A,e)&&A[e]==u)return!0;return!1}function getRandomInt(A,u){return Math.floor(Math.random()*(u-A+1)+A)}function doScroll(A,u){u=u||!1;var e=A.offset().top-20;u?jQuery("html, body").animate({scrollTop:e}):window.scrollTo(0,e)}function removeMarker(A){return A.indexOf("#")>-1?A.substr(0,A.indexOf("#")):A}function counterNext(){return++counter}function windowResize(){var A=document.createEvent("UIEvents");A.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(A)}function isUrlValid(A){return/^(https?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(A)}function beep(){new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=").play()}function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(A){return!1}}function load_style(A,u){var e=document.getElementsByTagName("head")[0],r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=A,r.media="all",e.appendChild(r),u&&u(A,"ok")}function load_script(A,u,e){function r(){n||(n=!0,u&&u(A,"ok"))}var n=!1,t=document.getElementsByTagName("head")[0],F=document.createElement("script");e&&(F.async=!1),F.onload=r,F.onreadystatechange=function(){n||"complete"===F.readyState&&r()},F.onerror=function(){n||(n=!0,u&&u(A,"error"))},F.src=A,t.appendChild(F)}var urlParams={},counter=0;
;"use strict";jQuery,window.popUtils={getPath:function(t){var e=document.createElement("a");return e.href=t,e.pathname.substr(M.PATHSTARTPOS)}};
;"use strict";String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(r,o){return void 0!==t[o]?t[o]:r})}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return 0==this.indexOf(t)}),Array.prototype.some||(Array.prototype.some=function(t){var r=this.length;if("function"!=typeof t)throw new TypeError;for(var o=arguments[1],n=0;n<r;n++)if(n in this&&t.call(o,this[n],n,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t){var r=this.length;if("function"!=typeof t)throw new TypeError;for(var o=new Array,n=arguments[1],e=0;e<r;e++)if(e in this){var i=this[e];t.call(n,i,e,this)&&o.push(i)}return o}),Date.now||(Date.now=function(){return(new Date).getTime()});
;"use strict";!function(e){window.popJSLibraryManager={libraries:[],methods:{},register:function(r,i,t,s){var a=this;M.USECODESPLITTING&&popCodeSplitJSLibraryManager.register(r,i,t,s),a.libraries.push(r),e.each(i,function(e,i){a.methods[i]&&!s||(a.methods[i]=[]),t?a.methods[i].unshift(r):a.methods[i].push(r)})},getLibraries:function(e){return this.methods[e]||[]},execute:function(r,i){var t={},s=this.methods[r];if(s){if(M.USECODESPLITTING){var a={libraries:s};e.extend(a,i),popCodeSplitJSLibraryManager.maybeFilterLibraries(r,a),s=a.libraries}e.each(s,function(e,s){t["l"+e]=s[r](i)})}return t}}}(jQuery);
;"use strict";jQuery,window.popCodeSplitJSLibraryManager={add:!1,heap:[],libraries:{},documentLoaded:function(){this.add=!0},assignLibrariesToResource:function(i){var r=this;r.libraries[i]=r.heap,r.heap=[]},getLibraries:function(i){return this.libraries[i]||[]},register:function(i,r,e,a){var t=this;t.add&&-1==t.heap.indexOf(i)&&t.heap.push(i)},maybeFilterLibraries:function(i,r){r.codeSplitLibraries&&(r.libraries=r.libraries.filter(function(i){return r.codeSplitLibraries.indexOf(i)>-1}))}},popJSLibraryManager.register(popCodeSplitJSLibraryManager,["documentLoaded"],!0);
;"use strict";!function(s){window.popJSRuntimeManager={"full-session-ids":{},"last-session-ids":{},blockURL:null,pageSectionURL:null,setPageSectionURL:function(s){this.pageSectionURL=s},setBlockURL:function(e){var t=this,i="";if("object"==s.type(e)){var n=e;i=popManager.getBlockTopLevelURL(n)}else i=e;t.blockURL=i,t.setPageSectionURL(i)},initBlockVarPaths:function(s,e,t,i,n,a,o){o=o||M.JSMETHOD_GROUP_MAIN,s[e]||(s[e]={}),s[e][t]||(s[e][t]={}),s[e][t][i]||(s[e][t][i]={}),s[e][t][i][n]||(s[e][t][i][n]={}),s[e][t][i][n][a]||(s[e][t][i][n][a]={}),s[e][t][i][n][a][o]||(s[e][t][i][n][a][o]=[])},initVars:function(s,e,t,i,n,a){var o=this;o.initBlockVarPaths(o["full-session-ids"],s,e,t,i,n,a),o.initBlockVarPaths(o["last-session-ids"],s,e,t,i,n,a)},addGroup:function(s,e){return e&&(s+=M.ID_SEPARATOR+e),s},addPageSectionId:function(s,e,t,i,n){return this.addTemplateId(s,e,e,t,i,n,!0,!0)},addTemplateId:function(s,e,t,i,n,a,o,d,l){var r=this;return d||(n+=popManager.getUniqueId(s)),o||(n+=M.ID_SEPARATOR+counterNext()),n=r.addGroup(n,a),l||r.addTargetId(r.pageSectionURL,s,e,e,i,a,n),e!=t&&r.addTargetId(r.blockURL,s,e,t,i,a,n),n},addTargetId:function(s,e,t,i,n,a,o){var d=this;return a=a||M.JSMETHOD_GROUP_MAIN,d.initVars(s,e,t,i,n,a),d["full-session-ids"][s][e][t][i][n][a].push(o),d["last-session-ids"][s][e][t][i][n][a].push(o),o},getLastGeneratedId:function(s,e,t,i,n){var a=this;n=n||M.JSMETHOD_GROUP_MAIN;var o=e==t?a.pageSectionURL:a.blockURL,d=a["full-session-ids"][o][s][e][t][i][n];return d[d.length-1]},getPageSectionSessionIds:function(s,e,t){var i=this,n=i.pageSectionURL;return i.getTargetSessionIds(n,s,e,e,t)},getBlockSessionIds:function(s,e,t,i){var n=this,a=popManager.getBlockTopLevelURL(t);return n.getTargetSessionIds(a,s,e,t,i)},getTargetSessionIds:function(s,e,t,i,n){var a=this,o=popManager.getSettingsId(t),d=popManager.getSettingsId(i);return n=n||"last",a[n+"-session-ids"][s]&&a[n+"-session-ids"][s][e]&&a[n+"-session-ids"][s][e][o]?a[n+"-session-ids"][s][e][o][d]:null},deletePageSectionLastSessionIds:function(e,t){var i=this,n=popManager.getSettingsId(t),a=i.pageSectionURL;delete i["last-session-ids"][a][e][n][n],s.isEmptyObject(i["last-session-ids"][a][e][n])&&(delete i["last-session-ids"][a][e][n],s.isEmptyObject(i["last-session-ids"][a][e])&&(delete i["last-session-ids"][a][e],s.isEmptyObject(i["last-session-ids"][a])&&delete i["last-session-ids"][a]))},deleteBlockLastSessionIds:function(e,t,i){var n=this,a=popManager.getSettingsId(t),o=popManager.getSettingsId(i),d=popManager.getBlockTopLevelURL(i);n["last-session-ids"][d]&&n["last-session-ids"][d][e]&&n["last-session-ids"][d][e][a]&&n["last-session-ids"][d][e][a][o]&&(delete n["last-session-ids"][d][e][a][o],s.isEmptyObject(n["last-session-ids"][d][e][a])&&(delete n["last-session-ids"][d][e][a],s.isEmptyObject(n["last-session-ids"][d][e])&&(delete n["last-session-ids"][d][e],s.isEmptyObject(n["last-session-ids"][d])&&delete n["last-session-ids"][d])))}}}(jQuery);
;"use strict";!function(t){window.popPageSectionManager={offcanvasToggle:function(e){var n=this;e.pageSection;e.targets.click(function(e){e.preventDefault();var a=t(this),s=a.data("mode"),o=t(a.data("target")),i=a.data("toggle");"offcanvas-open"==i?n.open(o,s):"offcanvas-close"==i?n.close(o,s):"offcanvas-toggle"==i&&n.toggle(o,s)})},isHidden:function(t){var e=this,n=t.targets.closest(".offcanvas");return e.execIsHidden(n)},execIsHidden:function(t){var e=this;if(t.length){var n=e.getOffcanvasActiveClass(t);return!e.getGroup(t).hasClass(n)}return!1},getOffcanvasActiveClass:function(t,e){var n="active-"+t.data("offcanvas");return"xs"==e&&(n+="-xs"),n},open:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.addClass(s),n.triggerStatus(t,e,"opened")},close:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.removeClass(s),n.triggerStatus(t,e,"closed")},toggle:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.hasClass(s)?n.close(t,e):n.open(t,e)},triggerStatus:function(t,e,n){this.getGroup(t).triggerHandler("on.bs.pagesection-group:pagesection-"+t.attr("id")+":"+n,[t,e])},getTopLevelSettingsId:function(){return M.TEMPLATE_TOPLEVEL_SETTINGS_ID},getPageSectionStatus:function(e){return t("#"+e.attr("id")+"-status")},getGroup:function(e){return e?e.closest(".pop-pagesection-group"):t("#"+M.TEMPLATE_PAGESECTIONGROUP_ID)},theater:function(t){var e=this,n=e.getGroup();e.transitionEndResize(),t?(n.addClass("theater"),n.triggerHandler("on.bs.pagesection:theater")):(n.removeClass("theater"),n.triggerHandler("off.bs.pagesection:theater"))},isTheater:function(){return this.getGroup().hasClass("theater")},transitionEndResize:function(){this.getGroup().one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){windowResize()})},getOpenMode:function(t){return t.data("pagesection-openmode")||"automatic"}}}(jQuery),popJSLibraryManager.register(popPageSectionManager,["isHidden","offcanvasToggle"],!0);
;"use strict";!function(e){window.popBrowserHistory={loaded:!1,documentInitialized:function(){var t=this;e(window).on("popstate",function(e){if(t.loaded){var r=t.removePushURLAtts(window.location.href);r=t.getApplicationURL(r);var o={skipPushState:!0};popURLInterceptors.getInterceptors(r).length?popURLInterceptors.intercept(r,o):popManager.fetch(r,o)}else t.loaded=!0})},getApplicationURL:function(e){var t={url:e};return popJSLibraryManager.execute("modifyApplicationURL",t),e=t.url},addPushURLAtts:function(t){var r=popManager.getTopLevelFeedback(getDomain(t));return e.each(r[M.DATALOAD_PUSHURLATTS],function(e,r){t=add_query_arg(e,r,t)}),t},removePushURLAtts:function(t){var r=popManager.getTopLevelFeedback(getDomain(t)),o=[];return e.each(r[M.DATALOAD_PUSHURLATTS],function(e,t){o.push(e)}),removeQueryFields(t,o)},pushState:function(e){var t=this,r={url:e=t.addPushURLAtts(e)};popJSLibraryManager.execute("modifyPushStateURL",r),e=r.url,history.pushState({url:e},"",e),t.loaded=!0},replaceState:function(e){var t=this;window.location.url!=e&&(e=t.addPushURLAtts(e),history.replaceState({url:e},"",e),t.loaded=!0)}}}(jQuery),popJSLibraryManager.register(popBrowserHistory,["documentInitialized"],!0);
;"use strict";!function(t){window.popURLInterceptors={fullurl:{},partialurl:{},pageSectionNewDOMsInitialized:function(e){var r=this,a=e.pageSection,n=e.newDOMs;n.find('[data-intercept="fullurl"]').addBack('[data-intercept="fullurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e));r.fullurl[l]||(r.fullurl[l]={}),r.fullurl[l][i]||(r.fullurl[l][i]=[]),r.fullurl[l][i].push(n)}),n.find('[data-intercept="partialurl"]').addBack('[data-intercept="partialurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e));r.partialurl[l]||(r.partialurl[l]={}),r.partialurl[l][n]=i})},destroyTarget:function(e){var r=this,a=e.pageSection,n=e.destroyTarget;n.find('[data-intercept="fullurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e)),u=r.fullurl[l][i];u&&((u=u.filter(function(t,e){return n!=t})).length?r.fullurl[l][i]=u:delete r.fullurl[l][i])}),n.find('[data-intercept="partialurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getTarget(a,e);delete r.partialurl[i][n]})},getSettings:function(t){var e=t.data("intercept-settings")||"";return e=e.split(M.SEPARATOR)},getTarget:function(t,e){return e.attr("target")||popManager.getFrameTarget(t)},getUrl:function(t){return t.data("intercept-url")},getFullUrlInterceptors:function(e,r){var a=this,n=[],i=(r=r||{}).target||M.URLPARAM_TARGET_MAIN,l=a.fullurl;if(l[i])if(l[i][e])n.push(t("#"+l[i][e].join(", #")));else{var u=removeParams(e);if(e!=u&&l[i][u]){var p=t("#"+l[i][u].join(", #")).filter(".pop-interceptor");p.length&&n.push(p)}}return n},getPartialUrlInterceptor:function(e,r){var a=this,n=null,i=(r=r||{}).target||M.URLPARAM_TARGET_MAIN,l=a.partialurl;if(i){var u=l[i];u&&t.each(u,function(r,a){if(e.startsWith(a))return n=t("#"+r),!1})}return n},getURLInterceptors:function(t,e){var r=this,a=r.getFullUrlInterceptors(t,e),n=r.getPartialUrlInterceptor(t,e);return n&&a.push(n),a},getInterceptors:function(t,e){var r=this,a=r.getURLInterceptors(t,e);if(a.length)return a;var n=removeMarker(t);return n!=t&&(a=r.getURLInterceptors(n,e)),a},intercept:function(e,r){var a=this;r=r||{};var n=a.getInterceptors(e,r);if(n.length){r.event&&r.event.stopImmediatePropagation(),t.each(n,function(t,a){if(!(a.data("intercept-skipstateupdate")||r.skipstateupdate))return r.skipPushState||popBrowserHistory.pushState(e),popManager.updateTitle(a.data("title")),-1});var i=r["interceptor-atts"]||{};return t.each(n,function(n,l){t.each(i,function(t,e){l.data(t,e)});var u=r.relatedTarget;l.data("interceptedTarget",u);a.getSettings(l.parent());l.data("original-url",e),l.data("post-data",getParams(e)),l.trigger("click")}),!0}return!1}}}(jQuery),popJSLibraryManager.register(popURLInterceptors,["destroyTarget","pageSectionNewDOMsInitialized"],!0);
;"use strict";function markJSResourceAsLoaded(e,o){popResourceLoader.markJSResourceAsLoaded(e,o)}function markResourceAsLoaded(e,o){popResourceLoader.markResourceAsLoaded(e,o)}!function(e){window.popResourceLoader={config:{},loading:[],"error-loading":[],"error-loading-times":{},"loading-urls":{},"loading-resources":{},loaded:[],"loaded-in-body":[],"loaded-by-domain":{},preFetchPageSection:function(o){var r=this,a=o.url,n=o.options;if(M.USECODESPLITTING)if(r.configFilesLoaded(a,n))r.loadResourcesForURL(a);else{var i=r.loadURLConfigFile(a);e(document).one("loaded-url:"+escape(i),function(e){r.loadResourcesForURL(a)})}},areResourcesLoaded:function(e){var o=this;M.USECODESPLITTING&&(e.loaded=o.areResourcesLoadedForURL(e.fetchUrl))},loadScriptOrStyle:function(e,o){e==M.RESOURCELOADER.TYPES.CSS?load_style(o):e==M.RESOURCELOADER.TYPES.JS&&load_script(o)},onRemoveLoadResource:function(o,r,a){var n=this,i=e("#"+o);popManager.getPageSectionPage(i).one("destroy",function(){n.loadScriptOrStyle(r,a)}),i.one("replace",function(){n.loadScriptOrStyle(r,a)})},includeResources:function(o,r,a,n){var i=this;if(!a)return"";var t=i.getConfigByDomain(o),d=[];return n&&(d=e(a).not(i["loaded-in-body"]).get(),a=e(a).not(i.loaded).get()),i.loaded=i.loaded.concat(a),i["loaded-in-body"]=i["loaded-in-body"].concat(d),(a=d).map(function(e){var o=t.sources[e],a='<script type="text/javascript">jQuery(document).ready( function($) { popResourceLoader.onRemoveLoadResource("{0}", "{1}", "{2}"); });<\/script>';if(t.types[M.RESOURCELOADER.TYPES.CSS].indexOf(e)>=0)return(n=a.format(r,M.RESOURCELOADER.TYPES.CSS,o))+(i='<link rel="stylesheet" href="{0}">'.format(o));if(t.types[M.RESOURCELOADER.TYPES.JS].indexOf(e)>=0){var n=a.format(r,M.RESOURCELOADER.TYPES.JS,o),i='<script type="text/javascript" src="{0}"><\/script>'.format(o);return n+i}return""}).join("")},markJSResourceAsLoaded:function(e,o){var r=this;if("ok"==o){var a=r["loading-urls"][e];popCodeSplitJSLibraryManager.assignLibrariesToResource(a)}r.markResourceAsLoaded(e,o)},markResourceAsLoaded:function(e,o){var r=this,a=r["loading-urls"][e];if("ok"==o)r.loaded.push(a),r["loaded-in-body"].push(a);else if("error"==o){r["error-loading"].push(a);var n=r["error-loading-times"][a]||0;r["error-loading-times"][a]=n+1}r.loading.splice(r.loading.indexOf(a),1),delete r["loading-urls"][e]},loadURLConfigFile:function(e){var o=this.getConfigFile(e);return load_script(o),o},configFilesLoaded:function(e,o){var r=this,a=r.getConfig(e);if(a.loaded)return!0;var n=r.getPropertiesForURL(e),i=n.hierarchy,t=n.path;if(["page","single"].indexOf(i)>=0&&a["loaded-paths"][i]&&a["loaded-paths"][i].indexOf(t)>=0)return!0;var d=r.getConfigFile(e);return a["loaded-files"].indexOf(d)>=0},getConfigFile:function(e){var o=this,r=o.getConfig(e),a=o.getPropertiesForURL(e),n=a.hierarchy,i=a.format;return r["configfile-urlplaceholder"].format(n,i)},getPropertiesForURL:function(e){var o=this,r=popUtils.getPath(e);return{hierarchy:o.getHierarchy(e),format:getParam(M.URLPARAM_FORMAT,e)||M.VALUES_DEFAULT,path:r}},getConfigByDomain:function(e){var o=this,r=o.config[e];return r||e==M.HOME_DOMAIN||(r=o.config[M.HOME_DOMAIN]),r||{}},getConfig:function(e){var o=this,r=getDomain(e);return o.getConfigByDomain(r)},getHierarchy:function(e){var o=this.getConfig(e),r=popUtils.getPath(e);return r?r.startsWith(o.paths.author)&&r!=o.paths.author?"author":r.startsWith(o.paths.tag)&&r!=o.paths.tag?"tag":-1===o.paths.single.indexOf(r)&&o.paths.single.some(function(e){return r.startsWith(e)&&r!=e})?"single":"page":"home"},getResourcesDB:function(e){var o=this,r=o.getConfig(e);if(!r||!r.resources)return{};var a=o.getHierarchy(e),n=popUtils.getPath(e),i=r.resources[a];if(!i)return{};"single"==a?i=i[r.paths.single.filter(function(e){return n.startsWith(e)&&n!=e})[0]]:"page"==a&&(i=i[n]);var t={url:e,path:n,config:r,resourcesDB:i};return popJSLibraryManager.execute("loadResourcesDB",t),(i=t.resourcesDB)||{}},getURLComponents:function(e){var o=[],r=getParam(M.URLPARAM_TARGET,e)||M.URLPARAM_TARGET_MAIN,a=getParam(M.URLPARAM_FORMAT,e)||M.VALUES_DEFAULT,n=getParam(M.URLPARAM_TAB,e)||"";return a&&o.push(M.CODESPLITTING.PREFIXES.FORMAT+a),n&&o.push(M.CODESPLITTING.PREFIXES.TAB+n),r&&o.push(M.CODESPLITTING.PREFIXES.TARGET+r),{params:o,target:r,format:a,tab:n,key:o.join(M.SEPARATOR_RESOURCELOADER)}},initLoadedByDomain:function(e){var o=this;o["loaded-by-domain"][e]||(o["loaded-by-domain"][e]={bundles:[],"bundle-groups":[]})},loadResourcesForURL:function(o){var r=this,a=r.getConfig(o),n=r.getResourcesDB(o),i=r.getURLComponents(o),t=a.keys[i.key];if(t&&n[t]){var d=getDomain(o);r.initLoadedByDomain(d);var s=n[t];e.each(s,function(n,i){if(-1==r["loaded-by-domain"][d]["bundle-groups"].indexOf(i)){var t=a["bundle-groups"][i]||[];t=e(t).not(r["loaded-by-domain"][d].bundles).get(),e.each(t,function(n,i){if(-1==r["loaded-by-domain"][d].bundles.indexOf(i)){var t=a.bundles[i];t=e(t).not(r.loaded).get(),t=e(t).not(r.loading).get(),e.each(t,function(e,n){r.loadResource(o,a,n)})}})}})}else i.target!=M.URLPARAM_TARGET_MAIN&&(o=removeQueryFields(o,[M.URLPARAM_TARGET]),r.loadResourcesForURL(o))},loadResource:function(e,o,r){var a=this;a["loading-resources"][e]=a["loading-resources"][e]||[],-1==a["loading-resources"][e].indexOf(r)&&a["loading-resources"][e].push(r),a.loading.push(r);var n=a["error-loading"].indexOf(r);n>=0&&a["error-loading"].splice(n,1);var i=o.sources[r];if(a["loading-urls"][i]=r,o.types[M.RESOURCELOADER.TYPES.JS].indexOf(r)>=0){var t=o["ordered-load-resources"].indexOf(r)>=0;load_script(i,markJSResourceAsLoaded,t)}else o.types[M.RESOURCELOADER.TYPES.CSS].indexOf(r)>=0&&load_style(i,markResourceAsLoaded)},areResourcesLoadedForURL:function(o){var r=this,a=r.getConfig(o),n=r.getResourcesDB(o),i=r.getURLComponents(o),t=a.keys[i.key];if(t&&n[t]){var d=getDomain(o);r.initLoadedByDomain(d);var s=n[t];s=e(s).not(r["loaded-by-domain"][d]["bundle-groups"]).get();var u=!0;if(e.each(s,function(n,i){var t=a["bundle-groups"][i]||[];t=e(t).not(r["loaded-by-domain"][d].bundles).get();var s=!0;e.each(t,function(n,i){var t=a.bundles[i];t=e(t).not(r.loaded).get();var u=!0;e.each(t,function(e,n){if(r["error-loading"].indexOf(n)>=0&&(r["error-loading-times"][n]>=3?r.loaded.push(n):r.loadResource(o,a,n)),-1==r.loaded.indexOf(n)){u=!1;var i=a.sources[n];r["loading-urls"][i]||r.loadResource(o,a,n)}}),u?r["loaded-by-domain"][d].bundles.push(i):s=!1}),s?r["loaded-by-domain"][d]["bundle-groups"].push(i):u=!1}),u){var l=r["loading-resources"][o];if(l&&l.length){delete r["loading-resources"][o];var c=[];if(e.each(l,function(e,o){c=c.concat(popCodeSplitJSLibraryManager.getLibraries(o))}),c.length){var g={domain:M.HOME_DOMAIN,codeSplitLibraries:c};popJSLibraryManager.execute("documentInitializedIndependent",g)}}}return u}return i.target==M.URLPARAM_TARGET_MAIN||(o=removeQueryFields(o,[M.URLPARAM_TARGET]),r.areResourcesLoadedForURL(o))}}}(jQuery),popJSLibraryManager.register(popResourceLoader,["preFetchPageSection","areResourcesLoaded"]);
;"use strict";!function(e){window.popManager={mergingTemplatePromise:!1,state:{},sitemapping:{},runtimeMemory:{general:{},url:{}},initialBlockMemory:{},urlPointers:{},replicableMemory:{},firstLoad:{},documentTitle:null,domains:{},loaded:!1,getMemory:function(e){return this.state[e].memory},getDatabase:function(e){return this.state[e].database},getUserDatabase:function(e){return this.state[e].userdatabase},getInitialBlockMemory:function(e){var t=this;if(e==M.INITIAL_URL)return t.initialBlockMemory[e];var n=t.urlPointers[e];return n?t.initialBlockMemory[n.url]:t.initialBlockMemory[e]||{}},addInitialBlockMemory:function(t){var n=this,a=t.feedback.toplevel[M.URLPARAM_URL];n.initialBlockMemory[a]||(n.initialBlockMemory[a]={dataset:{},feedback:{block:{}},"query-state":{general:{},domain:{}},runtimesettings:{configuration:{}}});var i=n.initialBlockMemory[a];e.each(t.settings.configuration,function(n,a){i["query-state"].general[n]||(i["query-state"].general[n]={},i["query-state"].domain[n]={},i.runtimesettings.configuration[n]={},i.dataset[n]={},i.feedback.block[n]={}),e.extend(i["query-state"].general[n],t["query-state"].general[n]),e.extend(i["query-state"].domain[n],t["query-state"].domain[n]),e.extend(i.runtimesettings.configuration[n],t.runtimesettings.configuration[n]),e.extend(i.dataset[n],t.dataset[n]),e.extend(i.feedback.block[n],t.feedback.block[n])})},getReplicableMemory:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN;var a=n.urlPointers[e];return n.replicableMemory[a.url][a.target]},saveUrlPointers:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var i=t.feedback.toplevel[M.URLPARAM_URL];e.each(t.feedback.pagesection,function(t,r){r["intercept-urls"]&&e.each(r["intercept-urls"],function(t,r){e.each(r,function(e,t){a.urlPointers[t]={url:i,target:n}})})}),e.each(t.feedback.block,function(t,r){e.each(r,function(t,r){r["intercept-urls"]&&e.each(r["intercept-urls"],function(t,r){e.each(r,function(e,t){a.urlPointers[t]={url:i,target:n}})})})})},addReplicableMemory:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var i=!1;if(e.each(t.settings.configuration,function(e,t){if(t[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE].length)return i=!0,-1}),i){var r=t.feedback.toplevel[M.URLPARAM_URL];a.replicableMemory[r]||(a.replicableMemory[r]={}),a.replicableMemory[r][n]={dataset:e.extend(!0,{},t.dataset),feedback:e.extend(!0,{},t.feedback),"query-state":e.extend(!0,{},t["query-state"])}}},getRuntimeMemory:function(e,t,n,a){var i=this;if(a=a||{},i.getPageSectionPage(n).data("paramsscope")==M.SETTINGS_PARAMSSCOPE_URL){var r=a.url||i.getTopLevelFeedback(e)[M.URLPARAM_URL];return i.runtimeMemory.url[r]||(i.runtimeMemory.url[r]={}),n.data(M.PARAMS_PARAMSSCOPE_URL,r),i.runtimeMemory.url[r]}return i.runtimeMemory.general},newRuntimeMemoryPage:function(e,t,n,a){var i=this;if(!(a=a||{}).url){var r=i.getTopLevelFeedback(e);a.url=r[M.URLPARAM_URL]}var o=i.getRuntimeMemory(e,t,n,a),s=i.getSettingsId(t),c=i.getSettingsId(n);return o[s]||(o[s]={}),o[s][c]={"query-state":{general:{},domain:{}},id:null},o[s][c]},deleteRuntimeMemoryPage:function(t,n,a,i){var r=this,o=r.getRuntimeMemory(t,n,a,i),s=r.getSettingsId(n),c=r.getSettingsId(a);o[s]&&(delete o[s][c],e.isEmptyObject(o[s])&&delete o[s])},getRuntimeMemoryPage:function(t,n,a){var i,r,o=this;if((a=a||{}).url)r=a.url;else if("object"==e.type(n)){var s=n;r=o.getTargetParamsScopeURL(s)}i=r?o.runtimeMemory.url[r]:o.runtimeMemory.general;var c=o.getSettingsId(t),g=o.getSettingsId(n);if(!i[c]||!i[c][g]){var u="Mempage not available";throw r&&(u+=" for url "+r),new Error(u)}return i[c][g]},isFirstLoad:function(e){var t=this;return t.firstLoad[t.getSettingsId(e)]},initDomainVars:function(e){this.state[e]={memory:{settings:{"js-settings":{},jsmethods:{pagesection:{},block:{}},"templates-cbs":{},"templates-paths":{},"db-keys":{},configuration:{}},runtimesettings:{"query-url":{},"query-multidomain-urls":{},configuration:{},"js-settings":{}},dataset:{},feedback:{block:{},pagesection:{},toplevel:{}},"query-state":{general:{},domain:{}}},database:{},userdatabase:{}}},init:function(){var t=this;if(e(document.body).removeClass("pop-loadinghtml"),e("#"+popPageSectionManager.getTopLevelSettingsId()).length){var n=M.HOME_DOMAIN;t.initLocalStorage(),t.initDomain(n),t.initTopLevelJson(n),t.initDocument(n);var a=t.getMemory(n),i=[],r=t.getTopLevelFeedback(n),o=r[M.URLPARAM_URL],s=r[M.URLPARAM_SILENTDOCUMENT],c=r[M.URLPARAM_BACKGROUNDLOADURLS];popJSRuntimeManager.setPageSectionURL(o),e.each(a.settings.configuration,function(a,r){var o=r[M.JS_FRONTENDID],s=e("#"+o);s.attr("data-settings-id",a),s.addClass("pop-pagesection"),t.initPageSectionSettings(n,s,r),t.addPageSectionIds(n,s,r[M.JS_TEMPLATE]),t.initPageSection(n,s),i.push(s)});var g={"serverside-rendering":M.USESERVERSIDERENDERING,"session-ids-url":o},u=null;M.USE_PROGRESSIVEBOOTING&&(u=M.PROGRESSIVEBOOTING.CRITICAL);var l=e.Deferred();t.mergingTemplatePromise=l.promise(),e.each(i,function(e,a){t.renderPageSection(n,a,u,g)}),l.resolve(),e(document.body).removeClass("pop-loadingframe"),e.each(i,function(e,a){t.pageSectionInitialized(n,a)}),s||(popBrowserHistory.replaceState(o),t.updateDocument(n)),t.documentInitialized(n),e(document.body).removeClass("pop-loadingjs"),t.backgroundLoad(M.BACKGROUND_LOAD),t.backgroundLoad(c),window.addEventListener("load",function(){t.documentLoaded(n),M.USE_PROGRESSIVEBOOTING&&e.each(i,function(e,a){t.initPageSectionBranches(n,a,M.PROGRESSIVEBOOTING.NONCRITICAL,g)})})}},expandJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&(e[M.JS_MODULES]&&(e.modules=e[M.JS_MODULES]),e.bs&&e.bs["db-keys"]&&e.bs["db-keys"][M.JS_SUBCOMPONENTS]&&(e.bs["db-keys"].subcomponents=e.bs["db-keys"][M.JS_SUBCOMPONENTS]),e[M.JS_TEMPLATE]&&(e.template=e[M.JS_TEMPLATE]),e[M.JS_TEMPLATEIDS]&&(e["template-ids"]=e[M.JS_TEMPLATEIDS]),e[M.JS_SETTINGSID]&&(e["settings-id"]=e[M.JS_SETTINGSID]),e[M.JS_SETTINGSIDS]&&(e["settings-ids"]=e[M.JS_SETTINGSIDS],e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS]&&(e["settings-ids"].blockunits=e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS])),e[M.JS_TEMPLATESOURCES]&&(e["template-sources"]=e[M.JS_TEMPLATESOURCES]),e[M.JS_INTERCEPT]&&(e.intercept=e[M.JS_INTERCEPT]),e[M.JS_BLOCKSETTINGSIDS]&&(e["block-settings-ids"]=e[M.JS_BLOCKSETTINGSIDS],e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]&&(e["block-settings-ids"].blockunits=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]&&(e["block-settings-ids"]["blockunits-replicable"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME]&&(e["block-settings-ids"]["blockunits-frame"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME])),e[M.JS_REPLICATEBLOCKSETTINGSIDS]&&(e["replicate-blocksettingsids"]=e[M.JS_REPLICATEBLOCKSETTINGSIDS],e[M.JS_INTERCEPTSKIPSTATEUPDATE]&&(e["intercept-skipstateupdate"]=e[M.JS_INTERCEPTSKIPSTATEUPDATE]),e[M.JS_UNIQUEURLS]&&(e["unique-urls"]=e[M.JS_UNIQUEURLS]),e[M.JS_REPLICATETYPES]&&(e["replicate-types"]=e[M.JS_REPLICATETYPES])),e[M.JS_PARAMS]&&(e.params=e[M.JS_PARAMS]),e[M.JS_ITEMOBJECTPARAMS]&&(e["itemobject-params"]=e[M.JS_ITEMOBJECTPARAMS]),e[M.JS_PREVIOUSTEMPLATESIDS]&&(e["previoustemplates-ids"]=e[M.JS_PREVIOUSTEMPLATESIDS]),e[M.JS_BLOCKFEEDBACKPARAMS]&&(e["blockfeedback-params"]=e[M.JS_BLOCKFEEDBACKPARAMS]),e[M.JS_APPENDABLE]&&(e.appendable=e[M.JS_APPENDABLE]),e[M.JS_CLASS]&&(e.class=e[M.JS_CLASS]),e[M.JS_CLASSES]&&(e.classes=e[M.JS_CLASSES],e[M.JS_CLASSES][M.JS_APPENDABLE]&&(e.classes.appendable=e[M.JS_CLASSES][M.JS_APPENDABLE])),e[M.JS_STYLE]&&(e.style=e[M.JS_STYLE]),e[M.JS_STYLES]&&(e.styles=e[M.JS_STYLES]),e[M.JS_TITLES]&&(e.titles=e[M.JS_TITLES]),popJSLibraryManager.execute("expandJSKeys",{context:e}))},addPageSectionIds:function(e,t,n){var a=this.getSettingsId(t),i=t.attr("id");popJSRuntimeManager.addPageSectionId(e,a,n,i);var r={domain:e,pageSection:t,template:n};popJSLibraryManager.execute("addPageSectionIds",r)},initDocument:function(t){var n=this;e(document).on("user:loggedout",function(e,t,a){n.clearUserDatabase(a)});var a={domain:t};popJSLibraryManager.execute("initDocument",a),e(document).triggerHandler("initialize.pop.document",[t])},initDomain:function(t){var n=this;n.domains[t]={initialized:!0},n.initDomainVars(t);var a={domain:t};popJSLibraryManager.execute("initDomain",a),e(document).triggerHandler("initialize.pop.domain",[t])},maybeInitializeDomain:function(e){var t=this;t.domains[e]&&t.domains[e].initialized||t.initDomain(e)},documentInitialized:function(t){var n={domain:t};popJSLibraryManager.execute("documentInitialized",n),e(document).triggerHandler("initialized.pop.document")},documentLoaded:function(t){this.loaded=!0;var n={domain:t};popJSLibraryManager.execute("documentInitializedIndependent",n),popJSLibraryManager.execute("documentLoaded",n),e(document).triggerHandler("loaded.pop.document")},pageSectionFetchSuccess:function(e,t,n){var a={pageSection:e,response:t,options:n};popJSLibraryManager.execute("pageSectionFetchSuccess",a),e.triggerHandler("fetched.pop.pageSection")},blockFetchSuccess:function(e,t,n){popJSLibraryManager.execute("blockFetchSuccess",{pageSection:e,block:t,response:n}),t.triggerHandler("fetched.pop.block")},backgroundLoad:function(t){var n=this;n.loaded?n.execBackgroundLoad(t):e(document).on("loaded.pop.document",function(){n.execBackgroundLoad(t)})},execBackgroundLoad:function(t){var n=this,a={"loadingmsg-target":null,silentDocument:!0};e.each(t,function(t,i){e.each(i,function(i,r){n.fetch(t,e.extend({target:r},a))})})},initPageSection:function(t,n){var a=this;a.firstLoad[a.getSettingsId(n)]=!0,a.initPageSectionRuntimeMemory(t,n),n.triggerHandler("initialize"),e(document).triggerHandler("initialize.pop.pagesection",[n])},pageSectionInitialized:function(e,t){var n=this;popJSLibraryManager.execute("pageSectionInitialized",{domain:e,pageSection:t}),t.triggerHandler("initialized"),t.triggerHandler("completed"),n.firstLoad[n.getSettingsId(t)]=!1},pageSectionNewDOMsInitialized:function(t,n,a,i,r){var o=this,s=a.filter(".pop-pagesection-page");if(s.length){r["fetch-params"]&&e.each(r["fetch-params"],function(e,t){s.data(e,t)});var c=popPageSectionManager.getOpenMode(n),g=o.isFirstLoad(n);("automatic"==c||g&&"initial"==c)&&popPageSectionManager.open(n)}var u={domain:t,pageSection:n,newDOMs:a};o.extendArgs(u,r),popJSLibraryManager.execute("pageSectionNewDOMsBeforeInitialize",u),o.initPageSectionBranches(t,n,i,r),popJSLibraryManager.execute("pageSectionNewDOMsInitialized",u)},initPageSectionBranches:function(t,n,a,i){var r=this,o=(i=i||{})["session-ids-url"];o||(o=popManager.getTopLevelFeedback(t)[M.URLPARAM_URL]),popJSRuntimeManager.setPageSectionURL(o),r.runPageSectionJSMethods(t,n,a,i);var s=r.getPageSectionJsSettings(t,n)["initjs-blockbranches"];s&&(s=e(s.join(",")),s=a!=M.PROGRESSIVEBOOTING.NONCRITICAL?s.not("."+M.JS_INITIALIZED):s.filter("."+M.CRITICALJS_INITIALIZED),r.initBlockBranches(t,n,s,a,i)),a!=M.PROGRESSIVEBOOTING.CRITICAL&&(popJSRuntimeManager.setPageSectionURL(o),popJSRuntimeManager.deletePageSectionLastSessionIds(t,n))},triggerDestroyTarget:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN,n.removeOpenTab(e,t),popURLInterceptors.intercept(n.getDestroyUrl(e),{target:t})},destroyTarget:function(t,n,a){var i=this,r={domain:t,pageSection:n,destroyTarget:a};popJSLibraryManager.execute("destroyTarget",r),a.triggerHandler("destroy"),a.find(".pop-block."+M.JS_INITIALIZED).addBack(".pop-block."+M.JS_INITIALIZED).each(function(){var a=e(this);i.deleteRuntimeMemoryPage(t,n,a,{url:i.getTargetParamsScopeURL(a)})}),a.remove()},destroyPageSectionPage:function(e,t,n){var a=this,i=n||t;n.siblings(".pop-pagesection-page").length||(popPageSectionManager.close(t),popPageSectionManager.close(t,"xs")),a.destroyTarget(e,t,i)},pageSectionRendered:function(e,t,n,a,i){this.pageSectionNewDOMsInitialized(e,t,n,a,i)},runScriptsBefore:function(e,t){var n={pageSection:e,newDOMs:t};popJSLibraryManager.execute("runScriptsBefore",n)},jsInitialized:function(e){return e.hasClass(M.JS_INITIALIZED)},jsLazy:function(e){return e.hasClass(M.CLASS_LAZYJS)},setJsInitialized:function(e,t){e.addClass(M.JS_INITIALIZED).removeClass(M.CLASS_LAZYJS),t==M.PROGRESSIVEBOOTING.CRITICAL&&e.addClass(M.CRITICALJS_INITIALIZED)},initBlockBranches:function(t,n,a,i,r){var o=this;a.length&&a.each(function(){var a=e(this),s=!0;if(i!=M.PROGRESSIVEBOOTING.NONCRITICAL&&(s=!o.jsInitialized(a)),r["force-init"]||(s=s&&!o.jsLazy(a)),s){i!=M.PROGRESSIVEBOOTING.NONCRITICAL?o.initBlock(t,n,a,i,r):(popJSRuntimeManager.setBlockURL(a),o.runBlockJSMethods(t,n,a,i,r));var c=o.getJsSettings(t,n,a),g=c["initjs-blockbranches"];g&&(g=e(g.join(", ")),g=i!=M.PROGRESSIVEBOOTING.NONCRITICAL?g.not("."+M.JS_INITIALIZED):g.filter("."+M.CRITICALJS_INITIALIZED),o.initBlockBranches(t,n,g,i,r));var u=c["initjs-blockchildren"];if(u){var l=a;e.each(u,function(t,n){e.each(n,function(e,t){l=l.children(t),l=i!=M.PROGRESSIVEBOOTING.NONCRITICAL?l.not("."+M.JS_INITIALIZED):l.filter("."+M.CRITICALJS_INITIALIZED)})}),o.initBlockBranches(t,n,l,i,r)}}})},initBlock:function(t,n,a,i,r){var o=this;r=r||{},o.initBlockRuntimeMemory(t,n,a,e.extend({},r)),o.initializeBlock(a,i),o.runScriptsBefore(n,a),o.runBlockJSMethods(t,n,a,i,r),a.on("rendered",function(t,a,i,s){var c=e(this);popJSRuntimeManager.setBlockURL(c),o.runScriptsBefore(n,a),o.runBlockJSMethods(s,n,c,null,null,r)}),o.blockInitialized(t,n,a,r),o.loadBlockContent(t,n,a)},initializeBlock:function(e,t){this.setJsInitialized(e,t),e.triggerHandler("initialize")},extendArgs:function(t,n){(n=n||{})["js-args"]&&e.extend(t,n["js-args"])},blockInitialized:function(e,t,n,a){var i={domain:e,pageSection:t,block:n};this.extendArgs(i,a),popJSLibraryManager.execute("blockInitialized",i),n.triggerHandler("js:initialized")},loadBlockContent:function(t,n,a){var i=this;if(!i.isContentLoaded(n,a)){a.one("fetchDomainCompleted",function(e,t,n){a.removeClass(M.CLASS_LOADINGCONTENT)}),i.setContentLoaded(n,a);var r={action:M.CBACTION_LOADCONTENT,"post-data":a.data("post-data")};i.getJsSettings(t,n,a)["loadcontent-showdisabledlayer"]&&(r["show-disabled-layer"]=!0),e(document).ready(function(e){i.fetchBlock(n,a,r)})}},getGroupMethodsByPriority:function(t,n){var a=[M.PROGRESSIVEBOOTING.CRITICAL,M.PROGRESSIVEBOOTING.NONCRITICAL];if(a.indexOf(n)>=0)return t[n];var i={};return e.each(a,function(n,a){t[a]&&e.extend(i,t[a])}),i},runPageSectionJSMethods:function(t,n,a,i){var r=this,o=popJSRuntimeManager.getPageSectionSessionIds(t,n,"last");if(o){var s=[],c=r.getPageSectionJsMethods(t,n);e.each(c,function(c,g){if(-1==s.indexOf(c)){s.push(c);var u=r.getGroupMethodsByPriority(g,a);o[c]&&u&&e.each(u,function(a,s){var g=o[c][a];if(g){var u="#"+g.join(", #"),l=e(u);l.length&&e.each(s,function(e,a){var o={domain:t,pageSection:n,targets:l};r.extendArgs(o,i),popJSLibraryManager.execute(a,o)})}})}})}},runBlockJSMethods:function(e,t,n,a,i){this.runJSMethods(e,t,n,null,null,a,i),a!=M.PROGRESSIVEBOOTING.CRITICAL&&popJSRuntimeManager.deleteBlockLastSessionIds(e,t,n)},runJSMethods:function(e,t,n,a,i,r,o){var s=this,c=popJSRuntimeManager.getBlockSessionIds(e,t,n,i);if(c){var g=s.getTemplateJSMethods(e,t,n,a);s.runJSMethodsInner(e,t,n,g,c,[],r,o)}},runJSMethodsInner:function(t,n,a,i,r,o,s,c){var g=this;c=c||{};var u=i[M.JS_TEMPLATE];if(-1==o.indexOf(u)&&(o.push(u),i[M.JS_METHODS])){var l=g.getGroupMethodsByPriority(i[M.JS_METHODS],s);r[u]&&l&&e.each(l,function(i,o){var s=r[u][i];if(s){var l="#"+s.join(", #"),d=e(l);d.length&&e.each(o,function(e,i){var r={domain:t,pageSection:n,block:a,targets:d};g.extendArgs(r,c),popJSLibraryManager.execute(i,r)})}})}i[M.JS_NEXT]&&e.each(i[M.JS_NEXT],function(e,i){g.runJSMethodsInner(t,n,a,i,r,o,s,c)})},getTemplateJSMethods:function(e,t,n,a){var i=this,r=i.getBlockJsMethods(e,t,n);return a?i.getTemplateJSMethodsInner(t,n,a,r):r},getTemplateJSMethodsInner:function(t,n,a,i){var r=this;if(i[M.JS_TEMPLATE]==a)return i;var o;return i[M.JS_NEXT]&&e.each(i[M.JS_NEXT],function(e,i){if(o=r.getTemplateJSMethodsInner(t,n,a,i))return!1}),o},maybeRedirect:function(e){var t=this;if(e.redirect&&e.redirect.url){if(!e.redirect.fetch)return window.location=e.redirect.url,!0;t.click(e.redirect.url)}return!1},historyReplaceState:function(e,t){var n=this,a=e.data("historystate-url"),i=e.data("historystate-title");e.data("historystate-thumb");popBrowserHistory.replaceState(a),i&&(n.documentTitle=unescapeHtml(i),document.title=n.documentTitle)},isHidden:function(t){if(t.hasClass("hidden"))return!0;var n=t.attr("id");if(n&&!e("#"+n).length)return!0;var a=t.parents(".tab-pane"),i=a.filter(".active");if(a.length>i.length)return!0;var r=popJSLibraryManager.execute("isHidden",{targets:t}),o=!1;return e.each(r,function(e,t){if(t)return o=!0,-1}),o},isActive:function(t){var n=popJSLibraryManager.execute("isActive",{targets:t}),a=!0;return e.each(n,function(e,t){if(!t)return a=!1,-1}),a},isContentLoaded:function(e,t){return this.getBlockQueryState(e,t)[M.DATALOAD_CONTENTLOADED]||!1},setContentLoaded:function(e,t){this.getBlockQueryState(e,t)[M.DATALOAD_CONTENTLOADED]=!0},updateDocument:function(e){var t=this;t.updateTitle(t.getTopLevelFeedback(e)[M.URLPARAM_TITLE])},updateTitle:function(e){var t=this;e&&(t.documentTitle=unescapeHtml(e),document.title=t.documentTitle)},executeSetFilterBlockParams:function(t,n,a){var i=this.getBlockQueryState(t,n);i.filter=a.find("."+M.FILTER_INPUT).filter(function(){return e.trim(this.value)}).serialize(),i.filter&&(i.filter+="&"+a.find("."+M.FILTER_NAME_INPUT).serialize())},setFilterBlockParams:function(e,t,n){var a=this;a.jsInitialized(t)?a.executeSetFilterBlockParams(e,t,n):t.one("js:initialized",function(){a.executeSetFilterBlockParams(e,t,n)})},filter:function(e,t,n){var a=this;a.setFilterBlockParams(e,t,n),a.reload(e,t),a.blockScrollTop(e,t)},blockScrollTop:function(e,t){var n=this,a=t.closest(".modal");0==a.length?n.scrollToElem(e,t.children(".blocksection-status").first(),!0):a.animate({scrollTop:0},"fast")},setReloadBlockParams:function(t,n){var a=this.getBlockMultiDomainQueryState(t,n);e.each(a,function(e,t){t[M.DATALOAD_PARAMS]&&t[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]&&(t[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]=""),t[M.URLPARAM_STOPFETCHING]&&(t[M.URLPARAM_STOPFETCHING]=!1)})},refetch:function(e,t,n){var a=this;(n=n||{}).action=M.CBACTION_REFETCH,t.triggerHandler("beforeRefetch"),a.reload(e,t,n)},reset:function(e,t,n,a){var i=this;(a=a||{})["skip-restore"]||i.restoreInitialBlockMemory(t,n),i.processBlock(e,t,n,{operation:M.URLPARAM_OPERATION_REPLACE,action:M.CBACTION_RESET,reset:!0})},reload:function(e,t,n){var a=this;(n=n||{}).operation=M.URLPARAM_OPERATION_REPLACE,n.reload=!0,n["hide-latestcount"]=!0,a.setReloadBlockParams(e,t),t.triggerHandler("beforeReload"),a.fetchBlock(e,t,n)},loadLatest:function(t,n,a,i){var r=this;i=i||{};var o=r.getBlockDomainQueryState(t,n,a);i.operation=M.URLPARAM_OPERATION_PREPEND,i["skip-stopfetching-check"]=!0,i["hide-latestcount"]=!0;var s={};s[M.URLPARAM_ACTION]=M.URLPARAM_ACTION_LATEST,s[M.URLPARAM_TIMESTAMP]=o[M.URLPARAM_TIMESTAMP],i["onetime-post-data"]=e.param(s),a.triggerHandler("beforeLoadLatest"),r.fetchBlock(n,a,i)},handlePageSectionLoadingStatus:function(t,n,a){var i,r=this;if(void 0!==(a=a||{})["loadingmsg-target"]){if(!a["loadingmsg-target"])return;i=e(a["loadingmsg-target"])}else i=popPageSectionManager.getPageSectionStatus(t).find(".pop-loading");r.handleLoadingStatus(i,n,a)},handleLoadingStatus:function(e,t){var n=e.data("num")||0;"add"==t?n+=1:"remove"==t&&(n-=1),e.data("num",n),n?e.removeClass("hidden"):e.addClass("hidden"),n>=2?e.find(".pop-box").text("x"+n):e.find(".pop-box").text("")},fetch:function(e,t){var n=this;t=t||{};var a=n.getFetchTargetPageSection(t.target);n.getPageSectionParams(a)?n.fetchPageSection(a,e,t):t["noparams-reload-url"]&&(window.location=e)},removeLocalStorageItem:function(e,t){var n={result:t.startsWith(e),key:t,path:e};return popJSLibraryManager.execute("removeLocalStorageItem",n),n.result},initLocalStorage:function(){var e=this;if(M.USELOCALSTORAGE&&supports_html5_storage()){var t=localStorage["PoP:version"];t&&t==M.VERSION||(Object.keys(localStorage).forEach(function(t){M.ALLOWED_DOMAINS.forEach(function(n){if(e.removeLocalStorageItem(n,t))return localStorage.removeItem(t),-1})}),localStorage["PoP:version"]=M.VERSION)}},openTabs:function(){var t=this;if(M.KEEP_OPEN_TABS){var n={silentDocument:!0,"js-args":{inactivePane:!0,addOpenTab:!1}},a=t.getTabsCurrentURL(),i=t.getScreenOpenTabs();e.each(i,function(i,r){if(n.target=i,i==M.URLPARAM_TARGET_MAIN){var o=r.indexOf(a);-1!==o&&r.splice(o,1)}e.each(r,function(e,a){t.fetch(a,n)})})}},getTabsCurrentURL:function(){var e=window.location.href;return e==M.HOME_DOMAIN&&(e=M.HOME_DOMAIN+"/"),e==M.HOME_DOMAIN+"/"&&M.HOMELOCALE_URL&&(e=M.HOMELOCALE_URL+"/"),e},getOpenTabsKey:function(){var t=this,n=M.LOCALE,a=M.HOME_DOMAIN,i=t.getTopLevelFeedback(a)[M.DATALOAD_PARAMS];return e.each(i,function(e,t){n+="|"+e+"="+t}),n},getScreenOpenTabs:function(){var e=this;return e.getOpenTabs()[e.getOpenTabsKey()]||{}},keepScreenOpenTab:function(e,t){var n=this,a=n.getOpenTabs(),i=n.getOpenTabsKey();a[i]={},a[i][t]=[e],n.storeData("PoP:openTabs",a)},getOpenTabs:function(){var e=this;return M.KEEP_OPEN_TABS?e.getStoredData("PoP:openTabs")||{}:{}},addOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),i=n.getOpenTabsKey();return a[i]=a[i]||{},a[i][t]=a[i][t]||[],!(a[i][t].indexOf(e)>-1)&&(a[i][t].push(e),n.storeData("PoP:openTabs",a),!0)},removeOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),i=n.getOpenTabsKey();a[i]=a[i]||{},a[i][t]=a[i][t]||[];var r=a[i][t].indexOf(e);return-1!==r&&(a[i][t].splice(r,1),a[i][t].length||(delete a[i][t],a[i].length||delete a[i]),n.storeData("PoP:openTabs",a),!0)},replaceOpenTab:function(e,t,n){var a=this;M.KEEP_OPEN_TABS&&a.removeOpenTab(e,n)&&a.addOpenTab(t,n)},getStoredData:function(e,t){if(M.USELOCALSTORAGE&&supports_html5_storage()){var n=localStorage[e];if(n)return n=JSON.parse(n),t?n.version==M.VERSION&&(void 0===n.expires||n.expires>Date.now())?n.value:(delete localStorage[e],null):n.value}return null},storeData:function(e,t,n){if(M.USELOCALSTORAGE&&supports_html5_storage()){var a={version:M.VERSION,value:t};n&&(a.expires=Date.now()+n);try{localStorage[e]=JSON.stringify(a)}catch(e){console.log("Error: "+e.message)}}},fetchPageSection:function(t,n,a){var i=this,r=i.getPageSectionParams(t);if(r&&!(r.loading.indexOf(n)>-1)){a=a||{};var o=i.getTarget(t),s=getDomain(n);i.maybeInitializeDomain(s);var c={domain:s,options:a,url:n};popJSLibraryManager.execute("modifyFetchArgs",c);var g=c.url;g.indexOf("#")>-1&&(g=g.substr(0,g.indexOf("#"))),g=add_query_arg(M.URLPARAM_TARGET,o,g),g=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_SETTINGSDATA,g),g=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,g),popJSLibraryManager.execute("preFetchPageSection",{url:g,options:a});var u=i.getTopLevelFeedback(s),l=e.extend({},u[M.DATALOAD_PARAMS],r[M.DATALOAD_PARAMS]);a.params&&e.extend(l,a.params);var d,p=e.param(l);d=g+"|"+p;var S=s==M.HOME_DOMAIN&&i.getStoredData(d);if(S)return i.prePageSectionSuccess(t,S,a),void i.processPageSectionResponse(s,t,n,g,S,a);var m=popPageSectionManager.getPageSectionStatus(t).find(".pop-error");a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").removeClass("hidden");var f=i.getCrossDomainOptions(g);e.ajax(e.extend(f,{dataType:"json",url:g,data:p,beforeSend:function(e,s){e.url=n,r.url[e.url]=n,r.target[e.url]=o,r["fetch-url"][e.url]=s.url,r.loading.push(n),i.handlePageSectionLoadingStatus(t,"add",a)},complete:function(n){var o=r.url[n.url];if(delete r.url[n.url],delete r.target[n.url],delete r["fetch-url"][n.url],r.loading.splice(r.loading.indexOf(o),1),i.handlePageSectionLoadingStatus(t,"remove",a),a["urlfetched-callbacks"]){var s="urlfetched:"+escape(o);e.each(a["urlfetched-callbacks"],function(t,n){e(document).one(s,n)})}a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").addClass("hidden")},success:function(e,n,o){i.prePageSectionSuccess(t,e,a),m.addClass("hidden");var c=r.url[o.url],u=e.feedback.toplevel[M.URLPARAM_URL],l=r.target[o.url];c!=u&&i.replaceOpenTab(c,u,l),a["fetch-params"]={url:c,target:l,"fetch-url":r["fetch-url"][o.url]},e.feedback.toplevel[M.URLPARAM_STORELOCAL]&&s==M.HOME_DOMAIN&&i.storeData(d,e),i.processPageSectionResponse(s,t,c,g,e,a)},error:function(e,n,o){r.url[e.url];var s=r.url[e.url];a.silentDocument||i.showError(t,i.getError(t,s,e,n,o)),i.triggerURLFetchFailed(s),t.triggerHandler("fetchFailed")}}))}},prePageSectionSuccess:function(e,t,n){var a=this;a.pageSectionFetchSuccess(e,t,n),a.backgroundLoad(t.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS])},getCrossDomainOptions:function(t){var n={};return t.startsWith(M.HOME_DOMAIN)||e.each(M.ALLOWED_DOMAINS,function(e,a){if(t.startsWith(a))return n.xhrFields={withCredentials:!0},n.crossDomain=!0,-1}),n},showError:function(e,t){var n=this,a=popPageSectionManager.getPageSectionStatus(e).find(".pop-error");a.children("div.pop-box").html(t),a.removeClass("hidden"),n.scrollTop(a)},triggerURLFetched:function(t,n){e(document).triggerHandler("urlfetched:"+escape(t)),e(document).triggerHandler("urlfetched",[t,n]),e(document).triggerHandler("urlfetchcompleted:"+escape(t))},triggerURLFetchFailed:function(t){e(document).triggerHandler("urlfetchfailed:"+escape(t)),e(document).triggerHandler("urlfetchfailed",[t]),e(document).triggerHandler("urlfetchcompleted:"+escape(t))},processPageSectionResponse:function(e,t,n,a,i,r){var o=this,s=o.getTarget(t);o.saveUrlPointers(i,s),o.addReplicableMemory(i,s),o.addInitialBlockMemory(i),o.integrateDatabases(e,i),o.checkExecuteProcessPageSectionResponse(e,t,n,a,i,r)},checkExecuteProcessPageSectionResponse:function(e,t,n,a,i,r){var o=this,s={loaded:!M.USECODESPLITTING,fetchUrl:a};popJSLibraryManager.execute("areResourcesLoaded",s),s.loaded?o.executeProcessPageSectionResponse(e,t,n,i,r):setTimeout(function(){o.checkExecuteProcessPageSectionResponse(e,t,n,a,i,r)},100)},executeProcessPageSectionResponse:function(t,n,a,i,r){var o=this,s=e.Deferred(),c=o.mergingTemplatePromise;o.mergingTemplatePromise=s.promise(),c.done(function(){try{o.processPageSection(t,n,i,r),o.triggerURLFetched(a,r)}catch(e){o.triggerURLFetchFailed(a),console.log("Error: "+e.message)}s.resolve()})},maybeUpdateDocument:function(e,t,n){var a=this;if(!(n=n||{}).silentDocument&&a.getFetchPageSectionSettings(t).updateDocument){if(!n.skipPushState){var i=a.getTopLevelFeedback(e);popBrowserHistory.pushState(i[M.URLPARAM_URL])}a.updateDocument(e)}},processPageSection:function(t,n,a,i){var r=this,o=r.getTarget(n);r.integrateTopLevelFeedback(t,a);var s=r.getTopLevelFeedback(t),c=s[M.URLPARAM_ERROR];c&&r.showError(n,c);var g=s[M.URLPARAM_URL];i.reloadurl&&r.triggerDestroyTarget(g,o),s[M.URLPARAM_SILENTDOCUMENT]&&(i.silentDocument=!0),r.maybeUpdateDocument(t,n,i),i.maybeRedirect&&r.maybeRedirect(s)||(r.integratePageSection(t,a),popJSRuntimeManager.setPageSectionURL(g),e.each(a.settings.configuration,function(n,a){var o=a[M.JS_FRONTENDID],s=e("#"+o);r.renderPageSection(t,s,null,i),s.triggerHandler("fetched",[i,g,t]),s.triggerHandler("completed")}))},scrollToElem:function(e,t,n){popJSLibraryManager.execute("scrollToElem",{elem:e,position:t,animate:n})},scrollTop:function(e,t,n){popJSLibraryManager.execute("scrollTop",{elem:e,top:t,animate:n})},getSettingsId:function(t){return"object"==e.type(t)?t.attr("data-settings-id"):t},getError:function(e,t,n,a,i){var r=this.getTarget(e);return 0===n.status?M.ERROR_OFFLINE.format(t,r):404==n.status?M.ERROR_404:M.ERROR_MSG.format(t,r)},closeMessageFeedback:function(e){var t={elem:e};popJSLibraryManager.execute("closeMessageFeedback",t)},closeMessageFeedbacks:function(e){var t={pageSection:e};popJSLibraryManager.execute("closeMessageFeedbacks",t)},processBlock:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n),s=i.getMemory(e);a.extendContext={items:s.dataset[r][o],ignorePSRuntimeId:!0},popJSRuntimeManager.setBlockURL(n),i.renderTarget(e,t,n,a)},fetchBlock:function(e,t,n){var a=this;!(n=n||{})["skip-stopfetching-check"]&&a.stopFetchingBlock(e,t)||a.executeFetchBlock(e,t,n)},getBlockPostData:function(t,n,a,i){var r=this,o=(i=i||{}).paramsGroup||"all",s=r.getBlockQueryState(n,a),c=r.getBlockDomainQueryState(t,n,a),g={};"all"==o&&(e.extend(g,s[M.DATALOAD_PARAMS]),c[M.DATALOAD_PARAMS]&&e.extend(g,c[M.DATALOAD_PARAMS])),s[M.DATALOAD_VISIBLEPARAMS]&&e.extend(g,s[M.DATALOAD_VISIBLEPARAMS]),c[M.DATALOAD_VISIBLEPARAMS]&&e.extend(g,c[M.DATALOAD_VISIBLEPARAMS]),e.each(g,function(e,t){t||delete g[e]});var u=e.param(g);return s.filter&&(u&&(u+="&"),u+=s.filter),u},handleBlockError:function(t,n,a){var i=this,r=[".errormsg.status-"+n.status,".errormsg.general"];e.each(r,function(e,n){var a=t.find(n);if(a.length)return a.removeClass("hidden").siblings(".errormsg").addClass("hidden"),!1}),a["skip-status"]||(t.removeClass("hidden"),i.scrollTop(t))},getMultiDomainBlockStatus:function(e,t,n){return{timestamp:n,isFirst:e.timestamps[n].length===Object.keys(t).length,isLast:1===e.timestamps[n].length}},executeFetchBlock:function(t,n,a){var i=this,r=(a=a||{}).type||"GET",o=i.getBlockQueryState(t,n);a["post-data"]&&(o["post-data"]=a["post-data"]);var s={},c=i.getQueryMultiDomainUrls(t,n);if(e.each(c,function(c,g){if(g&&(a["skip-stopfetching-check"]||!i.stopFetchingDomainBlock(c,t,n))){i.maybeInitializeDomain(c),i.initMultiDomainFeedback(c,t,n);var u={domain:c,options:a,url:g,type:r};popJSLibraryManager.execute("modifyFetchBlockArgs",u),g=u.url;var l=i.getTopLevelFeedback(c),d=i.getPageSectionFeedback(c,t),p=i.getBlockFeedback(c,t,n),S=e.extend({},l[M.DATALOAD_PARAMS],d[M.DATALOAD_PARAMS],p[M.DATALOAD_PARAMS]),m=e.param(S);o["post-data"]&&(m&&(m+="&"),m+=o["post-data"]),a["onetime-post-data"]&&(m&&(m+="&"),m+=a["onetime-post-data"]);var f=i.getBlockPostData(c,t,n);m&&f&&(m+="&"),m+=f;var h=i.getTarget(t);g=add_query_arg(M.URLPARAM_TARGET,h,g),g=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_DATA,g);var T=(g=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,g))+m;o.loading.indexOf(T)>-1||(s[c]={url:g,loading:T,data:m})}}),!e.isEmptyObject(s)){var g=n.find(".pop-loading"),u=n.find(".pop-error");a["skip-status"]||(g.removeClass("hidden"),u.addClass("hidden"),i.closeMessageFeedback(n)),i.triggerEvent(t,n,"beforeFetch",[a]),a["show-disabled-layer"]&&n.children(".pop-disabledlayer").removeClass("hidden");var l=Date.now();e.each(s,function(c,d){var p=d.url,S=d.loading,m=d.data,f=i.getCrossDomainOptions(p);e.ajax(e.extend(f,{dataType:"json",url:p,data:m,type:r,beforeSend:function(e,t){e.url=t.url,o.url[e.url]=S,o.loading.push(S),o.timestamps[l]=o.timestamps[l]||[],o.timestamps[l].push(S),o.operation[S]=a.operation,o.action[S]=a.action,o.domain[S]=c,o["paramsscope-url"][S]=i.getTargetParamsScopeURL(n),a.reload&&o.reload.push(S),a["skip-status"]||i.handleLoadingStatus(g,"add")},success:function(r,c,g){i.blockFetchSuccess(t,n,r),i.backgroundLoad(r.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS]),a["hide-latestcount"]&&n.children(".blocksection-latestcount").find(".pop-latestcount").addClass("hidden").find(".pop-count").text("0");var u=i.getMultiDomainBlockStatus(o,s,l),d=i.mergingTemplatePromise,p=e.Deferred(),S=p.promise();i.mergingTemplatePromise=S,d.done(function(){try{i.executeFetchBlockSuccess(t,n,r,u,g)}catch(e){console.log("Error: "+e.message)}p.resolve()})},error:function(e,r,o){i.handleBlockError(u,e,a),i.triggerEvent(t,n,"fetchFailed")},complete:function(r){var c=i.getMultiDomainBlockStatus(o,s,l),u=o.action[d];c.action=u;var d=o.url[r.url];delete o.url[r.url];var p=o.domain[d];o.loading.splice(o.loading.indexOf(d),1),delete o.operation[d],delete o.action[d],delete o.domain[d],delete o["paramsscope-url"][d],o.timestamps[l].splice(o.timestamps[l].indexOf(d),1),o.timestamps[l].length||delete o.timestamps[l];var S=o.reload.indexOf(d);S>-1&&(c.reload=!0,o.reload.splice(S,1)),a["skip-status"]||i.handleLoadingStatus(g,"remove");var m=i.mergingTemplatePromise,M=e.Deferred(),f=M.promise();i.mergingTemplatePromise=f,m.done(function(){try{i.fetchBlockComplete(p,t,n,c,a)}catch(e){console.log("Error: "+e.message)}M.resolve()})}}))})}},fetchBlockComplete:function(t,n,a,i,r){var o=this,s=o.getBlockQueryState(n,a);a.children(".pop-disabledlayer").addClass("hidden"),r["datasetcount-target"]&&o.displayDatasetCount(t,n,a,e(r["datasetcount-target"]),r["datasetcount-updatetitle"]),s.loading.length||a.find(".pop-loading").addClass("hidden"),o.stopFetchingBlock(n,a)?a.addClass("pop-stopfetching"):a.removeClass("pop-stopfetching"),o.triggerEvent(n,a,"fetchDomainCompleted",[i,t]),i.isLast&&o.triggerEvent(n,a,"fetchCompleted",[i])},stopFetchingBlock:function(t,n){var a=this,i=!0,r=a.getQueryMultiDomainUrls(t,n);return e.each(r,function(e,r){if(!a.getBlockDomainQueryState(e,t,n)[M.URLPARAM_STOPFETCHING])return i=!1,-1}),i},stopFetchingDomainBlock:function(e,t,n){return this.getBlockDomainQueryState(e,t,n)[M.URLPARAM_STOPFETCHING]},displayDatasetCount:function(e,t,n,a,i){var r=this,o=r.getBlockDataset(e,t,n);if(o.length){var s=a.data("datasetcount-mode")||"add",c=o.length;"add"==s&&(c+=a.text()?parseInt(a.text()):0),c&&(a.removeClass("hidden").text(c),i&&(document.title="("+c+") "+r.documentTitle))}},initMultiDomainFeedback:function(t,n,a){var i=this,r=i.getMemory(t),o=i.getBlockTopLevelDomain(a);if(t!=o){var s=i.getSettingsId(n),c=i.getSettingsId(a),g=i.getMemory(o);e.isEmptyObject(r.feedback.toplevel)&&(r.feedback.toplevel=e.extend(!0,{},g.feedback.toplevel),void 0!==r.feedback.toplevel[M.DATALOAD_USER]&&delete r.feedback.toplevel[M.DATALOAD_USER]),e.isEmptyObject(r.feedback.pagesection[s])&&(r.feedback.pagesection[s]=e.extend(!0,{},g.feedback.pagesection[s]),r.feedback.block[s]={}),e.isEmptyObject(r.feedback.block[s][c])&&(r.feedback.block[s][c]=e.extend(!0,{},g.feedback.block[s][c]))}},initMultiDomainMemory:function(t,n,a,i){var r=this,o=r.getMemory(t),s=r.getBlockTopLevelDomain(a);if(t!=s){var c=r.getMemory(s);e.each(i["query-state"].general,function(t,n){if(e.isEmptyObject(o["query-state"].general[t])){o["query-state"].general[t]={},o["query-state"].domain[t]={},o.dataset[t]={},o.runtimesettings.configuration[t]={},o.runtimesettings["query-url"][t]={},o.runtimesettings["query-multidomain-urls"][t]={},o.runtimesettings.configuration[t]={},o.runtimesettings["js-settings"][t]={},o.settings["js-settings"][t]={},o.settings.jsmethods.pagesection[t]=e.extend({},c.settings.jsmethods.pagesection[t]),o.settings.jsmethods.block[t]={},o.settings["templates-cbs"][t]={},o.settings["templates-paths"][t]={},o.settings["db-keys"][t]={},o.settings.configuration[t]={},o.settings.configuration[t][M.JS_MODULES]={};var a=o.settings.configuration[t],i=c.settings.configuration[t];e.each(i,function(e,t){e!=M.JS_MODULES&&"modules"!=e&&"root-context"!=e&&"parent-context"!=e&&r.copyToConfiguration(e,t,a,!0)})}e.each(n,function(n,a){if(e.isEmptyObject(o["query-state"].general[t][n])){o["query-state"].general[t][n]=e.extend({},c["query-state"].general[t][n]),o["query-state"].domain[t][n]=e.extend({},c["query-state"].domain[t][n]),o.dataset[t][n]=e.extend({},c.dataset[t][n]),o.runtimesettings.configuration[t][n]={},o.runtimesettings["query-url"][t][n]=e.extend({},c.runtimesettings["query-url"][t][n]),o.runtimesettings["query-multidomain-urls"][t][n]=e.extend({},c.runtimesettings["query-multidomain-urls"][t][n]),o.runtimesettings.configuration[t][n]=e.extend({},c.runtimesettings.configuration[t][n]),o.runtimesettings["js-settings"][t][n]=e.extend({},c.runtimesettings["js-settings"][t][n]),o.settings["js-settings"][t][n]=e.extend({},c.settings["js-settings"][t][n]),o.settings.jsmethods.block[t][n]=e.extend({},c.settings.jsmethods.block[t][n]),o.settings["templates-cbs"][t][n]=e.extend({},c.settings["templates-cbs"][t][n]),o.settings["templates-paths"][t][n]=e.extend({},c.settings["templates-paths"][t][n]),o.settings["db-keys"][t][n]=e.extend({},c.settings["db-keys"][t][n]);var i=c.settings.configuration[t][M.JS_MODULES][n];delete i["root-context"],delete i["parent-context"],o.settings.configuration[t][M.JS_MODULES][n]=e.extend(!0,{},i)}})})}},executeFetchBlockSuccess:function(t,n,a,i,r){var o=this,s=o.getBlockQueryState(t,n),c=s.url[r.url],g=s.action[c],u={url:s["paramsscope-url"][c]},l={operation:s.operation[c],action:s.action[c],"fetch-status":i},d=s.domain[c];o.initMultiDomainMemory(d,t,n,a);var p=o.getMemory(d);if([M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(g)>-1){var S=o.getInitialBlockMemory(u.url);e.each(a["query-state"].general,function(t,n){e.each(n,function(e,n){p.runtimesettings.configuration[t][e]=S.runtimesettings.configuration[t][e]})})}o.integrateTopLevelFeedback(d,a),o.integrateDatabases(d,a),e.each(a["query-state"].general,function(t,n){var i=e("#"+p.settings.configuration[t].id);p.feedback.block[t]||(p.feedback.block[t]={}),e.extend(p.feedback.block[t],a.feedback.block[t]),p.dataset[t]||(p.dataset[t]={}),e.extend(p.dataset[t],a.dataset[t]),p["query-state"].general[t]||(p["query-state"].general[t]={}),p["query-state"].domain[t]||(p["query-state"].domain[t]={}),e.each(n,function(n,r){try{var s=e("#"+o.getBlockId(t,n,u));if(e.extend(o.getBlockQueryState(i,s,u),r),e.extend(o.getBlockDomainQueryState(d,i,s,u),a["query-state"].domain[t][n]),[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH].indexOf(g)>-1&&o.getJsSettings(d,i,s)["processblock-ifhasdata"]&&!a.dataset[t][n].length)return;o.processBlock(d,i,s,l)}catch(e){console.log("Error: "+e.message)}})}),n.triggerHandler("fetched",[a,g,d])},triggerEvent:function(e,t,n,a){t.triggerHandler(n,a)},integrateTopLevelFeedback:function(t,n){var a=this.getMemory(t).feedback.toplevel;e.each(n.feedback.toplevel,function(t,n){"array"==e.type(n)&&0==n.length||("object"==e.type(n)?(a[t]||(a[t]={}),e.extend(a[t],n)):a[t]=n)})},clearUserDatabase:function(e){this.state[e].userdatabase={}},integrateDatabase:function(t,n){e.each(n,function(n,a){t[n]=t[n]||{},"array"!=e.type(a)&&e.each(a,function(a,i){t[n][a]||(t[n][a]={}),e.extend(t[n][a],i)})})},integrateDatabases:function(e,t){var n=this;n.integrateDatabase(n.getDatabase(e),t.database),n.integrateDatabase(n.getUserDatabase(e),t.userdatabase)},getMergeTargetContainer:function(t){return t.data("merge-container")?e(t.data("merge-container")):t},getMergeTarget:function(t,n,a){var i=this,r=".pop-merge."+n,o=(a=a||{})["merge-target"]?e(a["merge-target"]):t.find(r).addBack(r);return i.getMergeTargetContainer(o)},generateUniqueId:function(e){var t=this,n=Date.now();return t.getTopLevelFeedback(e)[M.UNIQUEID]=n,n},getUniqueId:function(e){return this.getTopLevelFeedback(e)[M.UNIQUEID]},addUniqueId:function(e){var t=this,n=getDomain(e);return e+"#"+t.getUniqueId(n)},mergeTargetTemplate:function(e,t,n,a,i){var r=this;i=i||{};var o=[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(i.action)>-1;o&&r.generateUniqueId(e);var s=r.getTemplateHtml(e,t,n,a,i),c=r.getMergeTarget(n,a,i);i.operation=i.operation||M.URLPARAM_OPERATION_REPLACE,i.operation==M.URLPARAM_OPERATION_REPLACE&&(n.triggerHandler("replace",[i.action]),o&&n.triggerHandler("rerender",[i.action]),c.empty());var g=r.mergeHtml(s,c,i.operation);return n.triggerHandler("merged",[g.newDOMs]),g},mergeHtml:function(t,n,a){var i=this,r=e(t);return a==M.URLPARAM_OPERATION_PREPEND?n.prepend(r):a==M.URLPARAM_OPERATION_REPLACEINLINE?(n.replaceWith(r),n=r):n.append(r),i.triggerHTMLMerged(),{targetContainer:n,newDOMs:r}},triggerHTMLMerged:function(){e(document).triggerHandler("template:merged")},renderPageSection:function(t,n,a,i){var r=this;i=i||{},e.extend(i,r.getFetchPageSectionSettings(n));var o;if(i["serverside-rendering"]){r.triggerHTMLMerged(),o=r.getPageSectionDOMs(t,n);var s=r.getTopLevelFeedback(t)[M.URLPARAM_URL];i["fetch-params"]={url:s,target:M.URLPARAM_TARGET_FULL,"fetch-url":s}}else o=r.renderTarget(t,n,n,i);o.length&&r.pageSectionRendered(t,n,o,a,i)},getPageSectionDOMs:function(t,n){var a=this,i=a.getTemplatesCbs(t,n,n),r=e(),o=e();return e.each(i,function(e,t){var i=a.getMergeTarget(n,t);r.add(i),o=o.add(i.children())}),a.triggerRendered(t,n,o,r),o},renderTarget:function(t,n,a,i){var r=this,o=(i=i||{})["fetch-status"]||{isFirst:!0,isLast:!0};i.operation=i.operation||(o.isFirst?M.URLPARAM_OPERATION_REPLACE:M.URLPARAM_OPERATION_APPEND),i.operation!=M.URLPARAM_OPERATION_REPLACE||o.isFirst||(i.operation=M.URLPARAM_OPERATION_APPEND),a.triggerHandler("beforeRender",[i]);var s=r.getTemplatesCbs(t,n,a,i.action),c=e(),g=e();return e.each(s,function(e,o){var s=r.mergeTargetTemplate(t,n,a,o,i);c=c.add(s.targetContainer),g=g.add(s.newDOMs)}),r.triggerRendered(t,a,g,c),g},triggerRendered:function(t,n,a,i){n.triggerHandler("rendered",[a,i,t]),e(document).triggerHandler("rendered",[n,a,i,t])},getPageSectionConfiguration:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).settings.configuration[a]},getTargetConfiguration:function(t,n,a,i){var r=this,o=r.getTemplatePath(t,n,a,i),s=r.getPageSectionConfiguration(t,n);return o&&e.each(o,function(e,t){s=s[t]}),s},overrideFromItemObject:function(t,n,a){t&&e.each(a,function(e,a){n[a.key]=t[a.field]})},replaceFromItemObject:function(t,n,a,i,r,o,s){var c=this,g=c.getTopLevelFeedback(t),u=c.getTargetConfiguration(t,n,a,i);e.each(s,function(t,n){var a=n["replace-where-field"],i=n["replace-where-path"],s=n["replace-from-field"]||a,c=n.replacements,l=u[s];e.each(c,function(e,t){var n=t["replace-str"];if(r){var a=t["replace-with-field"];if(a&&n!=r[a]){var i=r[a];t["encode-uri-component"]?i=encodeURIComponent(i):t["encode-uri"]&&(i=encodeURI(i)),l=l.replace(new RegExp(n,"g"),i)}}var o=t["replace-from-feedback"];o&&n!=g[o]&&(l=l.replace(new RegExp(n,"g"),g[o]))});var d=o;i&&e.each(i,function(e,t){d[t]={},d=d[t]}),d[a]=l})},getTemplateHtml:function(t,n,a,i,r,o,s){var c=this,g=c.getTargetConfiguration(t,n,a,i);r=r||{};var u=g;if(c.getTemplatePath(t,n,a,i).length){var l=c.getBlock(a);c.initContextSettings(t,n,l,u),c.extendContext(u,t,o,s)}var d=r.extendContext;return d&&(u=e.extend({},u,d)),c.getHtml(i,u)},extendContext:function(t,n,a,i,r){var o=this;if(r=r||{},e.extend(t,r),a&&(e.extend(t,{itemDBKey:a}),i)){var s=o.getItemObject(n,a,i);e.extend(t,{itemObject:s,itemObjectDBKey:a})}},initTopLevelJson:function(t){var n=this,a=e("#"+popPageSectionManager.getTopLevelSettingsId()),i=JSON.parse(a.html());e(document).triggerHandler("initTopLevelJson",[i]),n.sitemapping=i.sitemapping,n.state[t].database=i.database||{},n.state[t].userdatabase=i.userdatabase||{};var r=n.getMemory(t);r.settings=i.settings,r.runtimesettings=i.runtimesettings,r.dataset=i.dataset,r.feedback=i.feedback,r["query-state"]=i["query-state"],e.each(r.dataset,function(t,n){"array"==e.type(n)&&(r.dataset[t]={})}),e.each(r["query-state"].general,function(t,n){"array"==e.type(n)&&(r["query-state"].general[t]={})}),e.each(r["query-state"].domain,function(t,n){"array"==e.type(n)&&(r["query-state"].domain[t]={})}),e.each(r.feedback.pagesection,function(t,n){"array"==e.type(n)&&(r.feedback.pagesection[t]={})}),e.each(r.feedback.block,function(t,n){"array"==e.type(n)&&(r.feedback.block[t]={})}),n.saveUrlPointers(i),n.addReplicableMemory(i),n.addInitialBlockMemory(i)},getBlockDefaultParams:function(){return{url:{},loading:[],reload:[],operation:{},action:{},domain:{},timestamps:{},"paramsscope-url":{},"post-data":"",filter:""}},getBlockDefaultMultiDomainParams:function(){return{}},getPageSectionDefaultParams:function(){return{url:{},target:{},"fetch-url":{},loading:[]}},initPageSectionRuntimeMemory:function(e,t,n){var a=this,i=a.newRuntimeMemoryPage(e,t,t,n);a.getSettingsId(t);i["query-state"]=a.getPageSectionDefaultParams();var r={domain:e,pageSection:t,runtimeMempage:i};popJSLibraryManager.execute("initPageSectionRuntimeMemory",r),popJSLibraryManager.execute("initPageSectionRuntimeMemoryIndependent",r)},initBlockRuntimeMemory:function(t,n,a,i){var r=this,o=r.newRuntimeMemoryPage(t,n,a,i),s=r.getMemory(t),c=r.getSettingsId(n),g=r.getSettingsId(a);o.id=a.attr("id"),o["query-url"]=r.getRuntimeSettings(t,n,a,"query-url"),o["query-multidomain-urls"]={},o["query-state"]={general:e.extend(r.getBlockDefaultParams(),s["query-state"].general[c][g]),domain:{}};var u=r.getRuntimeSettings(t,n,a,"query-multidomain-urls");e.each(u,function(t,n){var a=getDomain(n);o["query-multidomain-urls"][a]=n,o["query-state"].domain[a]=e.extend(r.getBlockDefaultMultiDomainParams(),s["query-state"].domain[c][g])});var l={domain:t,pageSection:n,block:a,runtimeMempage:o};popJSLibraryManager.execute("initBlockRuntimeMemory",l),popJSLibraryManager.execute("initBlockRuntimeMemoryIndependent",l)},getViewport:function(e,t){var n=t.closest(".pop-viewport");return n.length?n:e},getDOMContainer:function(t,n){var a=this;return M.DOMCONTAINER_ID?e("#"+M.DOMCONTAINER_ID):a.getViewport(t,n)},getBlock:function(t){return t.hasClass("pop-block")?t:t.closest(".pop-block").length?t.closest(".pop-block"):t.closest("[data-block]").length?e(t.closest("[data-block]").data("block")):null},getTargetParamsScopeURL:function(e){return e.data(M.PARAMS_PARAMSSCOPE_URL)},getBlockTopLevelURL:function(e){return e.data(M.PARAMS_TOPLEVEL_URL)},getBlockTopLevelDomain:function(e){return e.data(M.PARAMS_TOPLEVEL_DOMAIN)},isBlockGroup:function(e){return e.hasClass("pop-blockgroup")},getBlockGroupActiveBlock:function(e){return e.find(".tab-pane.active .pop-block, .collapse.in .pop-block")},getBlockGroupBlocks:function(e){return e.find(".pop-block")},getTemplateSource:function(e){return this.sitemapping["template-sources"][e]||e},initPageSectionSettings:function(t,n,a){var i=this,r=i.getTopLevelSettings(t);e.extend(a,{tls:r});var o=i.getPageSectionSettings(t,n),s=i.getSettingsId(n),c=a[M.JS_FRONTENDID];e.extend(a,{pss:o}),i.expandJSKeys(a),a[M.JS_MODULES]&&e.each(a[M.JS_MODULES],function(n,a){var g=a[M.JS_FRONTENDID],u=i.getBlockSettings(t,t,s,n,c,g);e.extend(a,{tls:r,pss:o,bs:u}),i.expandJSKeys(a)})},initContextSettings:function(t,n,a,i){var r=this,o=r.getTopLevelSettings(t);e.extend(i,{tls:o});var s=r.getPageSectionSettings(t,n);e.extend(i,{pss:s});var c=r.getSettingsId(n),g=n.attr("id"),u=r.getSettingsId(a),l=a.attr("id"),d=r.getBlockSettings(t,r.getBlockTopLevelDomain(a),c,u,g,l);e.extend(i,{pss:s,bs:d}),r.expandJSKeys(i),i.itemDBKey||(i.itemDBKey=d["db-keys"]["db-key"])},copyToConfiguration:function(t,n,a,i){"array"==e.type(n)?a[t]={}:"object"==e.type(n)?(a[t]||(a[t]={}),i?e.extend(!0,a[t],n):e.extend(a[t],n)):a[t]=n},integratePageSection:function(t,n){var a=this;e.extend(a.sitemapping["template-sources"],n.sitemapping["template-sources"]);var i=a.getMemory(t);e.each(n.settings.configuration,function(r,o){i["query-state"].general[r]=i["query-state"].general[r]||{},i["query-state"].domain[r]=i["query-state"].domain[r]||{},i.dataset[r]=i.dataset[r]||{},i.feedback.pagesection[r]=i.feedback.pagesection[r]||{},i.feedback.block[r]=i.feedback.block[r]||{},i.runtimesettings["query-url"][r]=i.runtimesettings["query-url"][r]||{},i.runtimesettings["query-multidomain-urls"][r]=i.runtimesettings["query-multidomain-urls"][r]||{},i.runtimesettings.configuration[r]=i.runtimesettings.configuration[r]||{},i.runtimesettings["js-settings"][r]=i.runtimesettings["js-settings"][r]||{},i.settings["js-settings"][r]=i.settings["js-settings"][r]||{},i.settings.jsmethods.pagesection[r]=i.settings.jsmethods.pagesection[r]||{},i.settings.jsmethods.block[r]=i.settings.jsmethods.block[r]||{},i.settings["templates-cbs"][r]=i.settings["templates-cbs"][r]||{},i.settings["templates-paths"][r]=i.settings["templates-paths"][r]||{},i.settings["db-keys"][r]=i.settings["db-keys"][r]||{},i.settings.configuration[r]=i.settings.configuration[r]||{},e.extend(i["query-state"].general[r],n["query-state"].general[r]),e.extend(i["query-state"].domain[r],n["query-state"].domain[r]),e.extend(i.dataset[r],n.dataset[r]),e.extend(i.feedback.pagesection[r],n.feedback.pagesection[r]),e.extend(i.feedback.block[r],n.feedback.block[r]),e.extend(i.runtimesettings["query-url"][r],n.runtimesettings["query-url"][r]),e.extend(i.runtimesettings["query-multidomain-urls"][r],n.runtimesettings["query-multidomain-urls"][r]),e.extend(i.runtimesettings.configuration[r],n.runtimesettings.configuration[r]),e.extend(i.runtimesettings["js-settings"][r],n.runtimesettings["js-settings"][r]),e.extend(i.settings["js-settings"][r],n.settings["js-settings"][r]),e.extend(i.settings.jsmethods.pagesection[r],n.settings.jsmethods.pagesection[r]),e.extend(i.settings.jsmethods.block[r],n.settings.jsmethods.block[r]),e.extend(i.settings["templates-cbs"][r],n.settings["templates-cbs"][r]),e.extend(i.settings["templates-paths"][r],n.settings["templates-paths"][r]),e.extend(i.settings["db-keys"][r],n.settings["db-keys"][r]);var s=i.settings.configuration[r];e.each(o,function(e,t){a.copyToConfiguration(e,t,s,!1)});var c=o[M.JS_FRONTENDID],g=e("#"+c);a.initPageSectionSettings(t,g,s)})},getTopLevelSettings:function(e){var t=this;return{domain:e,"domain-id":getDomainId(e),feedback:t.getTopLevelFeedback(e)}},getPageSectionSettings:function(e,t){var n=this,a=n.getSettingsId(t),i=t.attr("id");return{feedback:n.getPageSectionFeedback(e,t),pssId:a,psId:i}},isMultiDomain:function(e,t,n){var a=this.getRuntimeSettings(e,t,n,"query-multidomain-urls");return a&&a.length>=2},getBlockSettings:function(e,t,n,a,i,r){var o=this,s={"db-keys":o.getDatabaseKeys(e,n,a),dataset:o.getBlockDataset(e,n,a),feedback:o.getBlockFeedback(e,n,a),bsId:a,bId:r,"toplevel-domain":t,"is-multidomain":o.isMultiDomain(t,n,a)};return o.expandBlockSettingsJSKeys(s),s},expandBlockSettingsJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&e["db-keys"]&&e["db-keys"][M.JS_SUBCOMPONENTS]&&(e["db-keys"].subcomponents=e["db-keys"][M.JS_SUBCOMPONENTS])},getBlockDataset:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).dataset[i][r]},getBlockFeedback:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).feedback.block[i][r]},getPageSectionFeedback:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).feedback.pagesection[a]},getTopLevelFeedback:function(e){return this.getMemory(e).feedback.toplevel},getSettings:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n);return i.getMemory(e).settings[a][r][o]},getRuntimeSettings:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n);return i.getMemory(e).runtimesettings[a][r][o]},getQueryUrl:function(e,t){return this.getRuntimeMemoryPage(e,t)["query-url"]},getQueryMultiDomainUrls:function(e,t){return this.getRuntimeMemoryPage(e,t)["query-multidomain-urls"]},getRuntimeConfiguration:function(e,t,n,a){var i=this;a=a||n;var r=i.getTemplateOrObjectSettingsId(a);return i.getRuntimeSettings(e,t,n,"configuration")[r]||{}},getDatabaseKeys:function(e,t,n){return this.getSettings(e,t,n,"db-keys")},getBlockFilteringUrl:function(e,t,n,a){var i=this,r=i.getQueryUrl(t,n);!r&&a&&(r=i.getTopLevelFeedback(e)[M.URLPARAM_URL]);var o=i.getBlockPostData(e,t,n,{paramsGroup:"visible"});return o&&(r.indexOf("?")>-1?r+="&":r+="?",r+=o),r},click:function(t,n,a){n=n||"",a=a||e(document.body),e('<a href="'+t+'" target="'+n+'" class="hidden"></a>').appendTo(a).trigger("click")},getAPIUrl:function(t){return e.each(M.API_URLPARAMS,function(e,n){t=add_query_arg(e,n,t)}),t},getDestroyUrl:function(e){var t=getDomain(e);return t+"/destroy"+e.substr(t.length)},getTemplateOrObjectSettingsId:function(t){return"object"==e.type(t)?t.data("templateid"):t},getPageSectionJsSettings:function(e,t){var n=this;n.getSettingsId(t);return n.getSettings(e,t,t,"js-settings")||{}},getJsSettings:function(t,n,a,i){var r=this;i=i||a;r.getSettingsId(n),r.getSettingsId(a);var o=r.getTemplateOrObjectSettingsId(i),s=r.getSettings(t,n,a,"js-settings"),c=r.getRuntimeSettings(t,n,a,"js-settings"),g={};return s[o]&&e.extend(g,s[o]),c[o]&&e.extend(!0,g,c[o]),g},getPageSectionJsMethods:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).settings.jsmethods.pagesection[a]||{}},getBlockJsMethods:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).settings.jsmethods.block[i][r]||{}},restoreInitialBlockMemory:function(t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n),s=i.getTargetParamsScopeURL(n),c=i.getInitialBlockMemory(s),g=i.getRuntimeMemoryPage(t,n,a)["query-state"];g.general=e.extend(i.getBlockDefaultParams(),c["query-state"].general[r][o]);var u=c.dataset[r][o],l=i.getQueryMultiDomainUrls(t,n);e.each(l,function(t,n){g.domain[t]=e.extend(i.getBlockDefaultMultiDomainParams(),c["query-state"].domain[r][o]);var a=i.getMemory(t);a.runtimesettings.configuration[r][o]=e.extend({},c.runtimesettings.configuration[r][o]),a.feedback.block[r][o]=e.extend({},c.feedback.block[r][o]),u.length?e.extend(a.dataset[r][o],u):a.dataset[r][o]=[]})},getBlockQueryState:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n)["query-state"].general},getBlockMultiDomainQueryState:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n)["query-state"].domain},getBlockDomainQueryState:function(e,t,n,a){return this.getBlockMultiDomainQueryState(t,n,a)[e]||{}},getPageSectionParams:function(e,t){return this.getRuntimeMemoryPage(e,e,t)["query-state"]},getTarget:function(t){var n=t.attr("id"),a=M.URLPARAM_TARGET_MAIN;return e.each(M.FETCHTARGET_SETTINGS,function(e,t){if(t==n)return a=e,-1}),a},targetExists:function(e){return M.FETCHTARGET_SETTINGS[e]},getFetchTargetPageSection:function(t){return t&&"_self"!=t&&M.FETCHTARGET_SETTINGS[t]||(t=M.URLPARAM_TARGET_MAIN),e("#"+M.FETCHTARGET_SETTINGS[t])},getFetchPageSectionSettings:function(e){var t=e.attr("id");return M.FETCHPAGESECTION_SETTINGS[t]||{}},getTemplatesCbs:function(t,n,a,i){var r=this;i=i||"main";var o=r.getSettings(t,n,a,"templates-cbs"),s=o.cbs,c=o.actions;if(e.isArray(c)&&!c.length)return s;var g=[];return e.each(s,function(e,t){(!c[t]||c[t].indexOf(i)>-1)&&g.push(t)}),g},getTemplatePath:function(e,t,n,a){return this.getSettings(e,t,n,"templates-paths")[a]},getScriptTemplate:function(e){var t=this.getTemplateSource(e);return Handlebars.templates[t]},getPageSectionGroup:function(e){return e.closest(".pop-pagesection-group").addBack(".pop-pagesection-group")},getPageSection:function(e){return e.closest(".pop-pagesection").addBack(".pop-pagesection")},getPageSectionPage:function(e){var t=this,n=e.closest(".pop-pagesection-page").addBack(".pop-pagesection-page");return n.length?n:t.getPageSection(e)},getBlockId:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n).id},getHtml:function(e,t){var n=this.getScriptTemplate(e);if(void 0===n)return console.error("No template for "+e),"";try{return n(t)}catch(t){console.log("Error in "+e+": "+t.message)}return""},getItemObject:function(t,n,a){var i=this,r={},o={},s=i.getUserDatabase(t),c=i.getDatabase(t);return s[n]&&s[n][a]&&(r=s[n][a]),c[n]&&c[n][a]&&(o=c[n][a]),e.extend({},r,o)},getFrameTarget:function(e){return e.data("frametarget")||M.URLPARAM_TARGET_MAIN},getClickFrameTarget:function(e){var t=this;return e.data("clickframetarget")||t.getFrameTarget(e)},getOriginalLink:function(e){var t=this,n=e.data("interceptedTarget");return n?t.getOriginalLink(n):e}}}(jQuery);
;"use strict";!function(e){window.popTopLevelJSON={objects:{},strings:{},getProperties:function(){var e=this,t={};return e.addProperties(t,e.strings,!0),e.addProperties(t,e.objects,!1),t},addProperties:function(t,i,n){if(!e.isEmptyObject(i))for(var o in i)i.hasOwnProperty(o)&&(t[o]=n?JSON.parse(i[o]):i[o])},init:function(){var t=this;M.RUNTIMEJS&&e(document).on("initTopLevelJson",function(i,n){e.extend(n,t.getProperties())})}}}(jQuery),popTopLevelJSON.init();
;"use strict";!function(a){window.popCustomBootstrap={initDocument:function(){a(document).on("focusin",function(t){a(t.target).closest(".mce-window").length&&t.stopImmediatePropagation()})},pageSectionNewDOMsInitialized:function(a){var t=this,e=a.domain,n=a.pageSection,o=a.newDOMs;t.activateNestedComponents(n,o),t.showComponentInitializeJS(e,n,o),t.triggerTabPaneEvents(o)},onBootstrapEventWindowResize:function(a){var t=a.targets;t.find(".collapse").addBack(".collapse").on("shown.bs.collapse hidden.bs.collapse",windowResize),t.find(".tab-pane").addBack(".tab-pane").on("shown.bs.tabpane",windowResize),t.find(".carousel").addBack(".carousel").on("slid.bs.carousel",windowResize)},isHidden:function(a){var t=a.targets;return!!t.parents(".collapse,.modal").not(".in").length||!!t.parents(".tab-pane").not(".active").length},isActive:function(a){var t=a.targets;return!(t.hasClass("tab-pane")&&!t.hasClass("active"))},activeTabLink:function(t){t.targets.click(function(t){a(this).parent("li").addClass("active").siblings("li").removeClass("active")})},activatePageTab:function(t){var e=this,n=t.pageSection,o=t.targets;o.click(function(){var t=a(this),o=a(t.data("target"));e.clickPageTab(n,o)}),o.each(function(){var t=a(this);t.closest(".pop-pagesection-page").find(".pop-pagetab-btn").not(".pop-inactive").length&&t.trigger("click")})},customQuickView:function(a){var t=a.pageSection,e=t.closest(".modal");t.on("fetched",function(){popBootstrap.showingModal(e)||(popBootstrap.closeModals(),e.modal("show"))}),popManager.getPageSectionGroup(t).on("on.bs.pagesection-group:pagesection-"+t.attr("id")+":closed",function(){e.modal("hide")})},destroyPageOnModalClose:function(t){t.pageSection;t.targets.each(function(){var t=a(this);t.closest(".modal").on("hidden.bs.modal",function(){t.trigger("click")})})},customCloseModals:function(a){a.pageSection.on("destroy",function(){popBootstrap.closeModals()})},showComponentInitializeJS:function(a,t,e){var n=this,o=e.find(".collapse.pop-bscomponent").addBack(".collapse.pop-bscomponent");o.length&&n.initComponentHandlers(a,t,o,"shown.bs.collapse");var i=e.find(".modal.pop-bscomponent").addBack(".modal.pop-bscomponent");i.length&&n.initComponentHandlers(a,t,i,"shown.bs.modal");var s=e.find(".tab-pane.pop-bscomponent").addBack(".tab-pane.pop-bscomponent");s.length&&n.initComponentHandlers(a,t,s,"shown.bs.tabpane");var c=e.find(".carousel.pop-bscomponent").addBack(".carousel.pop-bscomponent");c.length&&n.initComponentHandlers(a,t,c,"slid.bs.carousel",!0)},initComponentHandlers:function(t,e,n,o,i){var s=this;n.on(o,function(n){var o=a(i?n.relatedTarget:this),c=a(o.data("initjs-targets")),r={"post-data":o.data("post-data")};s.recursiveSetBlockData(t,e,c,r)}),n.on(o,function(n){var o=a(i?n.relatedTarget:this),s=a(o.data("initjs-targets")).not("."+M.JS_INITIALIZED);if(s.length){var c={"force-init":!0},r=o.data("intercept-url")||o.data("original-url");r&&(c.url=r),popManager.initBlockBranches(t,e,s,null,c)}}),n.on(o,function(n){var o=a(i?n.relatedTarget:this),c=a(o.data("initjs-targets"));o.data("onetime-refetch")&&s.recursiveOneTimeRefetch(t,e,c),s.triggerBlocksVisible(t,e,c)})},recursiveSetBlockData:function(t,e,n,o){var i=this;n.each(function(){var n=a(this);a.each(o,function(a,t){n.data(a,t)});var s=popManager.getJsSettings(t,e,n)["initjs-blockbranches"];s&&i.recursiveSetBlockData(t,e,a(s.join(", ")),o)})},recursiveOneTimeRefetch:function(t,e,n){var o=this;n.each(function(){var n=a(this);popBlockDataQuery.makeOneTimeRefetch(e,n);var i=popManager.getJsSettings(t,e,n)["initjs-blockbranches"];i&&o.recursiveOneTimeRefetch(t,e,a(i.join(", ")))})},triggerBlocksVisible:function(t,e,n){var o=this;n.each(function(){var n=a(this);n.triggerHandler("visible");var i=popManager.getJsSettings(t,e,n)["initjs-blockbranches"];i&&o.triggerBlocksVisible(t,e,a(i.join(", ")))})},activateNestedComponents:function(t,e){var n=this;e.find("div.tab-pane div.tab-pane").addBack("div.tab-pane div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterTabPanes(a(this))}),e.find("div.tab-pane div.collapse").addBack("div.tab-pane div.collapse").on("shown.bs.collapse",function(){n.activateOuterTabPanes(a(this))}),e.find("div.carousel div.collapse").addBack("div.carousel div.collapse").on("shown.bs.collapse",function(){n.activateOuterCarousel(a(this))}),e.find("div.carousel div.tab-pane").addBack("div.carousel div.tab-pane").on("shown.bs.tabpane",function(){n.activateOuterCarousel(a(this))})},activateOuterTabPanes:function(t){var e=t.parents(".tab-pane").not(".active");e.length&&a('a[href="#'+e.attr("id")+'"]').tab("show")},activateOuterCarousel:function(a){var t=a.closest(".carousel");popBootstrapCarousel.showElement(t,a)},triggerTabPaneEvents:function(t){var e=this;t.find('a[data-toggle="tab"]').addBack('a[data-toggle="tab"]').on("show.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"show.bs.tabpane")}).on("shown.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"shown.bs.tabpane")}).on("hide.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"hide.bs.tabpane")}).on("hidden.bs.tab",function(t){e.triggerTabPaneEvent(a(this),t,"hidden.bs.tabpane")})},triggerTabPaneEvent:function(t,e,n){var o=a(a(e.target).attr("href"));o.data("post-data",t.data("post-data")),o.data("onetime-refetch",t.data("onetime-refetch")),o.data("intercept-url",t.data("intercept-url")),o.data("original-url",t.data("original-url")),o.triggerHandler(n,[e])},activatePageTabs:function(a,t,e){e&&t.filter(".pop-pagesection-page").find(".pop-pagetab-btn").addClass("pop-inactive")},activateSideTabpanes:function(a,t,e){var n=t.filter(".tab-pane");if(n.length){var o=popManager.isFirstLoad(a);e||(o||t.siblings(".tab-pane").removeClass("active"),n.addClass("active")),n.on("shown.bs.tabpane",function(){"automatic"==popPageSectionManager.getOpenMode(a)&&(popPageSectionManager.open(a),popManager.scrollTop(a))}),e||o||popManager.scrollTop(a)}},activateQuickviewTabpanes:function(a,t,e){var n=t.filter(".tab-pane");n.length&&n.addClass("active").siblings(".tab-pane").removeClass("active")},activateModals:function(a,t){var e=t.filter(".modal");e.length&&(popBootstrap.closeModals(),e.modal("show"),e.on("show.bs.modal",function(a){popManager.closeMessageFeedback(e)}),e.on("shown.bs.modal",function(a){windowResize()}))},activateTabPanes:function(t,e,n,o,i){var s=this,c=e.filter(".tab-pane");if(c.length){var r=popManager.isFirstLoad(t);if(!n){if(!r){var p=e.siblings(".tab-pane.active");s.savePosition(t,p),p.removeClass("active")}c.addClass("active")}c.on("show.bs.tabpane",function(){var e=a(this).siblings(".active");e.length&&s.savePosition(t,e)}).on("shown.bs.tabpane",function(){var e=a(this);popPageSectionManager.open(t),s.newPageSectionJS(t,o,i,e)}),n||r||s.newPageSectionJS(t,o,i)}},clickPageTab:function(a,t){a.find(".pop-pagetab-btn").removeClass("active"),t.addClass("active")},getPosition:function(t){var e=popJSLibraryManager.execute("getPosition",{elem:t}),n=0;return a.each(e,function(a,t){if(t)return n=t,-1}),n},savePosition:function(a,t){var e=this;t.data("lastposition",e.getPosition(a)),t.data("theater",popPageSectionManager.isTheater())},newPageSectionJS:function(t,e,n,o){n.each(function(){var t=a(this);popPageSectionManager.close(t,"xs")}),popBootstrap.closeModals();var i;o?(void 0!==o.data("lastposition")&&(popManager.scrollTop(t,o.data("lastposition")),o.data("lastposition",null)),i=o.data("theater")||!1,o.data("theater",null)):popManager.scrollTop(t,0),e&&!i&&popPageSectionManager.theater(!1),i&&popPageSectionManager.theater(!0),windowResize()}}}(jQuery),popJSLibraryManager.register(popCustomBootstrap,["initDocument","pageSectionNewDOMsInitialized","activeTabLink","isHidden","isActive"],!0),popJSLibraryManager.register(popCustomBootstrap,["customQuickView","destroyPageOnModalClose","customCloseModals","activatePageTab","onBootstrapEventWindowResize"]);
;"use strict";!function(e){window.popBootstrap={modal:function(o){o.targets.on("show.bs.modal",function(o){var t=e(this),a=e(o.relatedTarget),n=(a=popManager.getOriginalLink(a)).data("header")||"";t.find(".modal-header .pop-box").html(n)})},closeModals:function(){e(".modal.in").modal("hide")},showingModal:function(e){return e.hasClass("in")},popover:function(e){var o=this,t=e.pageSection,a=e.block,n=e.targets;o.execPopover(t,a,n)},contentPopover:function(e){var o=this,t=e.pageSection,a=e.block,n=e.targets;o.execPopover(t,a,n.find("a[data-popover-target]"))},tooltip:function(e){var o=e.pageSection,t=e.targets;jQuery(document).ready(function(e){popManager.getPageSectionPage(t).one("destroy",function(){t.tooltip("destroy")}),t.each(function(){var t=e(this),a="#"+popManager.getDOMContainer(o,t).attr("id"),n={placement:t.data("tooltip-placement")||"top",title:t.attr("title"),container:a};t.tooltip(n)})})},openParentCollapse:function(e){var o=this,t=e.targets;o.execOpenParentCollapse(t)},alertCloseOnTimeout:function(e){var o=this,t=(e.pageSection,e.targets),a=t.data("closetime")||3e3;t.data("close",!0),t.mouseenter(function(){t.data("close",null),t.addClass("hover")}),t.mouseleave(function(){t.data("close",!0),o.execAlertCloseOnTimeout(t,a),t.removeClass("hover")}),o.execAlertCloseOnTimeout(t,a)},execOpenParentCollapse:function(e){e.closest(".collapse").not(".in").collapse("show")},execPopover:function(e,o,t){jQuery(document).ready(function(a){popManager.getPageSectionPage(o).one("destroy",function(){t.popover("destroy")});var n={animation:!1,html:!0,trigger:"manual focus",placement:"auto",delay:{hide:100},container:"#"+popManager.getDOMContainer(e,o).attr("id")};t.each(function(){var e=a(this),o=a(e.data("popover-target")).first();if(o.length){var t=o.html();t='<span data-block="'+("#"+popManager.getBlock(e).attr("id"))+'">'+t+"</span>";var r=a.extend({},n,{content:t});e.popover(r).on("mouseenter",function(){var e=this;a(this).popover("show"),a(".popover").on("mouseleave",function(){a(e).popover("hide")})}).on("mouseleave",function(){var e=this;setTimeout(function(){a(".popover:hover").length||a(e).popover("hide")},r.delay.hide)})}})})},execAlertCloseOnTimeout:function(e,o){setTimeout(function(){e.data("close")&&e.alert("close")},o)},scrollTop:function(e){var o=e.elem,t=(e.top,e.animate,o.closest(".modal").addBack(".modal"));return!!t.length&&(t.animate({scrollTop:0},"fast"),!0)}}}(jQuery),popJSLibraryManager.register(popBootstrap,["modal","closeModals","popover","contentPopover","tooltip","openParentCollapse","alertCloseOnTimeout","scrollTop"]);
;"use strict";Handlebars.registerHelper("latestCountTargets",function(e,a){var t=[],s=".pop-block."+M.JS_INITIALIZED+" > .blocksection-latestcount > .pop-latestcount",n=e["post-type"],r=e.cats;return r&&r.length&&t.push(s+"."+n+"-"+r.join("."+n+"-")),jQuery.each(e.tags,function(e,a){var n=s+".tag"+a;t.push(n)}),jQuery.each(e.authors,function(e,a){var o=s+".author"+a;r&&r.length&&(o+=".author-"+n+"-"+r.join(".author-"+n+"-")),t.push(o)}),jQuery.each(e.references,function(e,a){var o=s+".single"+a;r&&r.length&&(o+=".single-"+n+"-"+r.join(".single-"+n+"-")),t.push(o)}),new Handlebars.SafeString(t.join(","))}),Handlebars.registerHelper("formatFeedbackMessage",function(e,a){var t=a.hash.tls,s=a.hash.pss,n=a.hash.bs;return e=popFeedbackMessage.formatFeedbackMessage(e,t,s,n),new Handlebars.SafeString(e)});
;"use strict";!function(e){window.popSystem={destroyPage:function(t){var a=t.domain,o=t.pageSection;t.targets.click(function(t){t.preventDefault();var n=e(this),r=e(n.data("target"));popManager.destroyPageSectionPage(a,o,r)})},closePageSection:function(e){var t=e.pageSection;e.targets.click(function(e){e.preventDefault(),popPageSectionManager.close(t)})}}}(jQuery),popJSLibraryManager.register(popSystem,["closePageSection","destroyPage"]);
;"use strict";!function(t){window.popAppShell={strings:{},fetchBrowserURL:function(e){t(document).ready(function(t){var e={skipPushState:!0},r=window.location.href;r.startsWith(M.HOMELOCALE_URL+"/")||(r=M.HOMELOCALE_URL+r.substr(M.HOME_DOMAIN.length)),popManager.fetch(r,e)})}}}(jQuery),popJSLibraryManager.register(popAppShell,["fetchBrowserURL"]);
;"use strict";!function(e){window.popAddEditPost={formCreatePostBlock:function(e){var t=this,a=e.domain,o=e.pageSection,n=e.block;popManager.getSettingsId(o),popManager.getSettingsId(n);n.one("fetched",function(e,i){t.execFormCreatePostBlock(a,o,n,i)})},manageStatus:function(e){var t=this,a=e.pageSection,o=e.block,n=e.targets;t.execManageStatus(n);var i=popManager.getSettingsId(a),r=popManager.getSettingsId(o);o.on("fetched",function(e,a){!0===a.feedback.block[i][r].result&&t.execManageStatus(n)})},execFormCreatePostBlock:function(e,t,a,o){var n=this,i=popManager.getSettingsId(t),r=popManager.getSettingsId(a);!0===o.feedback.block[i][r].result?popEventReactionsUserState.execDestroyPageOnUserLoggedOut(e,a):a.one("fetched",function(o,i){n.execFormCreatePostBlock(e,t,a,i)})},execManageStatus:function(t){t.each(function(){var t=e(this);t.val()==M.POSTSTATUS.PUBLISH?(t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled",!1)):(t.find('option[value="'+M.POSTSTATUS.PUBLISH+'"]').attr("disabled","disabled"),t.find('option[value="'+M.POSTSTATUS.PENDING+'"]').attr("disabled",!1))})}}}(jQuery),popJSLibraryManager.register(popAddEditPost,["formCreatePostBlock","manageStatus"]);
;"use strict";!function(t){window.popEditor={editor:function(i){var e=this,o=i.pageSection,n=i.block,r=i.targets;n.one("rerender",function(t){e.destroy(r)}),popManager.getPageSectionPage(n).one("destroy",function(){e.destroy(r)}),r.each(function(){var i=t(this).find(".pop-editor"),e=i.attr("id");i.closest("form").on("beforeSubmit",function(){tinymce.get(e)&&tinymce.get(e).save()})}),r.filter(".pop-editor-form-clear").each(function(){var i=t(this).find(".pop-editor"),e=i.attr("id");i.closest("form").on("clear",function(){tinymce.get(e)&&tinymce.get(e).setContent("")})}),!POP_CACHED_SETTINGS&&popManager.isFirstLoad(o)||t(document).ready(function(t){r.each(function(){var i=t(this).find(".pop-editor"),e=i.attr("id"),o=tinyMCEPreInit.mceInit[M.TEMPLATE_EDITOR_NAME];i.hasClass("pop-editor-autofocus")&&(o=t.extend({},o,{auto_focus:e})),tinyMCE.init(o),tinymce.execCommand("mceAddEditor",!0,e);var n=t.extend({},tinyMCEPreInit.qtInit[M.TEMPLATE_EDITOR_NAME],{id:e});quicktags(n),window.wpActiveEditor||(window.wpActiveEditor=e),"undefined"!=typeof jQuery?i.closest(".wp-editor-wrap").on("click.wp-editor",function(){this.id&&(window.wpActiveEditor=this.id.slice(3,-5))}):document.getElementById("wp-"+e+"-wrap").onclick=function(){window.wpActiveEditor=this.id.slice(3,-5)}})})},destroy:function(i){i.each(function(){var i=t(this).find(".pop-editor").attr("id");tinymce.execCommand("mceRemoveEditor",!1,i)})}}}(jQuery),popJSLibraryManager.register(popEditor,["editor"]);
;"use strict";function mentions_source(e,n,t){popMentions.source(e,n,t)}function mentions_insert(e){return popMentions.insert(e)}function mentions_render(e){return popMentions.render(e)}!function(e){window.popMentions={previousData:{},documentInitialized:function(n){var t=this;e(document).ready(function(e){t.prefetch()})},prefetch:function(){var n=this;e.each(M.MENTIONS.TYPES,function(e,t){n.fetchData(e,t.baseline)})},fetchData:function(n,t,r){var i=this,a=popManager.getStoredData(t);a?i.processData(n,a,r):e.getJSON(t,function(e){popManager.storeData(t,e,864e5),i.processData(n,e,r)})},processData:function(e,n,t){this.previousData[e]=n,t&&t(n)},source:function(e,n,t){var r=this;if(M.MENTIONS.TYPES[t]){var i;if(i=e?M.MENTIONS.TYPES[t].url.replace(M.MENTIONS.QUERYWILDCARD,e):M.MENTIONS.TYPES[t].baseline){var a={url:i,delimiter:t,query:e};popJSLibraryManager.execute("mentionsSource",a),i=a.url,n(r.previousData[t]||[]),r.fetchData(t,i,n)}}},render:function(e){var n=this.infereDelimiter(e);return'<li><a href="javascript:;"><span>'+popManager.getHtml(M.MENTIONS.TYPES[n].template,e)+"</span></a></li>"},insert:function(e){var n=this.infereDelimiter(e);return"<span>"+n+e[M.MENTIONS.TYPES[n].key]+"</span>&nbsp;"},infereDelimiter:function(n){var t="";return e.each(M.MENTIONS.TYPES,function(e,r){if(void 0!==n[r.key])return t=e,-1}),t}}}(jQuery),popJSLibraryManager.register(popMentions,["documentInitialized"]);
;"use strict";!function(e){window.popFeaturedImage={frame:null,init:function(){var t=this;e(document).ready(function(e){t.frame=wp.media({title:M.LABELS.MEDIA_FEATUREDIMAGE_TITLE,multiple:!1,library:{type:"image"},button:{text:M.LABELS.MEDIA_FEATUREDIMAGE_BTN}})})},documentInitializedIndependent:function(t){var a=this;e(document).ready(function(e){a.frame.on("open",function(){var e=a.getOpenFeaturedImage().find('input[type="hidden"]');if(e.val()){var t=a.frame.state().get("selection"),n=wp.media.attachment(e.val());n.fetch(),t.add(n?[n]:[])}}),a.frame.on("close",function(){var t=e(".pop-featuredimage.open"),n=a.frame.state().get("selection");if(n.length){var i,r,o=t.data("img-size");n.map(function(e){var t=(e=e.toJSON()).sizes[o]||e.sizes.medium||e.sizes.thumbnail;i=e.id,r={src:t.url,width:t.width,height:t.height}});var m=popManager.getBlock(t),p=popManager.getPageSection(m),u=popManager.getBlockTopLevelDomain(m);a.merge(u,p,m,t,i,r)}t.removeClass("open")}),e(document).triggerHandler("initialized.featuredImage",[a.frame])})},featuredImageSet:function(t){var a=this;t.pageSection,t.block;t.targets.click(function(t){t.preventDefault(),e(this).closest(".pop-featuredimage").addClass("open"),a.frame.open()})},featuredImageRemove:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block;t.targets.click(function(t){t.preventDefault();var o=e(this).closest(".pop-featuredimage");a.remove(n,i,r,o)})},merge:function(e,t,a,n,i,r){var o={extendContext:{value:i,img:r}},m=n.data("merge-template");popJSRuntimeManager.setBlockURL(a),popManager.mergeTargetTemplate(e,t,a,m,o),popManager.runJSMethods(e,t,a,m,"full")},remove:function(e,t,a,n){this.merge(e,t,a,n,"","")},getFrame:function(){return this.frame},getOpenFeaturedImage:function(){return e(".pop-featuredimage.open")}}}(jQuery),popJSLibraryManager.register(popFeaturedImage,["documentInitializedIndependent","featuredImageSet","featuredImageRemove"]),popFeaturedImage.init();
;"use strict";!function(a){window.popMediaManagerState={domain:null,documentInitialized:function(){var e=this;a(document.body).on("click.add-media-button",".insert-media",function(n){var t=a(n.currentTarget),i=a("#"+t.data("editor")),o=popManager.getBlock(i);e.domain=popManager.getBlockTopLevelDomain(o)})},getDomain:function(){return this.domain}}}(jQuery),popJSLibraryManager.register(popMediaManagerState,["documentInitialized"]);
;"use strict";!function(e){window.popMediaManager={initialized:{},needsRefresh:{},documentInitializedIndependent:function(){var t=this;e(document).on("uploader:start:settings",function(e,i){t.setUploadSettings(i)}),e(document).on("user:loggedout",function(e){t.needsRefresh={featuredImage:!0,"editor-gallery":!0,"editor-insert":!0}}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var i=wp.media.frame.state();["gallery","insert"].indexOf(i.id)>-1&&(t.initialized["editor-"+i.id]&&t.needsRefresh["editor-"+i.id]&&t.refresh(i),t.initialized["editor-"+i.id]=!0,t.needsRefresh["editor-"+i.id]=!1)}),"undefined"!=typeof popFeaturedImage?t.initFeaturedImage():e(document).on("initialized.featuredImage",function(){t.initFeaturedImage()})})},featuredImageSet:function(e){var t=e.domain;e.targets.click(function(e){popMediaManagerState.domain=t})},initFeaturedImage:function(){var e=this;popFeaturedImage.getFrame().on("open",function(){e.initialized.featuredImage&&e.needsRefresh.featuredImage&&e.refresh(wp.media.frame.state()),e.initialized.featuredImage=!0,e.needsRefresh.featuredImage=!1})},getDomain:function(){return popMediaManagerState.getDomain()},refresh:function(e){e.get("library")._requery(!0)},setUploadSettings:function(e){e.multipart_params.post_id&&delete e.multipart_params.post_id}}}(jQuery),popJSLibraryManager.register(popMediaManager,["documentInitializedIndependent"]),popJSLibraryManager.register(popMediaManager,["featuredImageSet"],!0);
;"use strict";!function(e){window.popMediaManagerCORS={domains:{"editor-gallery":null,"editor-insert":null,featuredImage:null},documentInitializedIndependent:function(){var a=this;e(document).on("wp.ajax:send:options",function(e,t){a.setEditorOptions(t)}),e(document).on("uploader:start:settings",function(e,t){a.setUploadSettings(t)}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var t=popMediaManager.getDomain(),n=wp.media.frame.state();["gallery","insert"].indexOf(n.id)>-1&&(t&&a.domains["editor-"+n.id]&&t!=a.domains["editor-"+n.id]&&(popMediaManager.needsRefresh["editor-"+n.id]=!0),a.domains["editor-"+n.id]=t)}),"undefined"!=typeof popFeaturedImage?a.initFeaturedImage():e(document).on("initialized.featuredImage",function(){a.initFeaturedImage()})})},initFeaturedImage:function(){var e=this;popFeaturedImage.getFrame().on("open",function(){var a=popMediaManager.getDomain();a&&e.domains.featuredImage&&a!=e.domains.featuredImage&&(popMediaManager.needsRefresh.featuredImage=!0),e.domains.featuredImage=a})},setEditorOptions:function(e){var a=popMediaManager.getDomain();if(a&&(a!=M.HOME_DOMAIN&&(e.url=a+M.AJAXURL,e.xhrFields={withCredentials:!0},e.crossDomain=!0),e.data&&e.data.action)){var t={"query-attachments":"media-form","save-attachment-compat":"media-form","save-attachment-order":"media-form","send-attachment-to-editor":"media-send-to-editor","send-link-to-editor":"media-send-to-editor"}[e.data.action];if(t){var n=popManager.getTopLevelFeedback(a)[M.URLPARAM_NONCES][t];e.data._wpnonce&&(e.data._wpnonce=n),e.data.nonce&&(e.data.nonce=n),e.data.query&&e.data.query._wpnonce&&(e.data.query._wpnonce=n),e.data.query&&e.data.query.nonce&&(e.data.query.nonce=n)}}},setUploadSettings:function(e){var a=popMediaManager.getDomain();if(a){e.url=a+M.UPLOADURL;var t={"upload-attachment":"media-form"}[e.multipart_params.action];t&&(e.multipart_params._wpnonce=popManager.getTopLevelFeedback(a)[M.URLPARAM_NONCES][t])}}}}(jQuery),popJSLibraryManager.register(popMediaManagerCORS,["documentInitializedIndependent"],!0);
;"use strict";!function(e){window.popTabs={documentInitialized:function(a){e(document).ready(function(e){var a=!1,t=popManager.getTabsCurrentURL(),n=popManager.getScreenOpenTabs();if(e.each(n,function(e,n){if(n.length>1||e!=M.URLPARAM_TARGET_MAIN&&n.length||e==M.URLPARAM_TARGET_MAIN&&n[0]!=t)return a=!0,-1}),a)if(e.cookie("opentabs"))"true"==e.cookie("opentabs")?popManager.openTabs():popManager.keepScreenOpenTab(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);else{var r=e("#"+M.IDS_APPSTATUS),o="popTabs.keepScreenOpenTab('{0}', '{1}')".format(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);r.prepend(M.TABS_REOPENMSG.format("popTabs.openTabs()",o))}})},onDestroyPageSwitchTab:function(a){var t=this;a.pageSection;a.targets.each(function(){var a=e(this);popManager.getPageSectionPage(a).on("destroy",function(){t.switchTab(a)})})},addOpenTab:function(a){var t=this,n=a.pageSection,r=a.targets;!1!==a.addOpenTab&&r.each(function(){var a=e(this),r=t.getDestroyPageTabParams(n,a);popManager.addOpenTab(r.url,r.target)})},closePageTab:function(a){var t=this,n=a.pageSection;a.targets.click(function(a){a.preventDefault();var r=e(this),o=t.getDestroyPageTabParams(n,r);popManager.triggerDestroyTarget(o.url,o.target)})},getDestroyPageTabParams:function(e,a){return{url:a.data("url")||popManager.getTargetParamsScopeURL(popManager.getBlock(a)),target:a.attr("target")||popManager.getFrameTarget(e)}},switchTab:function(e){if(e.prev("a.pop-pagetab-btn").hasClass("active")){var a=popManager.getPageSectionPage(e),t=a.nextAll(".pop-pagesection-page").first();t.length||(t=a.prevAll(".pop-pagesection-page").first()),t.length&&t.find("a.pop-pagetab-btn").trigger("click")}},saveCookie:function(a){e("#"+M.IDS_TABS_REMEMBERCHECKBOX).prop("checked")&&e.cookie("opentabs",a,{expires:365,path:"/"})},openTabs:function(){this.saveCookie("true"),popManager.openTabs()},keepScreenOpenTab:function(e,a){this.saveCookie("false"),popManager.keepScreenOpenTab(e,a)}}}(jQuery),M.OPENTABS&&popJSLibraryManager.register(popTabs,["documentInitialized","onDestroyPageSwitchTab","addOpenTab","closePageTab"]);
;"use strict";!function(e){window.popUserAccount={sessions:{},initDocument:function(e){var n=this,s=e.domain;n.initialLogin(s)},initDomain:function(e){var n=this,s=e.domain;n.sessions[s]={initialuserdata:!0,loggedin:!1,id:null,name:"",avatar:"",url:"",roles:[],userattributes:[]}},documentInitialized:function(e){var n=this;e.domain;n.checkpointInvalidateBlocks()},documentLoaded:function(){this.fetchAllDomainsLoggedInUserData()},pageSectionInitialized:function(e){var n=this;e.pageSection.on("fetched",function(e,s,i,t){n.feedbackLoginOut(t,!1)})},blockInitialized:function(e){var n=this;e.pageSection;e.block.on("fetched",function(e,s,i,t){n.feedbackLoginOut(t,!1)})},loadAvatar:function(e){var n=this,s=e.domain;e.targets.attr("src",n.sessions[s].avatar)},initialLogin:function(e){var n=this,s=n.feedbackLoginOut(e,!0);n.sessions[e].initialuserdata=!s},fetchAllDomainsLoggedInUserData:function(n){var s=this;e.each(M.USERLOGGEDIN_DATA_PAGEURLS,function(e,i){var t=getDomain(i);s.sessions[t].initialuserdata&&s.fetchLoggedInUserData(i,n)})},fetchLoggedInUserData:function(e,n){(n=n||{})["loadingmsg-target"]=M.USERLOGGEDIN_LOADINGMSG_TARGET,n.silentDocument=!0,popManager.fetch(e,n)},isLoggedInAnyDomain:function(){var n=this,s=!1;return e.each(n.sessions,function(e,n){if(n.loggedin)return s=!0,-1}),s},isLoggedIn:function(e){return this.sessions[e].loggedin},updateUserInfo:function(n,s,i,t,o,a,r){var d=this,u={},c=getDomainId(n);d.sessions[n].name!=i&&(d.sessions[n].name=i,e(".pop-user-name."+c).text(i),u.name=i),d.sessions[n].id==s&&d.sessions[n].avatar==t||(d.sessions[n].id=s,d.sessions[n].avatar=t,e(".pop-user-avatar."+c).attr("src",t),u.avatar=t),d.sessions[n].url!=o&&(d.sessions[n].url=o,e(".pop-user-url."+c).attr("href",o),u.url=o),0===e(d.sessions[n].roles).not(a).length&&0===e(a).not(d.sessions[n].roles).length||(d.sessions[n].roles=a,e.each(M.ROLES,function(n,s){e(document.body).removeClass(s+"-"+c)}),e.each(d.sessions[n].roles,function(n,s){e(document.body).addClass(s+"-"+c)}),u.roles=a),0===e(d.sessions[n].userattributes).not(r).length&&0===e(r).not(d.sessions[n].userattributes).length||(d.sessions[n].userattributes=r,e.each(M.USERATTRIBUTES,function(n,s){e(document.body).removeClass(s+"-"+c)}),e.each(d.sessions[n].userattributes,function(n,s){e(document.body).addClass(s+"-"+c)}),u.userattributes=r),e.isEmptyObject(u)||(u.id=s,e(document).triggerHandler("user:updated",[u,n]),e(document).triggerHandler("user:updated:"+n,[u]))},loginout:function(n,s,i,t,o,a,r,d,u){var c=this;if(c.updateUserInfo(s,t,o,a,r,d,u),c.sessions[s].loggedin!=i){c.sessions[s].loggedin=i;var g=[];s==M.HOME_DOMAIN&&g.push("loggedin-localdomain");var o,l=e(document.body),f=getDomainId(s);c.sessions[s].loggedin?(g.push("loggedin-anydomain"),l.data("loggedinuser-id-"+f,t).addClass("loggedin-"+f+" user-"+t+"-"+f),e.each(g,function(e,n){l.addClass(n)}),o="user:loggedin"):(c.isLoggedInAnyDomain()||g.push("loggedin-anydomain"),l.removeClass("loggedin-"+f).removeClass("user-"+l.data("loggedinuser-id-"+f)+"-"+f).data("loggedinuser-id-"+f,""),e.each(g,function(e,n){l.removeClass(n)}),o="user:loggedout"),"initialfeedback"!=n&&c.closeCheckpointMessages(s),e(document).triggerHandler(o,[n,s]),e(document).triggerHandler(o+":"+s,[n]),e(document).triggerHandler("user:loggedinout",[n,s]),e(document).triggerHandler("user:loggedinout:"+s,[n])}},feedbackLoginOut:function(e,n){var s=this,i=popManager.getTopLevelFeedback(e)[M.DATALOAD_USER];if(void 0!==i){var t,o,a,r,d,u,c;t=i[M.DATALOAD_USER_LOGGEDIN],o=i[M.DATALOAD_USER_ID],a=i[M.DATALOAD_USER_NAME],r=i[M.DATALOAD_USER_AVATAR],d=i[M.DATALOAD_USER_URL],u=i[M.DATALOAD_USER_ROLES],c=i[M.DATALOAD_USER_ATTRIBUTES];var g="feedback";return n?g="initialfeedback":s.sessions[e].initialuserdata&&(g="initialuserdata",s.sessions[e].initialuserdata=!1),s.loginout(g,e,t,o,a,r,d,u,c),!0}return!1},checkpointInvalidateBlocks:function(){var n=this;e(document).on("user:loggedin",function(e,s,i){"initialfeedback"!=s&&"initialuserdata"!=s&&n.closeCheckpointMessages(i)})},closeCheckpointMessages:function(e){jQuery(document).ready(function(n){n(".alert.in.pop-messagefeedback.checkpoint."+getDomainId(e)).removeClass("fade").alert("close")})},getLoggedInUserId:function(e){var n=this;return!(!n.sessions[e]||!n.sessions[e].loggedin)&&n.sessions[e].id}}}(jQuery),popJSLibraryManager.register(popUserAccount,["initDocument","initDomain","documentInitialized","documentLoaded","pageSectionInitialized","blockInitialized","loadAvatar"]);
;"use strict";jQuery,window.popWaypoints={reEnable:function(e,t,n){var o=this;t.one("beforeReload",function(){t.one("fetchCompleted",function(){popManager.stopFetchingBlock(e,t)?o.reEnable(e,t,n):n.enable()})})},getOptions:function(e,t){var n={},o=e.filter(".pop-waypoints-context");return o.length?n.context=o:(o=t.closest(".pop-waypoints-context")).length&&(n.context=o),n},getOffset:function(e){return popManager.getPageSection(e).offset().top},destroy:function(e,t,n){popManager.getPageSectionPage(t).one("destroy",function(){n.destroy()})}};
;"use strict";jQuery,window.popWaypointsFetchMore={waypointsFetchMore:function(e){var t=e.pageSection,n=e.block,o=e.targets;jQuery(document).ready(function(e){var a=[],i=popManager.isContentLoaded(t,n);o.each(function(){var o=e(this),p=popWaypoints.getOptions(t,o),r=new Waypoint({element:o,handler:function(e){var t=this.element;if("down"==e){if(popManager.isHidden(t))return;t.trigger("click")}},context:p.context,enabled:i,offset:"bottom-in-view"});popWaypoints.destroy(t,n,r),a.push(r)}),n.on("fetchCompleted",function(n){var o=e(this);popManager.stopFetchingBlock(t,o)?e.each(a,function(e,n){n.enabled&&(n.disable(),popWaypoints.reEnable(t,o,n))}):e.each(a,function(e,t){t.enabled||t.enable(),t.context.refresh()})})})}},popJSLibraryManager.register(popWaypointsFetchMore,["waypointsFetchMore"]);
;"use strict";jQuery,window.popWaypointsHistoryState={waypointsHistoryStateNew:function(t){var e=t.pageSection,n=t.block,o=t.targets;jQuery(document).ready(function(t){o.each(function(){var o=t(this),a=popWaypoints.getOptions(e,o),i=new Waypoint({element:o,handler:function(e){var n=this.element;popManager.isHidden(n)||"up"==e&&popManager.historyReplaceState(t(this))},context:a.context,offset:"bottom-in-view"}),p=new Waypoint({element:o,handler:function(e){var n=this.element;popManager.isHidden(n)||"down"==e&&popManager.historyReplaceState(t(this))},context:a.context});popWaypoints.destroy(e,n,i),popWaypoints.destroy(e,n,p)})})},waypointsHistoryStateOriginal:function(t){var e=t.pageSection,n=t.block,o=t.targets;jQuery(document).ready(function(t){o.each(function(){var o=t(this),a=popWaypoints.getOptions(e,o),i=new Waypoint({element:o,handler:function(t){var e=this.element;popManager.isHidden(e)||"up"==t&&popManager.historyReplaceState(e)},context:a.context});popWaypoints.destroy(e,n,i)})})}},popJSLibraryManager.register(popWaypointsHistoryState,["waypointsHistoryStateOriginal","waypointsHistoryStateNew"]);
;"use strict";jQuery,window.popWaypointsTheater={waypointsTheater:function(e){var t=e.pageSection,n=e.block,o=e.targets;jQuery(document).ready(function(e){o.each(function(){var o=e(this),a=popWaypoints.getOptions(t,o),p=new Waypoint({element:o,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?popPageSectionManager.theater(!0):"up"==e&&popPageSectionManager.theater(!1))},context:a.context,offset:a.context?0:function(){return popWaypoints.getOffset(this.element)}});popWaypoints.destroy(t,n,p)})})}},popJSLibraryManager.register(popWaypointsTheater,["waypointsTheater"]);
;"use strict";jQuery,window.popWaypointsToggleClass={waypointsToggleClass:function(t){var e=t.pageSection,n=t.block,o=t.targets;jQuery(document).ready(function(t){o.each(function(){var o=t(this),a=t(o.data("target")),s=o.data("class");if(a.length&&s){var i=popWaypoints.getOptions(e,o),p=new Waypoint({element:o,handler:function(t){var e=this.element;popManager.isHidden(e)||("down"==t?a.addClass(s):"up"==t&&a.removeClass(s))},context:i.context,offset:i.context?0:function(){return popWaypoints.getOffset(this.element)}});popWaypoints.destroy(e,n,p)}})})}},popJSLibraryManager.register(popWaypointsToggleClass,["waypointsToggleClass"]);
;"use strict";jQuery,window.popWaypointsToggleCollapse={waypointsToggleCollapse:function(e){var o=this,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),t=e(a.data("collapse-target"));if(t.length){var p=popManager.getBlock(t),n=popManager.getBlock(p);o.execWaypointsToggleCollapse(n,p,t,a)}})})},execWaypointsToggleCollapse:function(e,o,a,t){var p=popWaypoints.getOptions(e,a),n=new Waypoint({element:a,handler:function(e){var o=this.element;popManager.isHidden(o)||("down"==e?t.collapse("show"):"up"==e&&t.collapse("hide"))},context:p.context});popWaypoints.destroy(e,o,n)}},popJSLibraryManager.register(popWaypointsToggleCollapse,["waypointsToggleCollapse"]);
;"use strict";!function(i){window.popWindow={windowSize:function(e){var n=this;e.pageSection;e.targets.click(function(e){e.preventDefault();var a=i(this),m=i(a.data("target"));if(m.length){var s=a.data("toggle");"window-fullsize"==s?n.fullsize(m):"window-maximize"==s?n.maximize(m):"window-minimize"==s&&n.minimize(m)}})},getSize:function(i){return i.hasClass("fullsize")?"fullsize":i.hasClass("maximized")?"maximized":i.hasClass("minimized")?"minimized":null},fullsize:function(i){i.removeClass("maximized minimized").addClass("fullsize"),i.triggerHandler("fullsize.bs.window")},maximize:function(i){i.removeClass("fullsize minimized").addClass("maximized"),i.triggerHandler("maximized.bs.window")},minimize:function(i){i.removeClass("fullsize maximized").addClass("minimized"),i.triggerHandler("minimized.bs.window")}}}(jQuery),popJSLibraryManager.register(popWindow,["windowSize"]);
;"use strict";!function(t){window.popMultiselect={multiselect:function(e){e.pageSection;var n=e.block,l=e.targets;popManager.getPageSectionPage(n).one("destroy",function(){l.multiselect("destroy")});var s={buttonClass:"btn btn-default",buttonContainer:'<div class="btn-group multiselect-btn-group" />',enableHTML:!0,nonSelectedText:M.MULTISELECT_NONSELECTEDTEXT,nSelectedText:M.MULTISELECT_NSELECTEDTEXT,allSelectedText:M.MULTISELECT_ALLSELECTEDTEXT};l.each(function(){var e=t(this),n=t.extend({},s);e.attr("title")&&(n.nonSelectedText=e.attr("title")),e.hasClass("input-sm")&&(n.buttonClass+=" btn-sm"),e.hasClass("input-lg")&&(n.buttonClass+=" btn-lg"),e.multiselect(n)})}}}(jQuery),popJSLibraryManager.register(popMultiselect,["multiselect"]);
;"use strict";jQuery,window.popDynamicMaxHeight={dynamicMaxHeight:function(i){i.targets.dynamicMaxHeight()}},popJSLibraryManager.register(popDynamicMaxHeight,["dynamicMaxHeight"]);
;"use strict";!function(a){window.popDateRange={dateRange:function(e){var t=this,s=e.pageSection,n=(e.block,e.targets),r=M.DATERANGE_FORMAT||"DD/MM/YYYY",l={autoUpdateInput:!1,autoApply:!0,linkedCalendars:!0,showWeekNumbers:!1,timePicker:!1,buttonClasses:["btn"],applyClass:"btn-success",cancelClass:"btn-warning",format:r,separator:M.DATERANGE_SEPARATOR,locale:{applyLabel:M.DATERANGE_APPLY,cancelLabel:M.DATERANGE_CANCEL,fromLabel:M.DATERANGE_FROM,toLabel:M.DATERANGE_TO,customRangeLabel:M.DATERANGE_CUSTOMRANGE,daysOfWeek:M.DATERANGE_DAYSOFWEEK,monthNames:M.DATERANGE_MONTHNAMES,firstDay:1}},o={maxDate:moment().add(1,"days")},i={minDate:moment().subtract(1,"days")},m={opens:"right"},c={opens:"left"};n.each(function(){var e=a(this),n=e.hasClass("opens-left")?c:m,A={parentEl:"#"+popManager.getDOMContainer(s,e).attr("id")},p=a.extend({},l,n,A);if(e.hasClass("daterange-future")&&!e.hasClass("daterange-past")?a.extend(p,i):e.hasClass("daterange-past")&&!e.hasClass("daterange-future")&&a.extend(p,o),e.hasClass("timepicker")){var E=M.DATERANGE_TIMEFORMAT||"h:mm A";p.locale.format=r+" "+E;var f={autoApply:!1,timePicker:!0,timePicker24Hour:"h:mm A"!=E,timePickerIncrement:15};a.extend(p,f)}e.on("apply.daterangepicker",function(e,t){a(this).val(t.startDate.format(t.locale.format)+" - "+t.endDate.format(t.locale.format))}),e.daterangepicker(p,t.callback)})},callback:function(a,e){var t=this.element;t.siblings(".from").val(a.format("YYYY-MM-DD")),t.siblings(".to").val(e.format("YYYY-MM-DD")),t.siblings(".fromtime").length&&(t.siblings(".fromtime").val(a.format("HH:mm")),t.siblings(".totime").val(e.format("HH:mm")))}}}(jQuery),popJSLibraryManager.register(popDateRange,["dateRange"]);
;"use strict";!function(e){window.popTypeahead={selectTypeahead:function(e,t,a,n,r){var i=n.find('input[type="text"].tt-input');popTypeaheadTriggerSelect.triggerSelect(e,t,a,n,r),i.typeahead("val","")},typeahead:function(t,a,n,r){var i=this;popManager.getPageSectionPage(n).one("destroy",function(){i.destroy(r)}),n.one("rerender",function(e){i.destroy(r)}),r.each(function(){var r=e(this),i=r.find('input[type="text"]'),o=popManager.getJsSettings(t,a,n,r),p=[];e.each(o["dataset-components"],function(e,r){var i=popManager.getJsSettings(t,a,n,r);p.push(i.dataset)}),e.each(p,function(e,t){var a=t.layout;t.template=popManager.getScriptTemplate(a);var n={};t.prefetch&&(n.url=t.prefetch,popJSLibraryManager.execute("typeaheadPrefetchURL",n),t.prefetch=n.url),t.remote&&(n.url=t.remote,popJSLibraryManager.execute("typeaheadRemoteURL",n),t.remote=n.url)});var h=[],c=[];e.each(p,function(t,a){var n=a.limit;p.length>1&&n>3&&(n=3);var r={datumTokenizer:function(t){var n=[];return e.each(a.tokenizerKeys,function(e,a){n=n.concat(Bloodhound.tokenizers.whitespace(t[a]))}),n},queryTokenizer:Bloodhound.tokenizers.whitespace};a.local&&(r.local=a.local),a.prefetch&&(r.prefetch={url:a.prefetch,thumbprint:a[M.KEYS_THUMBPRINT]}),a.remote&&(r.remote={url:a.remote,wildcard:M.JSPLACEHOLDER_QUERY});var i=new Bloodhound(r);h.push(i);var o;o=a.staticSuggestions?function(t,n){var r=[];e.each(a.staticSuggestions,function(a,n){var i={};e.each(n,function(e,a){"string"==typeof a&&(a=a.replace(M.JSPLACEHOLDER_QUERY,t)),i[e]=a}),r.push(i)}),n(r)}:i.ttAdapter(),c.push({source:o,name:a.name,display:a.valueKey,limit:n,templates:{suggestion:a.template,header:a.header,pending:a.pending,notFound:a.notFound}})}),e.each(h,function(e,t){t.initialize()}),1==c.length?i.typeahead({highlight:!0},c[0]):2==c.length?i.typeahead({highlight:!0},c[0],c[1]):3==c.length?i.typeahead({highlight:!0},c[0],c[1],c[2]):4==c.length&&i.typeahead({highlight:!0},c[0],c[1],c[2],c[3])})},destroy:function(e){e.find('input[type="text"].tt-input').typeahead("destroy")}}}(jQuery);
;"use strict";!function(e){window.popTypeaheadSearch={typeaheadSearchBtn:function(a){var t=this,p=a.pageSection,c=a.block;a.targets.click(function(){var a=e(this).closest(".pop-typeahead");t.executeTypeaheadSearch(p,c,a)})},typeaheadSearchInput:function(a){var t=this,p=a.pageSection,c=a.block;a.targets.keypress(function(a){if(13==event.which){event.preventDefault();var n=e(this).closest(".pop-typeahead");n.find('input[type="text"].tt-input').typeahead("close"),t.executeTypeaheadSearch(p,c,n)}})},executeTypeaheadSearch:function(e,a,t){var p=t.find('input[type="text"].tt-input'),c=popManager.getQueryUrl(e,a);p.typeahead("val")&&(c=c.replace(M.JSPLACEHOLDER_QUERY,p.typeahead("val")),popManager.click(c,"",t))}}}(jQuery),popJSLibraryManager.register(popTypeaheadSearch,["typeaheadSearchBtn","typeaheadSearchInput"]);
;"use strict";!function(e){window.popTypeaheadFetchLink={fetchlinkTypeahead:function(a){var p=a.domain,t=a.pageSection,i=a.block,n=a.targets;popTypeahead.typeahead(p,t,i,n),n.each(function(){e(this).bind("typeahead:selected",function(a,p,t){var i=e(this).closest(".pop-typeahead");popManager.click(p.url,"",i)})})}}}(jQuery),popJSLibraryManager.register(popTypeaheadFetchLink,["fetchlinkTypeahead"]);
;"use strict";!function(e){window.popTypeaheadSelectable={fillTypeahead:function(a){var t=a.domain,p=a.pageSection,l=a.block;a.targets.each(function(){var a=e(this),o=a.data("urlparam");if(o){var c=popManager.getBlockTopLevelURL(l),d=getParam(o,c);if(d){var i=a.data("database-key");e.each(d,function(e,o){var c=popManager.getItemObject(t,i,o);popTypeahead.selectTypeahead(t,p,l,a,c)}),popBootstrap.execOpenParentCollapse(a)}}})},selectDatum:function(a){var t=a.domain,p=a.pageSection,l=a.block;a.targets.click(function(a){a.preventDefault();var o=e(this),c=e(o.data("target")),d=o.data("objectid"),i=o.data("db-key"),n=popManager.getItemObject(t,i,d);popTypeahead.selectTypeahead(t,p,l,c,n)})},selectableTypeahead:function(a){var t=a.domain,p=a.pageSection,l=a.block,o=a.targets;popTypeahead.typeahead(t,p,l,o),o.each(function(){var a=e(this);popTypeaheadValidate.validateMaxSelected(p,l,a),a.bind("typeahead:selected",function(a,o,c){var d=e(this);popTypeahead.selectTypeahead(t,p,l,d,o)})})},selectableTypeaheadTrigger:function(a){a.pageSection,a.block;a.targets.on("close.bs.alert",function(){var a=e(this),t=a.closest(".pop-typeahead"),p=popTypeaheadValidate.getElementsToDisable(t);p.attr("disabled",!1),p.removeClass("disabled");var l=a.children('input[type="hidden"]').val();t.triggerHandler("close",[a,l])})}}}(jQuery),popJSLibraryManager.register(popTypeaheadSelectable,["fillTypeahead","selectableTypeahead","selectDatum","selectableTypeaheadTrigger"]);
;"use strict";!function(e){window.popTypeaheadTriggerSelect={triggerSelect:function(t,a,n,p,i){if(i&&i.id&&0==p.find('input[type="hidden"][value="'+i.id+'"]').length){var d=popManager.getJsSettings(t,a,n,p),o=d["trigger-layout"],r=(popManager.getSettingsId(a),popManager.getSettingsId(n),{extendContext:e.extend({itemObject:i},d["datum-context"])});popJSRuntimeManager.setBlockURL(n);var g=popManager.getTemplateHtml(t,a,n,o,r);popManager.mergeHtml(g,p.find(".pop-box")),popManager.runJSMethods(t,a,n,o,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(t,a,n,o),popTypeaheadValidate.validateMaxSelected(a,n,p),p.triggerHandler("selected",[i])}},removeSelected:function(e,t){e.find('input[type="hidden"][value="'+t+'"]').closest(".alert").alert("close")}}}(jQuery);
;"use strict";jQuery,window.popTypeaheadValidate={validateMaxSelected:function(e,t,a){var d=this;if(a.data("max-selected")&&a.find('input[type="hidden"]').length==a.data("max-selected")){var i=d.getElementsToDisable(a);i.attr("disabled","disabled"),i.addClass("disabled")}},getElementsToDisable:function(e){return e.children("div.pop-operation").find("a, button, input")}};
;"use strict";jQuery,window.popTypeaheadStorage={removeLocalStorageItem:function(e){var r=e.path,a=e.key;e.result=e.result||a.startsWith("__"+r)}},popJSLibraryManager.register(popTypeaheadStorage,["removeLocalStorageItem"]);
;jQuery,popGA={documentInitialized:function(){var t=t||[];t.push(["_setAccount",M.GOOGLEANALYTICS]),t.push(["_trackPageview"]),function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src=("https:"==document.location.protocol?"https://ssl":"http://www")+".google-analytics.com/ga.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()},replaceState:function(t){_gaq.push(["_trackPageview"])}},popJSLibraryManager.register(popGA,["documentInitialized","replaceState"]);
;"use strict";jQuery,window.popPerfectScrollbar={scrollbarHorizontal:function(r){r.pageSection;var e=r.targets;jQuery(document).ready(function(r){e.perfectScrollbar({suppressScrollY:!0})})},scrollbarVertical:function(r){r.pageSection;var e=r.targets;jQuery(document).ready(function(r){e.perfectScrollbar({suppressScrollX:!0})})},getPosition:function(r){var e=r.elem.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(e.length){var o=e.children(".perfect-scrollbar-offsetreference");if(o.length)return-1*o.position().top}return 0},doScroll:function(r,e,o){o?r.animate({scrollTop:e}):r.scrollTop(e),r.perfectScrollbar("update")},scrollToElem:function(r){var e=this,o=r.elem,l=r.position,t=r.animate,c=o.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");if(c.length){var a=0;if(l){var n=c.children(".perfect-scrollbar-offsetreference");n.length||(n=o),a=l.offset().top-n.offset().top}return e.doScroll(c,a,t),!0}return!1},scrollTop:function(r){var e=this,o=r.elem,l=r.top,t=r.animate;l=l||0;var c=o.closest(".perfect-scrollbar").addBack(".perfect-scrollbar");return!!c.length&&(e.doScroll(c,l,t),!0)}},popJSLibraryManager.register(popPerfectScrollbar,["scrollbarHorizontal","scrollbarVertical","getPosition","scrollToElem","scrollTop"]);
;"use strict";jQuery,window.popExpand={expandJSKeys:function(e){var n=e.context;n[M.JS_FONTAWESOME]&&(n.fontawesome=n[M.JS_FONTAWESOME]),n[M.JS_DESCRIPTION]&&(n.description=n[M.JS_DESCRIPTION])}},popJSLibraryManager.register(popExpand,["expandJSKeys"]);
;"use strict";!function(e){window.popFunctions={beep:function(e){beep()},showmore:function(t){var a=t.targets;a.find(".pop-showmore-more").click(function(t){t.preventDefault();var a=e(this).closest(".pop-content");a.find(".pop-showmore-more").addClass("hidden"),a.find(".pop-showmore-less").removeClass("hidden"),a.find(".pop-showmore-more-full").removeClass("hidden")}),a.find(".pop-showmore-less").click(function(t){t.preventDefault();var a=e(this).closest(".pop-content");a.find(".pop-showmore-less").addClass("hidden"),a.find(".pop-showmore-more").removeClass("hidden"),a.find(".pop-showmore-more-full").addClass("hidden")})},hideEmpty:function(e){e.targets.closest(".pop-hide-empty").addClass("hidden")},switchTargetClass:function(t){t.targets.click(function(t){var a=e(this);a.is('a[href="#"]')&&t.preventDefault();var o=e(a.data("target"))||e(document.body),n=a.data("mode")||"add",r=a.data("class");"add"==n?o.addClass(r):"remove"==n?o.removeClass(r):"toggle"==n&&o.toggleClass(r)})},doNothing:function(e){e.targets.click(function(e){e.preventDefault()})},fetchMore:function(e){var t=e.pageSection,a=e.block,o=e.targets;a.on("beforeFetch",function(e,t){t["skip-status"]||o.button("loading")}),a.on("fetchCompleted",function(e){popManager.stopFetchingBlock(t,a)?o.addClass("hidden"):(o.removeClass("hidden"),o.button("reset"))}),o.click(function(e){e.preventDefault(),popManager.fetchBlock(t,a,{operation:M.URLPARAM_OPERATION_APPEND})})},fetchMoreDisable:function(e){var t=e.block,a=e.targets;t.on("beforeFetch",function(e,t){t["skip-status"]||a.addClass("disabled").attr("disabled","disabled")}),t.on("fetchCompleted",function(e){a.removeClass("disabled").attr("disabled",!1)})},saveLastClicked:function(t){t.pageSection;var a=t.block;t.targets.click(function(t){var o=e(this);a.find('[data-action="retry"]').data("lastclicked","#"+o.attr("id")).removeClass("hidden")})},retrySendRequest:function(t){t.pageSection,t.block;t.targets.click(function(t){t.preventDefault();var a=e(this);a.data("lastclicked")&&e(a.data("lastclicked")).trigger("click")})},reset:function(t){var a=t.domain,o=t.pageSection;t.targets.click(function(t){t.preventDefault();var n=e(this),r=popManager.getBlock(n);popManager.reset(a,o,r),popManager.closeMessageFeedback(r)})},sortable:function(t){t.pageSection,t.block;var a=t.targets;e(document).ready(function(e){a.sortable({cursor:"move"})})},onActionThenClick:function(t){t.targets.each(function(){var t=e(this),a=e(t.data("triggertarget")),o=t.data("trigger-action")||"click";t.data("triggertarget-internal")&&(a=a.find(t.data("triggertarget-internal"))),a.on(o,function(e){t.trigger("click")})})},getUrl:function(t,a,o){var n=(a=popManager.getOriginalLink(a)).data("target-url");if(!n){var r=e(a.data("blocktarget")),i=popManager.getPageSection(r);n=popManager.getBlockFilteringUrl(t,i,r,o)}return n}}}(jQuery),popJSLibraryManager.register(popFunctions,["showmore","hideEmpty","switchTargetClass","doNothing","fetchMore","fetchMoreDisable","saveLastClicked","retrySendRequest","reset","sortable","onActionThenClick","beep"]);
;"use strict";!function(t){window.popInputFunctions={fillURLParamInput:function(a){var n=this,r=a.block;a.targets.each(function(){var a=t(this),i=n.getURLParamInputValue(r,a);a.val(i)})},fillAddonInput:function(a){var n=this,r=a.targets,i=a.relatedTarget;i&&r.each(function(){var a=t(this);n.fillInput(a,i)})},fillModalInput:function(a){var n=this;a.targets.each(function(){var a=t(this);a.closest(".modal").on("show.bs.modal",function(r){var i=t(r.relatedTarget);n.fillInput(a,i)})})},fillAddonURLInput:function(a){var n=this,r=a.domain,i=a.targets,l=a.relatedTarget;l&&i.each(function(){var a=t(this);n.fillURLInput(r,a,l)})},fillModalURLInput:function(a){var n=this,r=a.domain;a.targets.each(function(){var a=t(this);a.closest(".modal").on("show.bs.modal",function(i){var l=t(i.relatedTarget);n.fillURLInput(r,a,l)})})},browserUrl:function(t){var a=t.targets;a.closest("form").on("beforeSubmit",function(){var t=window.location.href;a.val(t)})},getURLParamInputValue:function(t,a){var n,r=a.data("urlparam");if(r){var i=popManager.getBlockTopLevelURL(t);n=getParam(r,i)}return n||""},fillInput:function(t,a){a=popManager.getOriginalLink(a);var n,r=t.data("attr");r&&(n=a.data(r)),n=n||"",t.val(n)},fillURLInput:function(t,a,n){n=popManager.getOriginalLink(n);var r=popFunctions.getUrl(t,n);a.val(r)}}}(jQuery),popJSLibraryManager.register(popInputFunctions,["fillURLParamInput","fillAddonInput","fillModalInput","fillAddonURLInput","fillModalURLInput","browserUrl"]);
;"use strict";!function(e){window.popEmbedFunctions={modalReloadEmbedPreview:function(t){var a=this,r=t.domain,n=t.pageSection;t.targets.each(function(){var t=e(this),o=popManager.getBlock(t),i=popManager.getJsSettings(r,n,o,t)["url-type"]||"embed";o.closest(".modal").on("show.bs.modal",function(d){o.data("embed-iframe")&&(t=e(o.data("embed-iframe")));var p=e(d.relatedTarget),g=popFunctions.getUrl(r,p,!0);"embed"==i?g=a.getEmbedUrl(g):"api"==i&&(g=popManager.getAPIUrl(g)),a.embedPreview(r,n,o,t,g)})})},reloadEmbedPreview:function(t){var a=this,r=t.domain,n=t.pageSection,o=t.block;t.targets.each(function(){var t=e(this);e(t.data("input-target")).change(function(){e(this);a.embedPreviewFromInput(r,n,o,t)}),a.embedPreviewFromInput(r,n,o,t)})},replaceCode:function(t){var a=this,r=t.domain,n=t.pageSection;t.targets.each(function(){var t=e(this),o=popManager.getBlock(t),i=popManager.getJsSettings(r,n,o,t)["url-type"]||"";t.closest(".modal").on("show.bs.modal",function(n){var o=e(n.relatedTarget),d=popFunctions.getUrl(r,o);"embed"==i?d=a.getEmbedUrl(d):"api"==i&&(d=popManager.getAPIUrl(d)),a.execReplaceCode(t,d)})})},getUnembedUrl:function(t){var a=popJSLibraryManager.execute("getUnembedUrl",{url:t});return e.each(a,function(e,a){if(a)return t=a,-1}),t},getEmbedUrl:function(t){var a=popJSLibraryManager.execute("getEmbedUrl",{url:t});return e.each(a,function(e,a){if(a)return t=a,-1}),t},getPrintUrl:function(t){var a=popJSLibraryManager.execute("getPrintUrl",{url:t});return e.each(a,function(e,a){if(a)return t=a,-1}),t},embedPreviewFromInput:function(t,a,r,n){var o=this,i=e(n.data("input-target")).val();if(i&&isUrlValid(i)){var d=e(n.data("iframe-target")),p=o.embedPreview(t,a,r,d,i);n.data("iframe-target","#"+p.targetContainer.attr("id"))}},embedPreview:function(e,t,a,r,n){var o={operation:M.URLPARAM_OPERATION_REPLACEINLINE,extendContext:{src:n},"merge-target":"#"+r.attr("id")},i=r.data("templateid");popJSRuntimeManager.setBlockURL(a);var d=popManager.mergeTargetTemplate(e,t,a,i,o);popManager.runJSMethods(e,t,a,i,"full");var p=popJSRuntimeManager.getLastGeneratedId(e,popManager.getSettingsId(t),popManager.getSettingsId(a),i);return a.data("embed-iframe","#"+p),d},execReplaceCode:function(e,t){var a=e.data("code-placeholder").format(t);e.val(a)}}}(jQuery),popJSLibraryManager.register(popEmbedFunctions,["replaceCode","modalReloadEmbedPreview","reloadEmbedPreview"]);
;"use strict";!function(n){window.popPrintFunctions={printWindow:function(i){getParam(M.URLPARAM_ACTION,window.location.href)==M.URLPARAM_ACTION_PRINT&&n(document).ready(function(n){window.print()})}}}(jQuery),popJSLibraryManager.register(popPrintFunctions,["printWindow"]);
;"use strict";jQuery,window.popContentFunctions={imageResponsive:function(n){n.targets.find("div.pop-content").addBack("div.pop-content").find("img, .wp-caption").addClass("img-responsive")}},popJSLibraryManager.register(popContentFunctions,["imageResponsive"]);
;"use strict";!function(e){window.popTargetFunctions={copyHeader:function(e){var a=e.targets,r=e.relatedTarget;if(r){var t=(r=popManager.getOriginalLink(r)).data("header");t&&a.find(".pop-header").removeClass("hidden").find(".pop-box").html(t)}},highlight:function(a){a.targets.each(function(){var a=e(this),r=popManager.getPageSection(a);popManager.scrollToElem(r,a,!0)})}}}(jQuery),popJSLibraryManager.register(popTargetFunctions,["copyHeader","highlight"]);
;"use strict";!function(e){window.popSocialMedia={socialmediaCounter:function(a){a.targets.one("mouseenter",function(){e(this).children("a.socialmedia-item").each(function(){var a=e(this),r=a.data("provider");if(r){var i=M.SOCIALMEDIA[r];i&&e.ajax({type:"GET",dataType:i.dataType,url:i["counter-url"].replace("%s",a.data("url")),success:function(e){if(e.hasOwnProperty(i.property)){var r=e[i.property];0!=r&&a.children(".pop-counter").html(r)}}})}})})}}}(jQuery),popJSLibraryManager.register(popSocialMedia,["socialmediaCounter"]);
;"use strict";!function(e){window.popEmbeddable={fullscreen:function(n){var l=n.targets;e(document).bind("fullscreenchange",function(){var n=l.find(".glyphicon");e(document).fullScreen()?n.removeClass("glyphicon-fullscreen").addClass("glyphicon-resize-small"):n.addClass("glyphicon-fullscreen").removeClass("glyphicon-resize-small")}),l.click(function(n){n.preventDefault(),e(this).closest(".pop-fullscreen").toggleFullScreen()})},newWindow:function(e){var n=this;e.targets.click(function(e){e.preventDefault(),window.open(n.getUnembedUrl(window.location.href),"_blank")})}}}(jQuery),popJSLibraryManager.register(popEmbeddable,["newWindow","fullscreen"]);
;"use strict";!function(t){window.popBlockDataQuery={initDelegatorFilter:function(e){var a=e.pageSection;e.targets.submit(function(e){e.preventDefault();var o=t(this);if(o.data("blocktarget")){var i=t(o.data("blocktarget")),n=popManager.getPageSection(i);popManager.isBlockGroup(i)?popBlockGroupDataQuery.filterBlockGroup(n,i,o):popManager.filter(n,i,o),popPageSectionManager.close(a,"xs")}})},initBlockFilter:function(e){var a=e.pageSection,o=e.block;e.targets.submit(function(e){e.preventDefault();var i=t(this);i.data("blocktarget")&&(o=t(i.data("blocktarget")),a=popManager.getPageSection(o)),popManager.filter(a,o,i)})},reloadBlock:function(t){var e=t.pageSection,a=t.block;t.targets.click(function(t){t.preventDefault(),popManager.reload(e,a)})},loadLatestBlock:function(t){var e=t.domain,a=t.pageSection,o=t.block;t.targets.click(function(t){t.preventDefault(),popManager.loadLatest(e,a,o)})},timeoutLoadLatestBlock:function(e){var a=this,o=e.domain,i=e.pageSection,n=e.block;e.targets.each(function(){var e=t(this),c=e.data("clicktime")||3e4;a.execTimeoutLoadLatestBlock(o,i,n,e,c)})},initFilter:function(e){var a=e.pageSection,o=e.block;e.targets.each(function(){var e=t(this);popManager.setFilterBlockParams(a,o,e)})},makeAlwaysRefetchBlock:function(e){var a=this,o=e.pageSection;e.block.on("visible",function(){var e=t(this);a.refetchBlock(o,e)})},execTimeoutLoadLatestBlock:function(e,a,o,i,n){var c=this,r=popManager.getJsSettings(e,a,o,i),l={"skip-status":!0,"datasetcount-target":r["datasetcount-target"],"datasetcount-updatetitle":r["datasetcount-updatetitle"]};!(r["only-loggedin"]||!1)||popUserAccount.isLoggedIn(e)?setTimeout(function(){t("#"+i.attr("id")).length&&(popManager.loadLatest(e,a,o,l),c.execTimeoutLoadLatestBlock(e,a,o,i,n))},n):t(document).one("user:loggedin:"+e,function(t,r){c.execTimeoutLoadLatestBlock(e,a,o,i,n)})},execRefetchBlock:function(e,a){var o=this;a.each(function(){var a=t("#"+t(this).attr("id"));a.length&&o.refetchBlock(e,a)})},refetchBlock:function(t,e){var a={"post-data":e.data("post-data"),"show-disabled-layer":!0};popManager.refetch(t,e,a)},makeOneTimeRefetch:function(e,a){popManager.jsInitialized(a)&&popManager.isContentLoaded(e,a)&&a.one("visible",function(){var a=t(this);popBlockDataQuery.refetchBlock(e,a)})}}}(jQuery),popJSLibraryManager.register(popBlockDataQuery,["initDelegatorFilter","initBlockFilter","reloadBlock","loadLatestBlock","timeoutLoadLatestBlock","initFilter","makeAlwaysRefetchBlock"]);
;"use strict";!function(e){window.popBlockDataQueryUserState={refetchBlockOnUserLoggedIn:function(n){var t=this,o=n.domain,c=n.pageSection,i=n.targets;e(document).one("user:loggedin:"+o,function(e,n){"initialfeedback"!=n&&t.execRefetchBlock(c,i)})},nonendingRefetchBlockOnUserLoggedIn:function(e){var n=this,t=e.domain,o=e.pageSection,c=e.targets;n.execNonendingRefetchBlockOnUserEvent(o,c,"user:loggedin:"+t)},nonendingRefetchBlockOnUserLoggedInOut:function(e){var n=this,t=e.domain,o=e.pageSection,c=e.targets;n.execNonendingRefetchBlockOnUserEvent(o,c,"user:loggedinout:"+t)},execNonendingRefetchBlockOnUserEvent:function(n,t,o){var c=this;e(document).on(o,function(e,o){"initialfeedback"!=o&&"initialuserdata"!=o&&c.execRefetchBlock(n,t)})}}}(jQuery),popJSLibraryManager.register(popBlockDataQueryUserState,["refetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedIn","nonendingRefetchBlockOnUserLoggedInOut"]);
;"use strict";!function(o){window.popBlockGroupDataQuery={initBlockGroupFilter:function(r){var e=this,a=r.pageSection,t=r.block,c=r.targets;c.each(function(r){var e=o(this);blocks.each(function(){var r=o(this);popManager.setFilterBlockParams(a,r,e)})}),c.submit(function(r){r.preventDefault();var c=o(this);e.filterBlockGroup(a,t,c)})},reloadBlockGroup:function(o){var r=o.pageSection,e=o.block;o.targets.click(function(o){o.preventDefault();var a=popManager.getBlockGroupActiveBlock(e);popManager.reload(r,a)})},filterBlockGroup:function(r,e,a){var t=popManager.getBlockGroupActiveBlock(e);popManager.getBlockGroupBlocks(e).each(function(){var e=o(this);popManager.setFilterBlockParams(r,e,a),e.attr("id")==t.attr("id")?popManager.reload(r,e):popBlockDataQuery.makeOneTimeRefetch(r,e)})}}}(jQuery),popJSLibraryManager.register(popBlockGroupDataQuery,["initBlockGroupFilter","reloadBlockGroup"]);
;"use strict";!function(e){window.popBlockGroupDataQueryUserState={refetchBlockGroupOnUserLoggedIn:function(o){var t=o.domain,r=o.pageSection,a=o.targets;e(document).one("user:loggedin:"+t,function(o,t){"initialfeedback"!=t&&a.each(function(){var o=e("#"+e(this).attr("id"));if(o.length){var t=popManager.getBlockGroupBlocks(o),a=popManager.getBlockGroupActiveBlock(o);t.each(function(){var o=e(this);o.attr("id")==a.attr("id")?popBlockDataQuery.refetchBlock(r,o):popBlockDataQuery.makeOneTimeRefetch(r,o)})}})})}}}(jQuery),popJSLibraryManager.register(popBlockGroupDataQueryUserState,["refetchBlockGroupOnUserLoggedIn"]);
;"use strict";!function(e){window.popMenus={activeLinks:function(a){var i=a.pageSection,t=a.targets,n=a.domain;if(popManager.getFetchPageSectionSettings(i).activeLinks){var s=popManager.getTopLevelFeedback(n)[M.URLPARAM_PARENTPAGEID];s&&t.find(".menu-item-object-id-"+s).each(function(){var a=e(this);a.addClass("active"),a.parents(".menu-item").addClass("active")})}}}}(jQuery),popJSLibraryManager.register(popMenus,["activeLinks"]);
;"use strict";!function(t){window.popDatasetCount={displayBlockDatasetCount:function(a){var e=a.domain,n=a.pageSection,o=a.block;if(o.data("datasetcount-target")){var u=popManager.getJsSettings(e,n,o),c=u["display-datasetcount-when"]||["oncreated"],d=u["datasetcount-updatetitle"];c.indexOf("oncreated")>-1&&t(document).ready(function(t){var a=t(o.data("datasetcount-target"));popManager.displayDatasetCount(e,n,o,a,d)}),c.indexOf("onrendered")>-1&&o.on("rendered",function(a){var u=t(o.data("datasetcount-target"));popManager.displayDatasetCount(e,n,o,u,d)})}},clearDatasetCount:function(a){var e=this;a.pageSection,a.block;a.targets.each(function(){var a=t(this),n=t(a.data("datasetcount-target")),o=!!a.data("datasetcount-updatetitle");a.click(function(t){t.preventDefault(),e.execClearDatasetCount(n,o)}),a.hover(function(){e.execClearDatasetCount(n,o)})})},clearDatasetCountOnUserLoggedOut:function(a){var e=this;a.pageSection,a.block;a.targets.each(function(){var a=t(this),n=t(a.data("datasetcount-target")),o=!!a.data("datasetcount-updatetitle");t(document).on("user:loggedout",function(t){e.execClearDatasetCount(n,o)})})},execClearDatasetCount:function(t,a){t.html("").addClass("hidden"),a&&(document.title=popManager.documentTitle)}}}(jQuery),popJSLibraryManager.register(popDatasetCount,["displayBlockDatasetCount","clearDatasetCount","clearDatasetCountOnUserLoggedOut"]);
;"use strict";!function(e){window.popReplicate={replicateTopLevel:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultipleTopLevel(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSingleTopLevel(n,t)})},replicatePageSection:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultiplePageSection(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSinglePageSection(n,t)})},replicateMultipleTopLevel:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this),r=i.data("unique-url")||!1;n.execReplicateTopLevel(t,i,!0,r)})},replicateSingleTopLevel:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicateTopLevel(t,i,!1,!1)})},execReplicateTopLevel:function(t,a,n,i){var r=a.data("original-url"),p=getDomain(r),c=(popManager.getMemory(p),a.data("intercept-url")),o=popManager.getFrameTarget(t),l=popManager.getReplicableMemory(c,o),g=popManager.getTopLevelFeedback(p);e.each(l.feedback.toplevel,function(t,a){"array"==e.type(a)&&0==a.length||("object"==e.type(a)?(g[t]||(g[t]={}),e.extend(g[t],a)):g[t]=a)}),n&&(i&&r.indexOf("#")>-1?g[M.UNIQUEID]=r.substr(r.indexOf("#")+1):(popManager.generateUniqueId(p),i&&(r=popManager.addUniqueId(r))));var u=a.data("title");g[M.URLPARAM_TITLE]=u,g[M.URLPARAM_PARENTPAGEID]=null,g[M.URLPARAM_URL]=r,popManager.maybeUpdateDocument(p,t)},replicateMultiplePageSection:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},replicateSinglePageSection:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},execReplicatePageSection:function(t,a){a.data("block-settingsid"),popManager.getSettingsId(t);var n=a.data("templateid"),i=a.data("intercept-url"),r=getDomain(i),p=popManager.getMemory(r),c=popManager.getFrameTarget(t),o=popManager.getReplicableMemory(i,c);e.extend(p.feedback.pagesection,o.feedback.pagesection),e.each(o.feedback.block,function(t,a){e.extend(p.feedback.block[t],a),e.extend(p.dataset[t],o.dataset[t]),e.extend(p["query-state"].general[t],o["query-state"].general[t]),e.extend(p["query-state"].domain[t],o["query-state"].domain[t])});var l=popManager.getTopLevelFeedback(r),g=popManager.getPageSectionFeedback(r,t),u=popManager.getPageSectionConfiguration(r,t);g["intercept-urls"][n]||(g["intercept-urls"][n]={}),g["intercept-urls"][n][n]=l[M.URLPARAM_URL],u[M.JS_TEMPLATE]=n;var d={};a.next(".pop-interceptor-blocksettingsids").children().each(function(){var t=e(this),a=t.data("value");a=t.data("value")?[t.data("value")]:[],d[t.data("key")]=a}),u[M.JS_BLOCKSETTINGSIDS]=d,popManager.initPageSectionSettings(r,t,u);var s={"js-args":{relatedTarget:a},url:l[M.URLPARAM_URL]};popJSRuntimeManager.setPageSectionURL(l[M.URLPARAM_URL]),popManager.renderPageSection(r,t,null,s)}}}(jQuery),popJSLibraryManager.register(popReplicate,["replicateTopLevel","replicatePageSection"]);
;"use strict";!function(e){window.popForms={interceptForm:function(t){t.pageSection;t.targets.click(function(t){t.preventDefault();var a=e(this),n=e(a.data("target")),r=splitParams(a.data("post-data"));e.each(r,function(e,t){n.find('input[name="'+e+'"]').val(t)}),n.submit()})},forms:function(t){var a=t.pageSection,n=t.block,r=t.targets,o=popManager.getSettingsId(a),i=popManager.getSettingsId(n);r.submit(function(t){t.preventDefault();var r=e(this);r.triggerHandler("beforeSubmit"),popManager.fetchBlock(a,n,{type:"POST","post-data":r.serialize()}),popManager.blockScrollTop(a,n)}),n.on("fetched",function(e,t){var c=t.feedback.block[o][i];!0===c.result&&r.triggerHandler("clear"),c["show-msgs"]&&c.msgs&&c.msgs.length&&popManager.scrollToElem(a,n.children(".blocksection-messagefeedback").first(),!0),popManager.maybeRedirect(c)})},formHandleDisabledLayer:function(e){var t=e.pageSection,a=e.block,n=e.targets,r=popManager.getSettingsId(t),o=popManager.getSettingsId(a);a.on("fetched",function(e,t){var a=t.feedback.block[r][o];a["validate-checkpoints"]&&a["checkpointvalidation-failed"]||n.children(".form-inner").children(".pop-disabledlayer").addClass("hidden")})},clearInput:function(t){t.pageSection;t.targets.each(function(){var t=e(this);t.closest("form").on("clear",function(){t.val("")})})}}}(jQuery),popJSLibraryManager.register(popForms,["interceptForm","forms","formHandleDisabledLayer","clearInput"]);
;"use strict";!function(e){window.popLinks={documentInitialized:function(){this.links()},links:function(){var t=this,a=new RegExp(/\.(gif|jpg|jpeg|tiff|png)$/i),n=new RegExp(/\.(pdf|css|js|zip|tar|ppt|pptx|doc|docx|xls|xlsx)$/i),r=[];e.each(M.ALLOWED_DOMAINS,function(e,t){r.push('a[href^="'+t+'"]')}),e(document).on("click",r.join(","),function(r){var i=e(this),o=i.attr("href");if(a.test(o))if(popJSLibraryManager.getLibraries("linksImage").length){r.preventDefault();var p={anchor:i};popJSLibraryManager.execute("linksImage",p)}else t.linkBlankTarget(i);else if(n.test(o))t.linkBlankTarget(i);else{var l=popManager.getPageSection(i),s=i.attr("target")||M.URLPARAM_TARGET_MAIN;if(s==M.URLPARAM_TARGET_FULL)return r.preventDefault(),t.maybeaddspinner(i,o),void(window.location=o);if(s==M.URLPARAM_TARGET_PRINT)return r.preventDefault(),void t.openPrint(o);if(popManager.targetExists(s)){r.preventDefault(),o==M.HOME_DOMAIN&&(o=M.HOME_DOMAIN+"/");var d=!1,g={},c={};if(i.data("reloadurl"))g.reloadurl=!0;else{c={event:r,relatedTarget:i,target:i.attr("target")||popManager.getClickFrameTarget(l)};var f=o;i.data("append-intercepturl")&&(f+=i.data("append-intercepturl")),d=popURLInterceptors.getInterceptors(f,c).length}if(d)popURLInterceptors.intercept(f,c);else{g.target=s,g["js-args"]={relatedTarget:i};var u=t.maybeaddspinner(i,o)?"":null;void 0!==i.data("loadingmsg-target")&&(u=i.data("loadingmsg-target")),null!=u&&(g["loadingmsg-target"]=u),r.metaKey&&(g.silentDocument=!0,g["js-args"].inactivePane=!0),popManager.fetch(o,g)}}}}),e(document).on("click",'a[target="'+M.URLPARAM_TARGET_SOCIALMEDIA+'"]',function(a){a.preventDefault();var n=e(this).attr("href");t.openSocialMedia(n)}),e(document).on("click",'a[href^="#"]',function(t){var a=e(this),n=a.attr("href");if(n.length>1){var r=e(n),i=void 0!==a.data("toggle")||void 0!==a.data("slide");r.length&&!i&&(t.preventDefault(),popManager.scrollToElem(popManager.getPageSection(r),r,!0))}}),e(document).on("click",'a[href^="http://"],a[href^="https://"]',function(a){var n=e(this),r=n.attr("href"),i=!0;e.each(M.ALLOWED_DOMAINS,function(e,t){if(r.startsWith(t))return i=!1,-1}),i&&t.linkBlankTarget(n)})},linkBlankTarget:function(e){e.attr("target")||e.attr("target","_blank")},maybeaddspinner:function(t,a){var n=!t.hasClass("hidden")&&(M.ADDANCHORSPINNER&&void 0===t.data("addspinner")||t.data("addspinner"));if(n){var r=e('<span class="pop-spinner">'+M.SPINNER+"</span>");t.find("img").length&&r.addClass("spinner-img"),e(document).one("urlfetchcompleted:"+escape(a),function(){t.removeClass("loading").children(".pop-spinner").remove()}),t.trigger("blur").addClass("loading").prepend(r)}return n},openPrint:function(e){window.open(e,"_blank")},openSocialMedia:function(e){window.open(e,"_blank","left=20,top=20,width=500,height=400,toolbar=1,resizable=0")}}}(jQuery),popJSLibraryManager.register(popLinks,["documentInitialized"],!0);
;"use strict";!function(a){window.popClasses={addDomainClass:function(s){var e=s.domain,i=s.pageSection,n=s.block,o=s.targets;o.each(function(){var s=a(this),t=popManager.getJsSettings(e,i,n,s).prefix||"";o.addClass(t+getDomainId(e))})}}}(jQuery),popJSLibraryManager.register(popClasses,["addDomainClass"]);
;"use strict";!function(r){window.popScrolls={scrollHandler:function(l){var o=0;l.pageSection.scroll(function(){var l=r(this).scrollTop();Math.abs(o-l)>=200&&(l>o?r(window).triggerHandler("scroll:down"):r(window).triggerHandler("scroll:up"),o=l)})}}}(jQuery),popJSLibraryManager.register(popScrolls,["scrollHandler"]);
;"use strict";!function(n){window.popOnlineOffline={documentInitialized:function(){this.onlineOffline()},onlineOffline:function(){var n=this;window.addEventListener("online",n.checkOnlineOffline),window.addEventListener("offline",n.checkOnlineOffline),n.checkOnlineOffline()},checkOnlineOffline:function(){navigator.onLine?n(document.body).addClass("online").removeClass("offline"):n(document.body).addClass("offline").removeClass("online")}}}(jQuery),popJSLibraryManager.register(popOnlineOffline,["documentInitialized"]);
;"use strict";!function(e){window.popEventReactions={resetOnSuccess:function(t){var a=t.domain,n=t.pageSection,o=t.targets,s=popManager.getSettingsId(n);o.on("fetched",function(t,o){var c=e(this),g=popManager.getSettingsId(c);!0===o.feedback.block[s][g].result&&popManager.reset(a,n,c,{"skip-restore":!0})})},destroyPageOnSuccess:function(t){var a=t.pageSection,n=t.targets,o=popManager.getSettingsId(a);n.on("fetched",function(t,n){var s=e(this),c=popManager.getSettingsId(s),g=n.feedback.block[o][c],i=popManager.getFrameTarget(a);if(!0===g.result){var r=s.data("destroytime")||0;setTimeout(function(){popManager.triggerDestroyTarget(popManager.getTargetParamsScopeURL(s),i)},r)}})},closeMessageFeedbacksOnPageSectionOpen:function(e){var t=e.pageSection;e.targets;popPageSectionManager.getGroup(t).on("on.bs.pagesection-group:pagesection-"+t.attr("id")+":opened",function(){popManager.closeMessageFeedbacks(t)})},closePageSectionOnSuccess:function(t){var a=this,n=t.pageSection,o=t.targets,s=popManager.getSettingsId(n);o.on("fetched",function(t,o){var c=e(this),g=popManager.getSettingsId(c);if(!0===o.feedback.block[s][g].result){var i=c.data("closetime")||0;a.timeoutClosePageSection(n,i)}})},closePageSectionOnTabpaneShown:function(t){var a=t.pageSection;t.targets.each(function(){var t=e(this);popManager.getPageSectionPage(t).on("shown.bs.tabpane",function(){popPageSectionManager.close(a)}),popPageSectionManager.close(a)})},timeoutClosePageSection:function(e,t){setTimeout(function(){popPageSectionManager.close(e),popManager.closeMessageFeedbacks(e)},t)}}}(jQuery),popJSLibraryManager.register(popEventReactions,["closePageSectionOnTabpaneShown","resetOnSuccess","closeMessageFeedbacksOnPageSectionOpen","closePageSectionOnSuccess","destroyPageOnSuccess"]);
;"use strict";!function(e){window.popEventReactionsUserState={resetOnUserLogout:function(t){var o=t.domain,n=t.pageSection,a=t.targets;e(document).on("user:loggedout:"+o,function(t,r){a.each(function(){var t=e("#"+e(this).attr("id"));t.length&&popManager.reset(o,n,t)})})},destroyPageOnUserLoggedOut:function(e){var t=this,o=e.domain,n=e.pageSection,a=e.targets;n.one("completed",function(){t.execDestroyPageOnUserLoggedOut(o,a)})},destroyPageOnUserNoRole:function(e){var t=this,o=e.domain,n=e.pageSection,a=e.targets;n.one("completed",function(){t.execDestroyPageOnUserNoRole(o,n,a)})},deleteBlockFeedbackValueOnUserLoggedInOut:function(t){var o=t.domain,n=t.pageSection,a=t.block;e(document).on("user:loggedinout:"+o,function(t,r){if("initialfeedback"!=r&&"initialuserdata"!=r){var g=popManager.getJsSettings(o,n,a)["user:loggedinout-deletefeedbackvalue"]||[];if(g.length){var s=popManager.getBlockFeedback(o,n,a);e.each(g,function(e,t){var o=s;for(i=0;i<t.length-1;i++)o=o[t[i]];delete o[t[t.length-1]]})}}})},scrollTopOnUserLoggedInOut:function(t){var o=t.domain,n=t.pageSection,a=t.block,r=t.targets;e(document).on("user:loggedinout:"+o,function(t,g){"initialfeedback"!=g&&"initialuserdata"!=g&&r.each(function(){var t=e(this);if(e("#"+t.attr("id")).length){var r=popManager.getJsSettings(o,n,a,t)["scrolltop-animate"]||!1;popManager.scrollToElem(t,t,r)}})})},execDestroyPageOnUserLoggedOut:function(t,o){e(document).one("user:loggedout:"+t,function(t,n){o.each(function(){var t=e("#"+e(this).attr("id"));if(t.length){var o=popManager.getPageSection(t),n=popManager.getFrameTarget(o);popManager.triggerDestroyTarget(popManager.getTargetParamsScopeURL(t),n)}})})},execDestroyPageOnUserNoRole:function(t,o,n){var a=this,r=n.data("neededrole");e(document).one("user:updated:"+t,function(g,i){if((n=e("#"+n.attr("id"))).length)if(i.roles&&-1==i.roles.indexOf(r)){var s=popManager.getFrameTarget(o);popManager.triggerDestroyTarget(popManager.getTargetParamsScopeURL(n),s)}else a.execDestroyPageOnUserNoRole(t,o,n)})}}}(jQuery),popJSLibraryManager.register(popEventReactionsUserState,["resetOnUserLogout","destroyPageOnUserLoggedOut","destroyPageOnUserNoRole","deleteBlockFeedbackValueOnUserLoggedInOut","scrollTopOnUserLoggedInOut"]);
;"use strict";jQuery,window.popFeedbackMessage={formatFeedbackMessage:function(e,s,a,r){var t={message:e,tls:s,pss:a,bs:r};return popJSLibraryManager.execute("formatFeedbackMessage",t),t.message}};
;"use strict";!function(e){window.popBootstrapCarousel={prepareCarousel:function(e,t,o){var n=this;t.on("rendered",function(){n.targetsAddActive(o)}),n.targetsAddActive(o)},targetsAddActive:function(t){var o=this;t.each(function(){var t=e(this);o.addActive(t)})},addActive:function(e){0==e.find(".item.active").length&&e.find(".item:first-child").addClass("active")},showElement:function(e,t){var o=this,n=t.closest(".item"),a=n.parent().children().index(n);o.slideTo(e,a)},slideTo:function(e,t){e.carousel(t)},next:function(e){e.carousel("next")},prev:function(e){e.carousel("prev")},isFirstSlide:function(e){return e.find(".item:first-child").hasClass("active")},isLastSlide:function(e){return e.find(".item:last-child").hasClass("active")},isNthSlide:function(e,t){return e.find(".item:nth-child("+t+")").hasClass("active")},isNthLastSlide:function(e,t){return e.find(".item:nth-last-child("+t+")").hasClass("active")},numberSlides:function(e){return e.find(".item").length}}}(jQuery),function(e){window.popBootstrapCarouselControls={initBlockRuntimeMemoryIndependent:function(e){var t=this,o=e.pageSection,n=e.block;e.runtimeMempage.carouselControls={},t.resetBlockRuntimeMemory(o,n)},carouselControls:function(e){var t=this,o=e.pageSection,n=e.block,a=e.targets,i=t.getCarousel(a),r=a.children(".pop-carousel-control.right");t.controlCarouselNext(o,n,i,a,r);var s=a.children(".pop-carousel-control.left");t.controlCarouselPrev(o,n,i,a,s),n.on("fetchDomainCompleted",function(e,i,r){t.handleReload(r,o,n,a)}),t.setEnabledDisabled(o,n,a)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).carouselControls},resetBlockRuntimeMemory:function(t,o){var n=this.getRuntimeMemoryPage(t,o),a={state:""};e.extend(n,a)},slideNext:function(e,t,o,n){var a=this;popBootstrapCarousel.isNthLastSlide(o,2)&&popManager.stopFetchingBlock(e,t)&&a.disable(n),a.enable(n.siblings(".pop-carousel-control.left")),popBootstrapCarousel.next(o)},controlCarouselNext:function(t,o,n,a,i){var r=this,s=popManager.getBlockQueryState(t,o);i.click(function(a){a.preventDefault();var i=e(this);if(!r.disabled(i))if(popBootstrapCarousel.isLastSlide(n)){if(s.loading.length||popManager.stopFetchingBlock(t,o))return;popManager.fetchBlock(t,o,{operation:M.URLPARAM_OPERATION_APPEND}),r.setControlState(t,o,"loading")}else r.slideNext(t,o,n,i)})},controlCarouselPrev:function(t,o,n,a,i){var r=this;i.click(function(t){t.preventDefault();var o=e(this);r.disabled(o)||(popBootstrapCarousel.isNthSlide(n,2)&&r.disable(o),popBootstrapCarousel.numberSlides(n)>1&&r.enable(o.siblings(".pop-carousel-control.right")),popBootstrapCarousel.prev(n))})},handleReload:function(e,t,o,n){var a=this,i=popManager.getBlockDataset(e,t,o);if(a.setEnabledDisabled(t,o,n),i&&i.length&&"loading"==a.getControlState(t,o)){var r=a.getCarousel(n),s=n.children(".pop-carousel-control.right");a.slideNext(t,o,r,s)}a.setControlState(t,o,"")},getControlState:function(e,t){return this.getRuntimeMemoryPage(e,t).state},setControlState:function(e,t,o){this.getRuntimeMemoryPage(e,t).state=o},getCarousel:function(t){return e(t.data("target"))},setEnabledDisabled:function(e,t,o){var n=this,a=n.getCarousel(o),i=o.children(".pop-carousel-control.left"),r=o.children(".pop-carousel-control.right");0==popBootstrapCarousel.numberSlides(a)?(n.disable(i),n.disable(r)):(popBootstrapCarousel.isFirstSlide(a)?n.disable(i):n.enable(i),popBootstrapCarousel.isLastSlide(a)&&popManager.stopFetchingBlock(e,t)?n.disable(r):n.enable(r))},disable:function(e){e.addClass("disabled"),e.attr("disabled",!0)},enable:function(e){e.removeClass("disabled"),e.attr("disabled",!1)},disabled:function(e){return e.hasClass("disabled")}}}(jQuery),popJSLibraryManager.register(popBootstrapCarouselControls,["initBlockRuntimeMemoryIndependent","controlCarouselPrev","controlCarouselNext","carouselControls"]);
;"use strict";jQuery,window.popBootstrapCarouselStatic={carouselStatic:function(a){var r=a.pageSection,t=a.block,o=a.targets;popBootstrapCarousel.prepareCarousel(r,t,o),o.carousel({interval:!1,wrap:!1})}},popJSLibraryManager.register(popBootstrapCarouselStatic,["carouselStatic"]);
;"use strict";!function(o){window.popBootstrapCarouselAutomatic={carouselAutomatic:function(e){var a=e.pageSection,r=e.block,s=e.targets;r.on("beforeReload",function(o){s.carousel("pause")}),popBootstrapCarousel.prepareCarousel(a,r,s),carousel.find(".item.active").length&&(popBootstrapCarousel.numberSlides(carousel)>=2?(o(window).width()>=768?carousel.carousel():carousel.carousel({interval:!1,wrap:!1}),carousel.find(".pop-carousel-controls").removeClass("hidden")):carousel.find(".pop-carousel-controls").addClass("hidden"))}}}(jQuery),popJSLibraryManager.register(popBootstrapCarouselAutomatic,["carouselAutomatic"]);
;"use strict";!function(a){window.popModals={modalForm:function(o){o.pageSection;o.targets.on("show.bs.modal",function(o){var e=a(this);a(o.relatedTarget);a(e.data("initjs-targets")).each(function(){var o=a(this);popManager.closeMessageFeedback(o)})})}}}(jQuery),popJSLibraryManager.register(popModals,["modalForm"]);
;"use strict";!function(t){window.popControls={controlPrint:function(e){var r=this,n=e.domain,o=e.pageSection;e.block;e.targets.click(function(e){e.preventDefault();var a=t(this),i=r.getBlockFilteringUrl(n,o,a,!0);i=popEmbedFunctions.getPrintUrl(i),popLinks.openPrint(i)})},controlSocialMedia:function(e){var r=this,n=e.domain,o=e.pageSection;e.block;e.targets.click(function(e){e.preventDefault();var a=t(this),i=a.data("shareurl")?a.data("shareurl"):r.getBlockFilteringUrl(n,o,a,!0),l=a.data("sharetitle")?a.data("sharetitle"):popManager.documentTitle,c=a.data("provider"),p=M.SOCIALMEDIA[c]["share-url"].replace(new RegExp("%url%","g"),encodeURIComponent(i)).replace(new RegExp("%title%","g"),encodeURIComponent(l));popLinks.openSocialMedia(p)})},getBlockFilteringUrl:function(e,r,n,o){var a=t(n.data("blocktarget"));return popManager.getBlockFilteringUrl(e,r,a,o)}}}(jQuery),popJSLibraryManager.register(popControls,["controlPrint","controlSocialMedia"]);
;!function(t,i,e,n){"use strict";t.fn.dynamicMaxHeight=function(i){function e(t,i){var e;e=t.hasClass(d)?i.data("replace-text"):i.attr("title"),i.text(e)}function n(t,i){t.find("."+c).css("max-height",i)}function a(t,i){i.css("display","inline-block")}var c="dynamic-height-wrap",d="dynamic-height-active",o="js-dynamic-show-hide";return this.each(function(i,s){var h=t(s),u=h.data("maxheight"),l=h.find("."+c).outerHeight(),r=h.find("."+o);h.attr("data-itemheight",l),l>u&&(n(h,u),h.toggleClass(d),a(h,r)),r.click(function(){h.hasClass(d)?n(h,l):n(h,u),e(h,r),h.toggleClass(d)})})}}(window.jQuery||window.$,document,window),"undefined"!=typeof module&&module.exports&&(module.exports=dynamicMaxHeight);
;"use strict";!function(t){window.popCDN={localStorageKey:"PoP:cdn-thumbprints",thumbprintValues:{},config:{},documentInitialized:function(e){var r=this,n=e.domain,a=popManager.getTopLevelFeedback(n)[M.CDN_THUMBPRINTVALUES];r.thumbprintValues=popManager.getStoredData(r.localStorageKey,!1),r.thumbprintValues?r.updateThumbprintValues(a):(r.thumbprintValues=t.extend({},a),r.storeData())},pageSectionFetchSuccess:function(t){var e=this,r=t.response;e.fetchSuccess(r)},blockFetchSuccess:function(t){var e=this,r=t.response;e.fetchSuccess(r)},modifyFetchArgs:function(t){var e=this,r=t.options,n=t.url;if(e.useCDN(n)){t.url=e.getCDNUrl(n);var a=e.getThumbprintValue(n);a&&(r.params=r.params||{},r.params[M.CDN_URLPARAM_THUMBPRINT]=a)}},modifyFetchBlockArgs:function(t){var e=this,r=t.options,n=t.url;if("GET"==t.type&&e.useCDN(n)){t.url=e.getCDNUrl(n);var a=e.getThumbprintValue(n);a&&(r["onetime-post-data"]=r["onetime-post-data"]?r["onetime-post-data"]+"&":"",r["onetime-post-data"]+=M.CDN_URLPARAM_THUMBPRINT+"="+a)}},hasConfiguration:function(t){var e=this,r=getDomain(t);return void 0!==e.config[r]},getConfiguration:function(t){var e=this,r=getDomain(t);return e.config[r]},getThumbprints:function(e){var r=this;if(!r.hasConfiguration(e))return console.log("There is no config object, no thumbprints returned"),[];var n=r.getConfiguration(e),a=[];return t.each(n.thumbprints,function(t,i){r.evalCriteria(e,n.criteria.thumbprints[i])&&a.push(i)}),a},isHome:function(t){var e=removeParams(t);return[M.HOME_DOMAIN,M.HOME_DOMAIN+"/",M.HOMELOCALE_URL,M.HOMELOCALE_URL+"/"].indexOf(e)>-1},evalCriteria:function(e,r){var n=this,a=function(t){var r=t[0],n=t[1],a=getParam(r,e);return"object"==typeof a?searchInObject(a,n):a==n},i=[{isHome:r.isHome&&n.isHome(e),startsWith:r.startsWith.full.some(function(t){return e.startsWith(t)}),pageStartsWith:r.startsWith.partial.some(function(t){return e.startsWith(M.HOMELOCALE_URL+"/"+t)}),hasParamValues:r.hasParamValues.some(a)},{noParamValues:!r.noParamValues.some(a)}],o=0;return t.each(i,function(t,e){Object.keys(e).filter(function(t){return e[t]}).length&&o++}),o==i.length},fetchSuccess:function(t){this.updateThumbprintValues(t.feedback.toplevel[M.CDN_THUMBPRINTVALUES])},updateThumbprintValues:function(t){var e=this,r=!1;for(var n in t)t[n]>e.thumbprintValues[n]&&(e.thumbprintValues[n]=t[n],r=!0);r&&e.storeData()},storeData:function(){var t=this;popManager.storeData(t.localStorageKey,t.thumbprintValues)},useCDN:function(t){var e=this;if(!e.hasConfiguration(t))return!1;var r=e.getConfiguration(t);return!!r.cdnDomain&&!e.evalCriteria(t,r.criteria.rejected)},getCDNUrl:function(t){var e=this,r=getDomain(t);return e.getConfiguration(t).cdnDomain+t.substr(r.length)},getThumbprintValue:function(t){var e=this;return e.getThumbprints(t).map(function(t){return e.thumbprintValues[t]}).join(M.CDN_SEPARATOR_THUMBPRINT)},convertURL:function(t){var e=this;if(e.useCDN(t)){var r=e.getThumbprintValue(t);t=e.getCDNUrl(t),r&&(t=add_query_arg(M.CDN_URLPARAM_THUMBPRINT,r,t))}return t}}}(jQuery),popJSLibraryManager.register(popCDN,["documentInitialized","pageSectionFetchSuccess","blockFetchSuccess"],!0),popJSLibraryManager.register(popCDN,["modifyFetchArgs","modifyFetchBlockArgs"]);
;"use strict";jQuery,window.popCDNCoreHooks={mentionsSource:function(e){e.url=popCDN.convertURL(e.url)},typeaheadPrefetchURL:function(e){e.url=popCDN.convertURL(e.url)},typeaheadRemoteURL:function(e){e.url=popCDN.convertURL(e.url)}},popJSLibraryManager.register(popCDNCoreHooks,["mentionsSource","typeaheadPrefetchURL","typeaheadRemoteURL"]);
;"use strict";!function(e){window.popServiceWorkers={pages:{},init:function(){var r=this;"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=function(e){r.processEvent(e)},navigator.serviceWorker.controller&&navigator.serviceWorker.addEventListener("controllerchange",function(){e("#"+M.IDS_APPSTATUS).prepend(M.SW_MESSAGES_WEBSITEUPDATED.format(window.location.href))}))},pageSectionNewDOMsBeforeInitialize:function(e){var r=this,t=e.pageSection,a=e.newDOMs,o=t.attr("id");if(M.SW_MAIN_PAGESECTIONS&&M.SW_MAIN_PAGESECTIONS.indexOf(o)>-1){var i=a.filter(".pop-pagesection-page");if(i.length){var n=i.data("fetch-url");n&&(r.pages[n]=i.attr("id"),i.one("destroy",function(){delete r.pages[n]}))}}},modifyFetchArgs:function(e){var r=e.options;if(r["js-args"]){var t=r["js-args"].relatedTarget;t&&t.data("sw-networkfirst")&&(r.params=r.params||{},r.params[M.SW_URLPARAM_NETWORKFIRST]="true")}},modifyFetchBlockArgs:function(e){var r=e.options;e.url;r.reload&&(r["onetime-post-data"]=r["onetime-post-data"]?r["onetime-post-data"]+"&":"",r["onetime-post-data"]+=M.SW_URLPARAM_NETWORKFIRST+"=true")},resetTimestamp:function(e){var r=e.pageSection,t=e.block;"serviceWorker"in navigator&&(popManager.getBlockQueryState(r,t)[M.URLPARAM_TIMESTAMP]=Math.floor(Date.now()/1e3)+60*M.GMT_OFFSET*60)},processEvent:function(r){var t=this;e(document).ready(function(e){var a=JSON.parse(r.data);if("refresh"===a.type&&t.pages[a.url]){var o=e("#"+t.pages[a.url]);o&&o.data("fetch-url")&&(t.showRefreshMessage(o),delete t.pages[a.url])}})},showRefreshMessage:function(e){var r=e.data("url"),t=e.data("target");e.prepend(M.SW_MESSAGES_PAGEUPDATED.format(r,t))}}}(jQuery),M.USE_SW&&(popJSLibraryManager.register(popServiceWorkers,["pageSectionNewDOMsBeforeInitialize","modifyFetchArgs","modifyFetchBlockArgs","resetTimestamp"]),popServiceWorkers.init());
;"use strict";"serviceWorker"in navigator&&(navigator.serviceWorker.onmessage=function(e){"undefined"!=typeof popServiceWorkers?popServiceWorkers.processEvent(e):window.addEventListener("load",function(){popServiceWorkers.processEvent(e)})});
;"use strict";!function(t){window.popNotifications={timeFromNow:function(o){var i=this;o.targets.each(function(){var o=t(this);i.execTimeFromNow(o)})},execTimeFromNow:function(o){var i=this;if(t("#"+o.attr("id")).length){var e=o.data("time"),r=o.data("format");o.html(moment(e,r).fromNow()),setTimeout(function(){i.execTimeFromNow(o)},6e4)}}}}(jQuery),popJSLibraryManager.register(popNotifications,["timeFromNow"]);
;"use strict";!function(e){window.popFileUpload={fileUpload:function(a){var o=a.domain,l=a.pageSection;a.targets.each(function(){var a=this,p=e(this),t=p.data("action"),n=popManager.getBlock(p);p.fileupload({url:t,autoUpload:!0,maxNumberOfFiles:1,maxFileSize:2e6,acceptFileTypes:/(\.|\/)(gif|jpe?g|png)$/i,uploadTemplateId:null,downloadTemplateId:null,uploadTemplate:function(a){var o=p.data("template-upload"),l=e(),t={o:a,locale:locale};popJSRuntimeManager.setBlockURL(n);var d=popManager.getHtml(o,t),i=e(d);return l=l.add(i)},downloadTemplate:function(a){var t=p.data("template-download"),d=e(),i=popManager.getTargetConfiguration(o,l,n,t);popManager.expandJSKeys(i);var r=e.extend({},i,{o:a,locale:locale});popJSRuntimeManager.setBlockURL(n);var u=popManager.getHtml(t,r),g=e(u);return e(document).triggerHandler("gd-fileupload:rendered",[g]),d=d.add(g)},completed:function(e,a){p.find(".pop-fileuploaded-hide").hide()},destroyed:function(e,a){p.find(".pop-fileuploaded-hide").show()}}),p.hasClass("pop-fileupload-loadfromserver")&&e.getJSON(t,function(o){o&&o.files&&o.files.length&&p.fileupload("option","done").call(a,e.Event("done"),{result:o})})})}}}(jQuery),popJSLibraryManager.register(popFileUpload,["fileUpload"]);
;"use strict";Handlebars.registerHelper("locationsPageURL",function(e,r){return M.LOCATIONS_PAGE_URL[e]});
;"use strict";!function(t){window.popCreateLocation={createLocationModal:function(t){var a=this,e=t.pageSection,o=t.targets;a.execCreateLocationModal(e,o)},createLocationModalBlock:function(t){var a=this,e=t.pageSection,o=t.targets,r=t.relatedTarget;a.transferAttributes(o.closest(".modal"),r),a.execCreateLocationModal(e,o.closest(".modal"))},maybeCloseLocationModal:function(a){var e=a.pageSection,o=a.targets,r=popManager.getSettingsId(e);o.on("fetched",function(a,e){var o=t(this),n=popManager.getSettingsId(o);!0===e.feedback.block[r][n].result&&o.closest(".modal").modal("hide")})},transferAttributes:function(t,a){a=popManager.getOriginalLink(a),t.data("typeahead-target",a.data("typeahead-target"))},execCreateLocationModal:function(a,e){var o=this;e.addClass("pop-createlocation"),e.on("show.bs.modal",function(a){var e=t(this),r=t(a.relatedTarget);o.transferAttributes(e,r)})}}}(jQuery),popJSLibraryManager.register(popCreateLocation,["createLocationModal","createLocationModalBlock","maybeCloseLocationModal"]);
;"use strict";!function(e){window.popMap={map:function(a){var r=this,n=a.domain,o=a.pageSection,t=a.block,i=a.targets;t.one("rerender",function(e){r.destroy(o,t,i)}),e(document).ready(function(e){i.each(function(){var a=e(this);r.triggerShowMap(n,o,t,a);var i=a.data("domains")||[];i.indexOf(n)>=0&&i.splice(i.indexOf(n),1),e.each(i,function(e,n){r.triggerShowMap(n,o,t,a)}),a.data("domains",null)})})},mapModal:function(a){var r=this,n=a.domain,o=a.pageSection;a.targets.on("shown.bs.modal",function(){var a=e(this);e.each(a.find(".pop-map"),function(){var a=e(this),t=popManager.getBlock(a);popManager.jsInitialized(t)&&r.triggerShowMap(n,o,t,a)})})},mapStandalone:function(a){var r=this,n=a.pageSection,o=a.block,t=a.targets;popPageSectionManager.getGroup(n).on("on.bs.pagesection:theater off.bs.pagesection:theater",function(a){t.each(function(){var a=e(this);popManager.isHidden(a)||r.refresh(n,o,a)})}),o.on("fetchDomainCompleted",function(a,i,s){popJSRuntimeManager.setBlockURL(o),t.each(function(){var a=e(this);r.triggerAddMarkers(s,n,o,a,i)})}),t.each(function(){var a=e(this);r.hoverBlockElems(n,o,a)})},destroy:function(a,r,n){var o=popMapMemory.getRuntimeMemoryPage(a,r);n.each(function(){var a=e(this).attr("id");delete o.maps[a]})},triggerShowMap:function(e,a,r,n){var o=this;popManager.isHidden(n)?o.pendingTriggerMap("showmap",e,a,r,n):o.execTriggerShowMap(e,a,r,n)},triggerAddMarkers:function(e,a,r,n,o){var t=this;if(o=o||{},popManager.isHidden(n))t.pendingTriggerMap("addmarkers",e,a,r,n,o);else{var i=(o.reload||o.action==M.CBACTION_LOADCONTENT)&&o.isFirst;t.addMarkers(e,a,r,n,i)}},triggerFunction:function(e,a,r,n,o,t){var i=this;"showmap"==e?i.triggerShowMap(a,r,n,o):"addmarkers"==e&&i.triggerAddMarkers(a,r,n,o,t)},pendingTriggerMap:function(a,r,n,o,t,i){var s=this,p=popManager.getPageSectionPage(o);popPageSectionManager.execIsHidden(n)?popPageSectionManager.getGroup(n).one("on.bs.pagesection-group:pagesection-"+n.attr("id")+":opened",function(){(o=e("#"+o.attr("id"))).length&&s.triggerFunction(a,r,n,o,t,i)}):t.parents(".collapse").not(".in").length?t.parents(".collapse").not(".in").one("shown.bs.collapse",function(){s.triggerFunction(a,r,n,o,t,i)}):p.hasClass("tab-pane")&&!popManager.isActive(p)&&p.one("shown.bs.tabpane",function(){s.triggerFunction(a,r,n,o,t,i)})},execTriggerShowMap:function(e,a,r,n){this.addMarkers(e,a,r,n,n.data("markers-removecurrent")),windowResize()},refresh:function(e,a,r){var n=this.getGMap(e,a,r);n&&n.refresh()},hoverBlockElems:function(a,r,n){var o=this;r.on("mouseenter",".pop-openmapmarkers",function(){var t,i=e(this);if(i.hasClass("make-popover")){var s=i.attr("aria-describedby");s&&(t=e("#"+s).find("a.pop-modalmap-link"))}else t=i.find("a.pop-modalmap-link");o.openMapMarkers(a,r,n,t)})},openMapMarkers:function(e,a,r,n){var o=this;popManager.isHidden(r)||(o.closeMarkers(e,a,r),n.length&&o.openMarkers(e,a,r,n))},closeMarkers:function(a,r,n){var o=this,t=o.getGMap(a,r,n);if(t){var i=o.getMarkersInfo(a,r,n);t.hideInfoWindows(),e.each(i.markersOpen,function(e,a){var r=i.markersPos[a];t.markers[r]&&t.markers[r].setIcon("https://maps.google.com/mapfiles/ms/icons/red-dot.png")})}},getMarkerIdsFromLinkURLs:function(a){var r=[];return a.each(function(){var a=e(this),n=(a=popManager.getOriginalLink(a)).attr("href"),o=getDomain(n),t=getParam(M.LOCATIONSID_FIELDNAME,n);t&&e.each(t,function(e,a){var n=popMapRuntime.getMarkerId(o,a);r.push(n)})}),r},openMarkers:function(a,r,n,o){var t=this,i=t.getMarkerIdsFromLinkURLs(o);if(i.length){i=i.filter(function(e,a){return i.indexOf(e)==a});var s=t.getGMap(a,r,n);if(s){var p=t.getMarkersInfo(a,r,n);if(e.each(i,function(e,a){var r=p.markersPos[a];s.markers[r]&&s.markers[r].setIcon("https://maps.google.com/mapfiles/ms/icons/green-dot.png")}),1==i.length){var g=p.markersPos[i[0]];s.markers[g]&&"undefined"!=typeof google&&google.maps.event.trigger(s.markers[g],"click")}else s.fitZoom();t.setMarkersOpen(a,r,n,i,!0)}}},hasMarker:function(e,a,r){return popMapMemory.getRuntimeMemoryPage(e,a).markers[r]},getGMap:function(e,a,r){if("undefined"!=typeof google&&"undefined"!=typeof GMaps){var n=popMapMemory.getRuntimeMemoryPage(e,a),o=r.attr("id"),t=n.maps[o];return t||(t=new GMaps({div:"#"+o,lat:M.LOCATIONSMAP_LAT,lng:M.LOCATIONSMAP_LNG,zoom:parseInt(M.LOCATIONSMAP_ZOOM)}),n.maps[o]=t),t}},getMarkersInfo:function(e,a,r){var n=r.data("markers-pagesection")||e,o=r.data("markers-block")||a,t=popMapMemory.getEmtpyBlockRuntimeMemory();try{t=popMapMemory.getRuntimeMemoryPage(n,o)}catch(e){console.log("Error: "+e.message)}var i=r.attr("id");return{markers:t.markers||{},markersPos:t.markersPos[i]||{},markersOpen:t.markersOpen[i]||[]}},setMarkersOpen:function(e,a,r,n,o){var t=popMapMemory.getRuntimeMemoryPage(e,a),i=r.attr("id");!o&&t.markersOpen[i]||(t.markersOpen[i]=[]),n&&(t.markersOpen[i]=t.markersOpen[i].concat(n))},setMarkersPos:function(a,r,n,o,t){var i=popMapMemory.getRuntimeMemoryPage(a,r),s=n.attr("id");!t&&i.markersPos[s]||(i.markersPos[s]={}),o&&e.extend(i.markersPos[s],o)},removeMarker:function(e,a,r,n){var o=this,t=o.getGMap(e,a,r);if(t){var i=o.getMarkersInfo(e,a,r).markersPos[n];t.markers[i]&&t.markers[i].setMap(null),o.zoom(e,a,r)}},zoom:function(e,a,r){var n=this.getGMap(e,a,r);if(n)if(n.markers.length>1)n.fitZoom();else if(1==n.markers.length){var o=n.markers[0].getPosition();n.setCenter(o.lat(),o.lng()),n.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM))}},addMarkers:function(a,r,n,o,t){var i=this,s=i.getGMap(r,n,o);if(s){t&&(s.removeMarkers(),i.setMarkersOpen(r,n,o,null,!0),i.setMarkersPos(r,n,o,null,!0));var p="marker-ids-"+removeScheme(a),g=o.data(p);if(g&&g.length){o.data(p,null);var c,m,d,M=i.getMarkersInfo(r,n,o),f={};e.each(g,function(e,a){if(c=M.markers[a]){var r={content:c.infoWindow.header+"<br/>"+c.infoWindow.content},n={lat:c.coordinates.lat,lng:c.coordinates.lng,title:c.title,infoWindow:r,icon:c.icon};"undefined"!=typeof google&&(n.animation=google.maps.Animation.DROP),m=s.addMarker(n),d=s.markers.length-1,f[a]=d}}),i.setMarkersPos(r,n,o,f);var l=o.data("open-onemarker-infowindow");1==g.length&&l&&(s.hideInfoWindows(),"undefined"!=typeof google&&google.maps.event.trigger(m,"click")),i.zoom(r,n,o)}}},geocode:function(e,a,r,n,o,t){var i=this.getGMap(e,a,r);i&&GMaps.geocode({address:n,callback:function(e,a){if("OK"==a){i.removeMarkers();var r=e[0].geometry.location;i.setCenter(r.lat(),r.lng()),i.addMarker({lat:r.lat(),lng:r.lng(),draggable:!0}),i.setZoom(parseInt(M.LOCATIONSMAP_1MARKER_ZOOM)),o.val(r.lat()),t.val(r.lng());var n=i.markers[0];"undefined"!=typeof google&&google.maps.event.addListener(n,"dragend",function(){var e=n.getPosition();o.val(e.lat()),t.val(e.lng())})}}})}}}(jQuery),popJSLibraryManager.register(popMap,["map","mapModal","mapStandalone"]);
;"use strict";!function(e){window.popMapMemory={initBlockRuntimeMemoryIndependent:function(e){var t=this,n=e.pageSection,r=e.block;e.runtimeMempage.map={},t.resetBlockRuntimeMemory(n,r)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).map},resetBlockRuntimeMemory:function(t,n){var r=this,m=r.getRuntimeMemoryPage(t,n),o=r.getEmtpyBlockRuntimeMemory();e.extend(m,o)},getEmtpyBlockRuntimeMemory:function(){return{markers:{},markersPos:{},markersOpen:{},maps:{}}}}}(jQuery),popJSLibraryManager.register(popMapMemory,["initBlockRuntimeMemoryIndependent"]);
;"use strict";jQuery,window.popMapInitMarker={initMarker:function(t,i,e,n){var o=popMapMemory.getRuntimeMemoryPage(t,i),r=o.markers[e];if(r){if(r.title.split(" | ").indexOf(n.title)>-1)return;n.title=r.title+" | "+n.title,n.infoWindow.content=n.infoWindow.content+"<hr/>"+r.infoWindow.content,n.icon="https://maps.google.com/mapfiles/ms/icons/red-dot.png"}o.markers[e]=n}};
;"use strict";jQuery,window.popMapRuntime={drawMarkers:function(e,t,r,a){var i=this;popManager.jsInitialized(r)?i.execDrawMarkers(e,t,r,a):r.one("initialize",function(){i.execDrawMarkers(e,t,r,a)})},execDrawMarkers:function(e,t,r,a){var i=popMapRuntimeMemory.getRuntimeMemoryPage(t,r),n="marker-ids-"+removeScheme(e);a.data(n,i.marker_ids[e]);var o=a.data("domains")||[];o.push(e),a.data("domains",o)},resetMarkerIds:function(e,t,r){var a=this;popManager.jsInitialized(r)?a.execResetMarkerIds(e,t,r):r.one("initialize",function(){a.execResetMarkerIds(e,t,r)})},execResetMarkerIds:function(e,t,r){popMapRuntimeMemory.getRuntimeMemoryPage(t,r).marker_ids[e]=[]},setMarkerData:function(e,t,r,a){var i=this;popManager.jsInitialized(t)?i.execSetMarkerData(e,t,r,a):t.one("initialize",function(){i.execSetMarkerData(e,t,r,a)})},execSetMarkerData:function(e,t,r,a){var i=popMapRuntimeMemory.getRuntimeMemoryPage(e,t);i.title||(i.title=r),i.content||(i.content=a)},initMarker:function(e,t,r,a,i,n,o,s){var M=this;popManager.jsInitialized(r)?M.execInitMarker(e,t,r,a,i,n,o,s):r.one("initialize",function(){M.execInitMarker(e,t,r,a,i,n,o,s)})},execInitMarker:function(e,t,r,a,i,n,o,s){var M=this,c=popMapRuntimeMemory.getRuntimeMemoryPage(t,r);M.setMarkerData(t,r,o,s);var p=c.title,m={coordinates:{lat:i,lng:n},title:p,infoWindow:{header:"<strong>"+p+"</strong>",content:c.content},icon:"https://maps.google.com/mapfiles/ms/icons/red-dot.png"},d=M.getMarkerId(e,a);c.marker_ids[e]=c.marker_ids[e]||[],c.marker_ids[e].push(d),popMapInitMarker.initMarker(t,r,d,m),c.content="",c.title=""},getMarkerId:function(e,t){return e+"-"+t}};
;"use strict";!function(e){window.popMapRuntimeMemory={initBlockRuntimeMemoryIndependent:function(e){var t=this,n=e.pageSection,i=e.block;e.runtimeMempage.mapRuntime={},t.resetBlockRuntimeMemory(n,i)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).mapRuntime},resetBlockRuntimeMemory:function(t,n){var i=this.getRuntimeMemoryPage(t,n),r={content:"",title:"",marker_ids:{}};e.extend(i,r)}}}(jQuery),popJSLibraryManager.register(popMapRuntimeMemory,["initBlockRuntimeMemoryIndependent"]);
;"use strict";!function(a){window.popTypeaheadMap={typeaheadMap:function(e){var p=e.domain,t=e.pageSection,r=e.block;e.targets.each(function(){var e=a(this),o=e.find(".pop-typeahead"),n=e.find(".pop-map"),d=e.data("addmarker-template");o.on("selected",function(o,i){var M=popMapRuntime.getMarkerId(p,i.id);if(!popMap.hasMarker(t,r,M)){var m=popManager.getTargetConfiguration(p,t,r,d);a.extend(m,{itemObject:i}),popJSRuntimeManager.setBlockURL(r);var s=popManager.getTemplateHtml(p,t,r,d);popManager.mergeHtml(s,e),popManager.runJSMethods(p,t,r,d,"last"),popJSRuntimeManager.deleteBlockLastSessionIds(p,t,r,d)}n.data("marker-ids-"+removeScheme(p),[M]),n.data("domains",[p]),popMap.addMarkers(p,t,r,n)}),o.on("close",function(a,e,o){var d=popMapRuntime.getMarkerId(p,o);popMap.removeMarker(t,r,n,d)})})}}}(jQuery),popJSLibraryManager.register(popTypeaheadMap,["typeaheadMap"]);
;"use strict";!function(a){window.popMapCollection={formMapLocationGeocode:function(o){var e=o.pageSection,t=o.block;o.targets.find("input.address-input").change(function(){var o=a(this).closest("div.pop-map-locationgeocode"),n=[];o.find("input.address-input").each(function(){var o=a(this);o.val()&&n.push(o.val())});var i=o.find("div.pop-map"),p=o.find("input.address-lat"),r=o.find("input.address-lng");popMap.geocode(e,t,i,n.join(", "),p,r)})},modalMap:function(o){var e=this,t=o.domain;o.targets.on("show.bs.modal",function(o){var n=a(this),i=a(o.relatedTarget);e.execModalMap(t,n,i)})},modalMapBlock:function(a){var o=this,e=a.domain,t=(a.pageSection,a.block,a.targets),n=a.relatedTarget,i=t.closest(".modal");o.execModalMap(e,i,n)},execModalMap:function(a,o,e){e=popManager.getOriginalLink(e);var t=popManager.getBlock(e),n=popManager.getPageSection(t),i=o.find(".pop-map");i.data("markers-pagesection",n),i.data("markers-block",t),i.data("markers-removecurrent",!0);var p=popMap.getMarkerIdsFromLinkURLs(e);i.data("marker-ids-"+removeScheme(a),p),i.data("domains",[a])}}}(jQuery),popJSLibraryManager.register(popMapCollection,["formMapLocationGeocode","modalMap","modalMapBlock"]);
;"use strict";!function(e){window.popFullCalendar={calendar:function(a){var t=this,n=a.domain,r=a.pageSection,o=a.block,l=a.targets,i=popManager.getPageSectionPage(o);i.one("destroy",function(){l.fullCalendar("destroy")}),i.hasClass("tab-pane")&&!popManager.isActive(i)&&i.one("shown.bs.tabpane",function(){l.fullCalendar("render")}),o.on("beforeRender",function(a,t){var n=e(this);t.operation==M.URLPARAM_OPERATION_REPLACE&&popFullCalendarMemory.resetBlockRuntimeMemory(r,n)}),o.on("addedEvents",function(){t.execCalendar(n,r,o,l,"update"),windowResize()}),t.execCalendar(n,r,o,l,"new")},execCalendar:function(a,t,n,r,o){var l,i=this,u=popFullCalendarMemory.getRuntimeMemoryPage(t,n),c=i.getDate(t,n);"new"==o&&(l={header:{left:"title",center:"",right:""},events:function(e,a,t,n){n(u.events)},defaultDate:c,fixedWeekCount:!1,height:"auto",contentHeight:"auto",dayNamesShort:M.DATERANGE_DAYSOFWEEK}),r.each(function(){var r=e(this);i.execFullCalendar(a,t,n,r,o,l)}),i.setDateLoaded(t,n,c)},execFullCalendar:function(a,t,n,r,o,l){var i=this;if("new"==o){var u=popManager.getJsSettings(a,t,n,r),c=u.options||{},d=e.extend({},l,c),s=u.layouts;d.eventRender=function(e,a){i.renderEvent(t,n,s,e,a)},d.eventAfterAllRender=function(e){i.renderEventAfterAll(t,n,s)},r.fullCalendar(d)}else"update"==o&&r.fullCalendar("refetchEvents")},setDateLoaded:function(e,a,t){popFullCalendarMemory.getRuntimeMemoryPage(e,a).loadedDates[t.year()+"-"+(t.month()+1)]=!0},isDateLoaded:function(e,a,t){return!0===popFullCalendarMemory.getRuntimeMemoryPage(e,a).loadedDates[t.year()+"-"+(t.month()+1)]},getDate:function(e,a){var t=popManager.getBlockQueryState(e,a),n=parseInt(t[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]),r=parseInt(t[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]);return moment(n+"-"+r+"-01","YYYY-M-DD")},renderEvent:function(a,t,n,r,o){var l=popFullCalendarMemory.getRuntimeMemoryPage(a,t),i=r.domain,u=r.id;l.eventsHtml[i]=l.eventsHtml[i]||{};var c=l.eventsHtml[i][u];if(c)l.runJS=!0;else{var d={},s=popManager.getDatabaseKeys(i,a,t)["db-key"];c="",popJSRuntimeManager.setBlockURL(t),e.each(n,function(e,n){c+=popManager.getTemplateHtml(i,a,t,n,d,s,u)}),l.eventsHtml[i][u]=c}o.html(c)},renderEventAfterAll:function(a,t,n){var r=popFullCalendarMemory.getRuntimeMemoryPage(a,t);if(popManager.triggerHTMLMerged(),r.runJS){r.runJS=!1;var o=popManager.getQueryMultiDomainUrls(a,t);e.each(o,function(r,o){e.each(n,function(e,n){popManager.runJSMethods(r,a,t,n,"full")})})}},fetch:function(e,a,t){var n=this,r=n.getDate(e,a);t.fullCalendar("gotoDate",r),n.isDateLoaded(e,a,r)||popManager.fetchBlock(e,a,{operation:M.URLPARAM_OPERATION_APPEND})}}}(jQuery),function(e){window.popFullCalendarControls={controlCalendarPrev:function(a){var t=this,n=a.pageSection,r=a.block;a.targets.click(function(a){var o=e(this);t.execute(n,r,o,"prev")})},controlCalendarNext:function(a){var t=this,n=a.pageSection,r=a.block;a.targets.click(function(a){var o=e(this);t.execute(n,r,o,"next")})},setCalendarBlockParams:function(e,a,t){var n=popManager.getBlockQueryState(e,a);n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_YEAR]=t.year(),n[M.DATALOAD_VISIBLEPARAMS][M.URLPARAM_MONTH]=t.month()+1},execute:function(a,t,n,r){var o=this,l=e(n.closest(".pop-calendar-controls").data("target")),i=l.fullCalendar("getDate");"next"==r?i.add(1,"months"):i=i.subtract(1,"months"),o.setCalendarBlockParams(a,t,i),popManager.closeMessageFeedback(t),popFullCalendar.fetch(a,t,l)}}}(jQuery),popJSLibraryManager.register(popFullCalendar,["calendar"]),popJSLibraryManager.register(popFullCalendarControls,["controlCalendarPrev","controlCalendarNext"]);
;"use strict";!function(e){window.popFullCalendarMemory={initBlockRuntimeMemoryIndependent:function(e){var n=this,t=e.pageSection,r=e.block;e.runtimeMempage.fullCalendar={},n.resetBlockRuntimeMemory(t,r)},getRuntimeMemoryPage:function(e,n){return popManager.getRuntimeMemoryPage(e,n).fullCalendar},resetBlockRuntimeMemory:function(n,t){var r=this.getRuntimeMemoryPage(n,t),o={eventsHtml:{},runJS:!1,events:[],loadedEventIds:{},loadedDates:{}};e.extend(r,o)}}}(jQuery),popJSLibraryManager.register(popFullCalendarMemory,["initBlockRuntimeMemoryIndependent"]);
;"use strict";!function(e){window.popFullCalendarAddEvents={addEvents:function(e,d,n){var t=this;n.length&&(popManager.jsInitialized(d)?t.execAddEvents(e,d,n):d.one("initialize",function(){t.execAddEvents(e,d,n)}))},execAddEvents:function(d,n,t){var a=this,o=popFullCalendarMemory.getRuntimeMemoryPage(d,n),i=[];e.each(t,function(e,t){a.isEventLoaded(d,n,t.domain,t.id)||(i.push(t),a.setEventLoaded(d,n,t.domain,t.id))}),e.merge(o.events,i),n.triggerHandler("addedEvents")},setEventLoaded:function(e,d,n,t){var a=popFullCalendarMemory.getRuntimeMemoryPage(e,d);a.loadedEventIds[n]=a.loadedEventIds[n]||{},a.loadedEventIds[n][t]=!0},isEventLoaded:function(e,d,n,t){var a=popFullCalendarMemory.getRuntimeMemoryPage(e,d);return a.loadedEventIds[n]&&!0===a.loadedEventIds[n][t]}}}(jQuery);
;"use strict";function wsl_wordpress_social_login_callback(){if(wsl_login_url&&popUserAccount.isLoggedIn(getDomain(wsl_login_url))&&popWSL.loginBlock){var o=popManager.getPageSection(popWSL.loginBlock),l=M.WSL_LOGINUSER_CLOSETIME||1500;popEventReactions.timeoutClosePageSection(o,l)}}!function(o){window.popWSL={loginBlock:null,wslNetworkLink:function(l){var i=this;l.targets.click(function(l){l.preventDefault();var n=o(this);popupurl=n.data("url");var r=popManager.getBlock(n);i.loginBlock=o(r.data("loginblock")),window.open(popupurl,"hybridauth_social_sing_on","location=1,status=0,scrollbars=0,width=600,height=400")})}}}(jQuery),popJSLibraryManager.register(popWSL,["wslNetworkLink"]);var wsl_login_url="";window.wsl_wordpress_social_login=function(o){var l={params:o};popWSL.loginBlock&&(l["disable-layer"]=popWSL.loginBlock,l["urlfetched-callbacks"]=[wsl_wordpress_social_login_callback]),wsl_login_url="";var i=popBrowserHistory.getApplicationURL(window.location.href),n=getDomain(i);$.each(M.USERLOGGEDIN_DATA_PAGEURLS,function(o,l){if(l.startsWith(n))return wsl_login_url=l,-1}),wsl_login_url&&popUserAccount.fetchLoggedInUserData(wsl_login_url,l)};
;"use strict";jQuery,window.popPPP={loadResourcesDB:function(r){var e=r.url,a=r.path,o=r.config;if(!a&&"1"==getParam(M.PARAMS_PREVIEW,e)){var s=getParam(M.PARAMS_PATH,e);s&&(r.resourcesDB=o.resources.single[s])}}},popJSLibraryManager.register(popPPP,["loadResourcesDB"]);
;"use strict";!function(t){window.popPhotoSwipe={linksImage:function(e){var i=this,r=e.anchor;new PhotoSwipe(t("#pswp")[0],PhotoSwipeUI_Default,i.getItems(r),i.getOptions(r)).init()},getOptions:function(t){return{index:this.getIndex(t),bgOpacity:.8,showHideOpacity:!0,history:!1,loop:!1,shareButtons:[{id:"download",label:M.LABELS.DOWNLOAD,url:"{{raw_image_url}}?fileaction=download",download:!0}]}},getItem:function(t){var e=t.children("img"),i={src:t.attr("href"),msrc:e.attr("src"),w:640,h:480};if(e.attr("width")&&e.attr("height")&&(i.w=e.attr("width"),i.h=e.attr("height")),t.data("size")){var r=t.data("size").split("x");i.w=r[0],i.h=r[1]}return t.attr("title")?i.title=t.attr("title"):e.attr("alt")&&(i.title=e.attr("alt")),i},getItems:function(e){var i=this,r=[],a=e.closest(".gallery");return a.length?a.find(".gallery-item a").each(function(){r.push(i.getItem(t(this)))}):r.push(i.getItem(e)),r},getIndex:function(t){var e=t.closest(".gallery-item");return e.length?e.index():0}}}(jQuery),popJSLibraryManager.register(popPhotoSwipe,["linksImage"]);
;"use strict";jQuery,window.popConditionFunctions={isUserIdSameAsLoggedInUser:function(n){var e=n.domain;if(popUserAccount.isLoggedIn(e)){var o=n.input;return popUserAccount.getLoggedInUserId(e)==o}return!1}},popJSLibraryManager.register(popConditionFunctions,["isUserIdSameAsLoggedInUser"]);
;"use strict";!function(e){window.popCustomFunctions={addPageSectionIds:function(e){var a=e.domain,o=e.pageSection,n=e.template,t=popManager.getSettingsId(o),i=o.attr("id");i==M.PS_HOVER_ID?popJSRuntimeManager.addPageSectionId(a,t,n,i,"closehover"):i==M.PS_FRAME_NAVIGATOR_ID?popJSRuntimeManager.addPageSectionId(a,t,n,i,"closenavigator"):i==M.PS_ADDONS_ID&&(popJSRuntimeManager.addPageSectionId(a,t,n,i,"window-fullsize"),popJSRuntimeManager.addPageSectionId(a,t,n,i,"window-maximize"),popJSRuntimeManager.addPageSectionId(a,t,n,i,"window-minimize"))},pageSectionInitialized:function(e){var a=e.pageSection;a.attr("id")==M.PS_PAGETABS_ID&&popManager.getPageSectionGroup(a).on("on.bs.pagesection-group:pagesection-"+M.PS_HOVER_ID+":closed",function(){a.find("a.pop-pagetab-btn.active").trigger("click")})},pageSectionNewDOMsBeforeInitialize:function(a){var o=this,n=a.pageSection,t=a.newDOMs,i=a.inactivePane,r=n.attr("id");i=!0===i&&t.siblings(".pop-pagesection-page").length>0;var s=popManager.isFirstLoad(n),p=t.filter(".tab-pane"),d=[M.PS_PAGETABS_ID,M.PS_ADDONTABS_ID];if([M.PS_MAIN_ID,M.PS_ADDONS_ID].indexOf(r)>-1){if(i){if(r==M.PS_MAIN_ID){var c=e("#"+M.PS_PAGETABS_ID);popPageSectionManager.open(c),popPageSectionManager.open(c,"xs")}}else p.addClass("active");if(r==M.PS_ADDONS_ID)p.on("shown.bs.tabpane",function(){o.handleWindow(n,"minimized")}),i||s||o.handleWindow(n,"minimized");else{var l=e("#"+M.PS_ADDONS_ID);p.on("shown.bs.tabpane",function(){o.handleWindow(l,"fullsize")}),i||s||o.handleWindow(l,"fullsize")}}else d.indexOf(r)>-1&&i&&t.filter(".pop-pagesection-page").find(".pop-pagetab-btn").addClass("pop-highlight");var S=[M.PS_MAIN_ID,M.PS_HOVER_ID,M.PS_ADDONS_ID,M.PS_FRAME_NAVIGATOR_ID],_=[M.PS_QUICKVIEW_ID,M.PS_QUICKVIEWINFO_ID],g=[M.PS_SIDEINFO_ID],u=[M.PS_MODALS_ID];if(S.indexOf(r)>-1){var I=r==M.PS_MAIN_ID,g=e("#"+M.PS_SIDEINFO_ID+",#"+M.PS_FRAME_SIDE_ID+",#"+M.PS_FRAME_NAVIGATOR_ID);popCustomBootstrap.activateTabPanes(n,t,i,I,g)}else d.indexOf(r)>-1?popCustomBootstrap.activatePageTabs(n,t,i):g.indexOf(r)>-1?popCustomBootstrap.activateSideTabpanes(n,t,i):_.indexOf(r)>-1?popCustomBootstrap.activateQuickviewTabpanes(n,t,i):u.indexOf(r)>-1&&popCustomBootstrap.activateModals(n,t)},getEmbedUrl:function(e){var a=this,o=e.url;return a.addURLParams(add_query_arg(M.URLPARAM_THEMEMODE,M.THEMEMODE_WASSUP_EMBED,o))},getUnembedUrl:function(e){var a=e.url;return removeQueryFields(a,[M.URLPARAM_THEMEMODE])},getPrintUrl:function(e){var a=this,o=e.url;return a.addURLParams(add_query_arg(M.URLPARAM_ACTION,M.URLPARAM_ACTION_PRINT,add_query_arg(M.URLPARAM_THEMEMODE,M.THEMEMODE_WASSUP_PRINT,o)))},scrollToElem:function(e){var a=this,o=e.elem,n=e.position,t=e.animate,i=popManager.getPageSection(n),r=n.offset().top-i.offset().top;return a.execScrollTop(o,r,t)},scrollTop:function(e){var a=this,o=e.elem,n=e.top,t=e.animate;return a.execScrollTop(o,n,t)},getPosition:function(e){var a=e.elem;return a.attr("id")!=M.PS_MAIN_ID||a.hasClass("perfect-scrollbar")?0:window.pageYOffset||document.documentElement.scrollTop||body.scrollTop||0},closeMessageFeedback:function(a){var o=a.elem;e(document).ready(function(e){o.find(".pop-messagefeedback").removeClass("fade").alert("close")})},closeMessageFeedbacks:function(a){var o=a.pageSection;e(document).ready(function(e){o.find(".pop-messagefeedback").removeClass("fade").alert("close")})},execScrollTop:function(a,o,n){return a.attr("id")==M.PS_MAIN_ID&&!a.hasClass("perfect-scrollbar")&&(n?e("html, body").animate({scrollTop:o},"fast"):window.scrollTo(0,o),!0)},addURLParams:function(e){return M.THEMESTYLE&&(e=add_query_arg(M.URLPARAM_THEMESTYLE,M.THEMESTYLE,e)),e},handleWindow:function(e,a){var o=e.closest(".window");popWindow.getSize(o)==a&&popWindow.maximize(o)}}}(jQuery),popJSLibraryManager.register(popCustomFunctions,["addPageSectionIds","pageSectionNewDOMsBeforeInitialize"],!0),popJSLibraryManager.register(popCustomFunctions,["pageSectionInitialized","getEmbedUrl","getUnembedUrl","getPrintUrl","getPosition","scrollToElem","scrollTop","closeMessageFeedback","closeMessageFeedbacks"]);
;"use strict";function showTopNav(){popPageSectionManager.open(popCustomPageSectionManager.getTopNav())}function hideTopNav(){popPageSectionManager.close(popCustomPageSectionManager.getTopNav())}!function(o){window.popCustomPageSectionManager={enableShowHideTopNav:function(){o(window).on("scroll:down",hideTopNav),o(window).on("scroll:up",showTopNav)},disableShowHideTopNav:function(){o(window).off("scroll:down",hideTopNav),o(window).off("scroll:up",showTopNav)},getTopNav:function(){return popPageSectionManager.getGroup().find(".offcanvas-topnav")}}}(jQuery);
;"use strict";!function(e){window.popUserRole={filterByCommunity:function(r){var t=r.domain,a=r.pageSection,i=r.block;r.targets.change(function(r){var o=e(this),c=o.val(),n=e(o.data("target"));if(o.is(":checked")){var p=o.data("user-datum");popTypeaheadTriggerSelect.triggerSelect(t,a,i,n,p)}else popTypeaheadTriggerSelect.removeSelected(n,c)})}}}(jQuery),popJSLibraryManager.register(popUserRole,["filterByCommunity"]);
;"use strict";jQuery,window.popUREAAL={isActionUpdatedUserMembership:function(i){return i.input==M.ACTION_USER_UPDATEDUSERMEMBERSHIP},isActionJoinedCommunity:function(i){return i.input==M.ACTION_USER_JOINEDCOMMUNITY},isObjectTypeUser:function(i){return i.input==M.OBJECTTYPE_USER}},popJSLibraryManager.register(popUREAAL,["isActionUpdatedUserMembership","isActionJoinedCommunity","isObjectTypeUser"]);