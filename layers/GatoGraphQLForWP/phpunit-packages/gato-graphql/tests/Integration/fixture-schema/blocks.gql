{
  posts(pagination: { limit: 6 }) {
    id
    title
    blocks {
      ...BlockData
    }
    blockDataItems
    blockFlattenedDataItems
  }

  includeBlockFilter1: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        include: "core/heading"
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        include: "core/heading"
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        include: "core/heading"
      }
    )
  }

  includeBlockFilter2: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        include: [
          "core/heading",
          "core/columns"
        ]
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        include: [
          "core/heading",
          "core/columns"
        ]
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        include: [
          "core/heading",
          "core/columns"
        ]
      }
    )
  }

  includeBlockFilter3: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        include: [
          "core/heading",
          "core/columns",
          "core/column"
        ]
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        include: [
          "core/heading",
          "core/columns",
          "core/column"
        ]
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        include: [
          "core/heading",
          "core/columns",
          "core/column"
        ]
      }
    )
  }

  includeBlockFilter4: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        include: [
          "core/heading",
          "core/column"
        ]
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        include: [
          "core/heading",
          "core/column"
        ]
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        include: [
          "core/heading",
          "core/column"
        ]
      }
    )
  }

  excludeBlockFilter1: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        exclude: "core/heading"
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        exclude: "core/heading"
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        exclude: "core/heading"
      }
    )
  }

  excludeBlockFilter2: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        exclude: [
          "core/heading",
          "core/columns"
        ]
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        exclude: [
          "core/heading",
          "core/columns"
        ]
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        exclude: [
          "core/heading",
          "core/columns"
        ]
      }
    )
  }

  excludeBlockFilter3: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        exclude: [
          "core/heading",
          "core/columns",
          "core/column"
        ]
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        exclude: [
          "core/heading",
          "core/columns",
          "core/column"
        ]
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        exclude: [
          "core/heading",
          "core/columns",
          "core/column"
        ]
      }
    )
  }

  excludeBlockFilter4: post(by: { id: 19 }) {
    id
    blocks(
      filterBy: {
        exclude: [
          "core/heading",
          "core/column"
        ]
      }
    ) {
      ...BlockData
    }
    blockDataItems(
      filterBy: {
        exclude: [
          "core/heading",
          "core/column"
        ]
      }
    )
    blockFlattenedDataItems(
      filterBy: {
        exclude: [
          "core/heading",
          "core/column"
        ]
      }
    )
  }

  page(by: { id: 2 }) {
    id
    title
    blocks {
      ...BlockData
    }
    blockDataItems
    blockFlattenedDataItems
  }

  customPost(by: { id: 654 }) {
    __typename
    ...on GenericCustomPost {
      id
      title
      contentSource
      customPostType
      blocks {
        ...BlockData
      }
      blockDataItems
      blockFlattenedDataItems
    }
  }

  contentWithoutBlocks: customPost(by: { id: 619 }) {
    __typename
    ...on GenericCustomPost {
      id
      title
      contentSource
      customPostType
      blocks {
        ...BlockData
      }
      blockDataItems
      blockFlattenedDataItems
    }
  }

  nonExistingBlocks: customPost(by: { id: 656 }) {
    __typename
    ...on GenericCustomPost {
      id
      title
      contentSource
      customPostType
      blocks {
        ...BlockData
      }
      blockDataItems
      blockFlattenedDataItems
    }
  }

  noContent: customPost(by: { id: 658 }) {
    __typename
    ...on GenericCustomPost {
      id
      title
      contentSource
      customPostType
      blocks {
        ...BlockData
      }
      blockDataItems
      blockFlattenedDataItems
    }
  }

  serverSideRegisteredBlocks: customPost(by: { id: 680 }) {
    __typename
    ...on GenericCustomPost {
      id
      title
      contentSource
      customPostType
      blocks {
        ...BlockData
      }
      blockDataItems
      blockFlattenedDataItems
    }
  }

  notServerSideRegisteredBlocks: customPost(by: { id: 660 }) {
    __typename
    ...on GenericCustomPost {
      id
      title
      contentSource
      customPostType
      blocks {
        ...BlockData
      }
      blockDataItems
      blockFlattenedDataItems
    }
  }
  
  # This post contains blocks containing blocks containing blocks
  singleLevelBlockPost: post(by: {id: 28}) {
    id
    title
    blocks {
      ...BlockData
    }
    blockDataItems
    blockFlattenedDataItems
  }

  # This post contains blocks containing blocks containing blocks,
  # and a last level with empty attributes (that must be returned)
  # as {}, not as []
  multiLevelBlockPost: post(by: {id: 40}) {
    id
    title
    blocks {
      ...BlockData
    }
    blockDataItems
    blockFlattenedDataItems
  }
}

fragment BlockData on Block {
  name
  attributes
  # innerHTML
  contentSource
  innerBlocks {
    name
    attributes
    # innerHTML
    contentSource
    innerBlocks {
      name
      attributes
      # innerHTML
      contentSource
      innerBlocks {
        name
        attributes
        # innerHTML
        contentSource
        innerBlocks {
          name
          attributes
          # innerHTML
          contentSource
          innerBlocks {
            name
            attributes
            # innerHTML
            contentSource
            innerBlocks {
              name
              attributes
              # innerHTML
              contentSource
              innerBlocks {
                name
                attributes
                # innerHTML
                contentSource
              }
            }
          }
        }
      }
    }
  }
}
