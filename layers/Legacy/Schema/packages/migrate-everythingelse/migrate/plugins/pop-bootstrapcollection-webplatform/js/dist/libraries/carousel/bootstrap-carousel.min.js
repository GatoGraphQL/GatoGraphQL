"use strict";!function(e){window.popBootstrapCarousel={prepareCarousel:function(e,t,o){var n=this;t.on("rendered",function(){n.targetsAddActive(o)}),n.targetsAddActive(o)},targetsAddActive:function(t){var o=this;t.each(function(){var t=e(this);o.addActive(t)})},addActive:function(e){0==e.find(".item.active").length&&e.find(".item:first-child").addClass("active")},showElement:function(e,t){var o=this,n=t.closest(".item"),a=n.parent().children().index(n);o.slideTo(e,a)},slideTo:function(e,t){e.carousel(t)},next:function(e){e.carousel("next")},prev:function(e){e.carousel("prev")},isFirstSlide:function(e){return e.find(".item:first-child").hasClass("active")},isLastSlide:function(e){return e.find(".item:last-child").hasClass("active")},isNthSlide:function(e,t){return e.find(".item:nth-child("+t+")").hasClass("active")},isNthLastSlide:function(e,t){return e.find(".item:nth-last-child("+t+")").hasClass("active")},numberSlides:function(e){return e.find(".item").length}}}(jQuery),function(e){window.popBootstrapCarouselControls={initBlockRuntimeMemoryIndependent:function(e){var t=this,o=e.pageSection,n=e.block;e.runtimeMempage.carouselControls={},t.resetBlockRuntimeMemory(o,n)},carouselControls:function(e){var t=this,o=e.pageSection,n=e.block,a=e.targets,i=t.getCarousel(a),r=a.children(".pop-carousel-control.right");t.controlCarouselNext(o,n,i,a,r);var s=a.children(".pop-carousel-control.left");t.controlCarouselPrev(o,n,i,a,s),n.on("fetchDomainCompleted",function(e,i,r){t.handleReload(r,o,n,a)}),t.setEnabledDisabled(o,n,a)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).carouselControls},resetBlockRuntimeMemory:function(t,o){var n=this.getRuntimeMemoryPage(t,o),a={state:""};e.extend(n,a)},slideNext:function(e,t,o,n){var a=this;popBootstrapCarousel.isNthLastSlide(o,2)&&popManager.stopFetchingBlock(e,t)&&a.disable(n),a.enable(n.siblings(".pop-carousel-control.left")),popBootstrapCarousel.next(o)},controlCarouselNext:function(t,o,n,a,i){var r=this,s=popManager.getBlockQueryState(t,o);i.click(function(a){a.preventDefault();var i=e(this);if(!r.disabled(i))if(popBootstrapCarousel.isLastSlide(n)){if(s.loading.length||popManager.stopFetchingBlock(t,o))return;popManager.fetchBlock(t,o,{operation:M.URLPARAM_OPERATION_APPEND}),r.setControlState(t,o,"loading")}else r.slideNext(t,o,n,i)})},controlCarouselPrev:function(t,o,n,a,i){var r=this;i.click(function(t){t.preventDefault();var o=e(this);r.disabled(o)||(popBootstrapCarousel.isNthSlide(n,2)&&r.disable(o),popBootstrapCarousel.numberSlides(n)>1&&r.enable(o.siblings(".pop-carousel-control.right")),popBootstrapCarousel.prev(n))})},handleReload:function(e,t,o,n){var a=this,i=popManager.getBlockDataset(e,t,o);if(a.setEnabledDisabled(t,o,n),i&&i.length&&"loading"==a.getControlState(t,o)){var r=a.getCarousel(n),s=n.children(".pop-carousel-control.right");a.slideNext(t,o,r,s)}a.setControlState(t,o,"")},getControlState:function(e,t){return this.getRuntimeMemoryPage(e,t).state},setControlState:function(e,t,o){this.getRuntimeMemoryPage(e,t).state=o},getCarousel:function(t){return e(t.data("target"))},setEnabledDisabled:function(e,t,o){var n=this,a=n.getCarousel(o),i=o.children(".pop-carousel-control.left"),r=o.children(".pop-carousel-control.right");0==popBootstrapCarousel.numberSlides(a)?(n.disable(i),n.disable(r)):(popBootstrapCarousel.isFirstSlide(a)?n.disable(i):n.enable(i),popBootstrapCarousel.isLastSlide(a)&&popManager.stopFetchingBlock(e,t)?n.disable(r):n.enable(r))},disable:function(e){e.addClass("disabled"),e.attr("disabled",!0)},enable:function(e){e.removeClass("disabled"),e.attr("disabled",!1)},disabled:function(e){return e.hasClass("disabled")}}}(jQuery),popJSLibraryManager.register(popBootstrapCarouselControls,["initBlockRuntimeMemoryIndependent","controlCarouselPrev","controlCarouselNext","carouselControls"]);