"use strict";function getMultiLayoutKey(e,t){var r=M.MULTILAYOUT_KEYFIELDS[e]||[];if(!r.length)return"default";var n=[];return jQuery.each(r,function(e,r){n.push(t[r])}),n.join("-")}Handlebars.registerHelper("showmore",function(e,t){var r=t.hash.len||0;if(r>0&&e.length>r+100){var n=r,a='<a href="#" class="pop-showmore-more">'+M.STRING_MORE+"</a>",s='<a href="#" class="pop-showmore-less hidden">'+M.STRING_LESS+"</a>",i=!1,o=!0;if(e.length>n&&e.substr(r).indexOf("</p>")>-1&&(i=!0,o=!1,n=r+(e=e.substr(0,r)+'<span class="pop-showmore-more-full hidden">'+e.substr(r,e.substr(r).indexOf("</p>"))+"</span> "+a+e.substr(r+e.substr(r).indexOf("</p>"))).substr(r).indexOf("</p>")+"</p>".length),i||e.length>n){var h=e.substr(n),p=h.trim().length;if(i||p){var d='<span class="pop-showmore-more-teaser">'+e.substr(0,n)+"</span>"+(p?'<span class="pop-showmore-more-full hidden">'+h+"</span> ":" ")+(o?a:"")+s;return new Handlebars.SafeString(d)}}}return e}),Handlebars.registerHelper("ondate",function(e,t){return new Handlebars.SafeString(M.ONDATE.format(e))}),Handlebars.registerHelper("addParam",function(e,t,r,n){return jQuery.isArray(r)||(r=[r]),jQuery.each(r,function(r,n){e=add_query_arg(t,n,e)}),e}),Handlebars.registerHelper("destroyUrl",function(e,t){return new Handlebars.SafeString(popManager.getDestroyUrl(e))}),Handlebars.registerHelper("statusLabel",function(e,t){var r='<span class="label '+M.STATUS.class[e]+" label-"+e+'">'+M.STATUS.text[e]+"</span>";return new Handlebars.SafeString(r)}),Handlebars.registerHelper("labelize",function(e,t,r){var n="";if(e)for(var a=0;a<e.length;a++)n+='<span class="label '+t+" "+(M.LABELIZE_CLASSES[e[a]]?M.LABELIZE_CLASSES[e[a]]:"")+'">'+e[a]+"</span> ";return new Handlebars.SafeString(n)}),Handlebars.registerHelper("mod",function(e,t,r){if(arguments.length<3)throw new Error("Handlebars Helper equal needs 2 parameters");return(e+(r.hash.offset||0))%t==0?r.fn(this):r.inverse(this)}),Handlebars.registerHelper({eq:function(e,t){return e===t},or:function(e,t){return e||t}}),Handlebars.registerHelper("compare",function(e,t,r){if(arguments.length<3)throw new Error("Handlerbars Helper 'compare' needs 2 parameters");var n=r.hash.operator||"==",a={eq:function(e,t){return e==t||e.toString()==t.toString()},"==":function(e,t){return e==t},"===":function(e,t){return e===t},"!=":function(e,t){return e!=t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},typeof:function(e,t){return typeof e==t},in:function(e,t){return t.indexOf(e)>=0},notin:function(e,t){return-1==t.indexOf(e)}};if(!a[n])throw new Error("Handlerbars Helper 'compare' doesn't know the operator "+n);return a[n](e,t)?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("get",function(e,t,r){return void 0===e||void 0===e[t]?"":e[t]}),Handlebars.registerHelper("ifget",function(e,t,r){if(void 0===e)return"";var n=r.hash.context||this,a=!1;if(r.hash.method){var s=popJSLibraryManager.execute(r.hash.method,{domain:n.tls.domain,input:e[t]});jQuery.each(s,function(e,t){if(t)return a=!0,-1})}else a=e[t];return a?r.fn(this):r.inverse(this)}),Handlebars.registerHelper("withget",function(e,t,r){if(void 0===e||void 0===e[t])return"";var n=e[t];return"object"===jQuery.type(n)&&popManager.expandJSKeys(n),r.fn(n)}),Handlebars.registerHelper("iffirstload",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId;return popManager.isFirstLoad(r)?e.fn(this):e.inverse(this)}),Handlebars.registerHelper("interceptAttr",function(e){var t=(e.hash.context||this)[M.JS_INTERCEPT]||{};return new Handlebars.SafeString((t[M.JS_TYPE]?' data-intercept="'+t[M.JS_TYPE]+'"':"")+(t.settings?' data-intercept-settings="'+t[M.JS_SETTINGS]+'"':"")+(t[M.JS_TARGET]?' target="'+t[M.JS_TARGET]+'"':"")+(t[M.JS_SKIPSTATEUPDATE]?' data-intercept-skipstateupdate="true"':"")+' style="display: none;"')}),Handlebars.registerHelper("generateId",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId,n=e.hash.targetId||t.bs.bsId,a=e.hash.template||t[M.JS_TEMPLATE],s=e.hash.fixed||t[M.JS_FIXEDID],i=e.hash.idUnique||t[M.JS_ISIDUNIQUE],o=e.hash.group,h=e.fn(this),p=t.ignorePSRuntimeId,d=t.tls.domain,u=e.hash.addURL?t.tls.feedback[M.URLPARAM_URL]:"";u&&popJSRuntimeManager.setBlockURL(u);var l=popJSRuntimeManager.addTemplateId(d,r,n,a,h,o,s,i,p),S=[];return S.push('id="'+l+'"'),S.push('data-templateid="'+a+'"'),u&&(S.push("data-"+M.PARAMS_TOPLEVEL_URL+'="'+u+'"'),S.push("data-"+M.PARAMS_TOPLEVEL_DOMAIN+'="'+getDomain(u)+'"')),new Handlebars.SafeString(S.join(" "))}),Handlebars.registerHelper("lastGeneratedId",function(e){var t=e.hash.context||this,r=e.hash.pssId||t.pss.pssId,n=e.hash.targetId||t.bs.bsId,a=e.hash.template||t[M.JS_TEMPLATE],s=e.hash.domain||t.tls.domain,i=e.hash.group;return popJSRuntimeManager.getLastGeneratedId(s,r,n,a,i)}),Handlebars.registerHelper("applyLightTemplate",function(e,t){var r=t.hash.context||this,n=popManager.getHtml(e,r);return new Handlebars.SafeString(n)}),Handlebars.registerHelper("json",function(e){return JSON.stringify(e)}),Handlebars.registerHelper("enterModule",function(e,t){var r=t.hash.context||this,n=t.hash.template||r[M.JS_TEMPLATE],a=e.tls,s=e.pss,i=e.bs,o=e.itemObject,h=e.itemObjectDBKey,p=e.ignorePSRuntimeId,d=void 0!==t.hash.itemDBKey?t.hash.itemDBKey:e.itemDBKey,u={itemObject:o,itemObjectDBKey:h,itemDBKey:d,items:void 0!==t.hash.items?t.hash.items:e.items,tls:a,pss:s,bs:i,ignorePSRuntimeId:p},l=a.domain,S=s.pssId,m=s.psId,c=i.bsId,f=i.bId;jQuery.extend(r,popManager.getRuntimeConfiguration(l,S,c,n)),popManager.expandJSKeys(r);var g=t.hash.itemObjectId;"array"===jQuery.type(g)&&(g.length?g=g[0]:(g=null,o=null,u.itemObject=o)),t.hash.itemDBKey&&g?(d=t.hash.itemDBKey,o=popManager.getItemObject(l,d,g),u.itemObject=o,u.itemObjectDBKey=d,u.itemDBKey=d,u.items=[g]):t.hash.itemDBKey&&t.hash.items?(u.itemDBKey=t.hash.itemDBKey,u.items=t.hash.items):t.hash.subcomponent&&g?(d=i["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],o=popManager.getItemObject(l,d,g),u.itemObject=o,u.itemObjectDBKey=d,u.itemDBKey=d,u.items=[g]):t.hash.subcomponent&&t.hash.items?(d=i["db-keys"][M.JS_SUBCOMPONENTS][t.hash.subcomponent]["db-key"],u.itemDBKey=d,u.items=t.hash.items):t.hash.items?u.items=t.hash.items:t.hash.itemDBKey&&(u.itemDBKey=t.hash.itemDBKey,u.itemObject=null,u.itemObjectDBKey=null,u.items=null),u.items&&"array"!==jQuery.type(u.items)&&(u.items=[u.items]),t.hash["feedback-msg"]&&(u["feedback-msg"]=t.hash["feedback-msg"]);var b=[],y=[],E=[];r[M.JS_MODULEOPTIONS]&&(b=r[M.JS_MODULEOPTIONS][M.JS_OVERRIDEFROMITEMOBJECT]||[],y=r[M.JS_MODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),r[M.JS_RUNTIMEMODULEOPTIONS]&&(E=r[M.JS_RUNTIMEMODULEOPTIONS][M.JS_REPLACESTRFROMITEMOBJECT]||[]),b.length&&popManager.overrideFromItemObject(o,u,b);var H=y.concat(E);H.length&&popManager.replaceFromItemObject(l,S,c,n,o,u,H);var I=t.hash.parentContext||{};if(I){u["parent-context"]=I;for(var O=I;O["parent-context"];)O=O["parent-context"];u["root-context"]=O}jQuery.extend(r,u);var T=popManager.getHtml(n,r),v={response:T,context:r,templateName:n,domain:l,pssId:S,psId:m,bsId:c,bId:f};return popJSLibraryManager.execute("handlebarsHelperEnterModuleResponse",v),T=v.response,t.hash.unsafe?T:new Handlebars.SafeString(T)}),Handlebars.registerHelper("withLayout",function(e,t,r,n,a){var s=n.tls.domain,i=r[getMultiLayoutKey(e,popManager.getItemObject(s,e,t))];if(i||(i=r.default),!i)return"";var o=n[M.JS_MODULES][i];return jQuery.extend(o,{itemDBKey:e,itemObjectId:t}),popManager.expandJSKeys(o),a.fn(o)}),Handlebars.registerHelper("layoutLabel",function(e,t,r){var n=getMultiLayoutKey(e,t);return M.MULTILAYOUT_LABELS[n]||""}),Handlebars.registerHelper("withBlock",function(e,t,r){if(void 0!==e&&void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][t])return e=e[M.JS_MODULES][t],popManager.expandJSKeys(e),r.fn(e)}),Handlebars.registerHelper("withModule",function(e,t,r){if(void 0!==e&&void 0!==e[M.JS_SETTINGSIDS]&&void 0!==e[M.JS_SETTINGSIDS][t]){var n=e[M.JS_SETTINGSIDS][t];if(void 0!==e[M.JS_MODULES]&&void 0!==e[M.JS_MODULES][n])return e=e[M.JS_MODULES][n],popManager.expandJSKeys(e),jQuery.extend(e,r.hash),r.fn(e)}}),Handlebars.registerHelper("withSublevel",function(e,t){var r=t.hash.context||this;return"object"===jQuery.type(r)&&popManager.expandJSKeys(r),t.fn(r[e])}),Handlebars.registerHelper("withItemObject",function(e,t,r){var n=(a=r.hash.context||this).tls.domain,a=popManager.getItemObject(n,e,t);return r.fn(a)});
;"use strict";function getDomain(A){var u=A.split("/");return u[0]+"//"+u[2]}function removeScheme(A){var u=A.split("//");return 1==u.length?u[0]:u[1]}function getDomainId(A){return removeScheme(A).replace(/\./g,"-")}function unescapeHtml(A){var u=document.createElement("div");return u.innerHTML=A,u.innerText||u.text||u.textContent}function add_query_arg(A,u,e){return e+=(e.split("?")[1]?"&":"?")+A+"="+u}function removeQueryFields(A,u){if(!u||!u.length)return A;var e=document.createElement("a");e.href=A;var r=e.search.slice(1).split("&").map(function(A){return A.split("=")}).filter(function(A){return u.every(function(u){return u!=A[0]})}).map(function(A){return A.join("=")}).join("&");return e.protocol+"//"+e.host+e.pathname+(r?"?"+r:"")+e.hash}function removeParams(A){return A.indexOf("?")>-1?A.substr(0,A.indexOf("?")):A}function getParams(A){if(A.indexOf("?")>-1){var u=A.substr(A.indexOf("?")+1);return u.indexOf("#")>-1&&(u=u.substr(0,u.indexOf("#"))),u}return""}function getParam(A,u){return splitUrlParams(u?getParams(u):window.location.search.substring(1))[A]}function splitUrlParams(A){return void 0!==urlParams[A]?urlParams[A]:(urlParams[A]=jQuery.extend({},splitParams(A)),urlParams[A])}function splitParams(A){for(var u,e={},r=function(A){return decodeURIComponent(A).replace(/\+/g," ")},n=decodeURI(A),t=/([^&=]+)=?([^&]*)/g;u=t.exec(n);)if("-1"==u[1].indexOf("["))e[r(u[1])]=r(u[2]);else{var F=u[1].indexOf("["),o=u[1].slice(F+1,u[1].indexOf("]",F)),a=r(u[1].slice(0,F));"object"!=typeof e[a]&&(e[r(a)]={}),o?e[r(a)][r(o)]=r(u[2]):Array.prototype.push.call(e[r(a)],r(u[2]))}return e}function searchInObject(A,u){for(var e in A)if(Object.prototype.hasOwnProperty.call(A,e)&&A[e]==u)return!0;return!1}function getRandomInt(A,u){return Math.floor(Math.random()*(u-A+1)+A)}function doScroll(A,u){u=u||!1;var e=A.offset().top-20;u?jQuery("html, body").animate({scrollTop:e}):window.scrollTo(0,e)}function removeMarker(A){return A.indexOf("#")>-1?A.substr(0,A.indexOf("#")):A}function counterNext(){return++counter}function windowResize(){var A=document.createEvent("UIEvents");A.initUIEvent("resize",!0,!1,window,0),window.dispatchEvent(A)}function isUrlValid(A){return/^(https?):\/\/(((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:)*@)?(((\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5])\.(\d|[1-9]\d|1\d\d|2[0-4]\d|25[0-5]))|((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?)(:\d*)?)(\/((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)+(\/(([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)*)*)?)?(\?((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|[\uE000-\uF8FF]|\/|\?)*)?(#((([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(%[\da-f]{2})|[!\$&'\(\)\*\+,;=]|:|@)|\/|\?)*)?$/i.test(A)}function beep(){new Audio("data:audio/wav;base64,//uQRAAAAWMSLwUIYAAsYkXgoQwAEaYLWfkWgAI0wWs/ItAAAGDgYtAgAyN+QWaAAihwMWm4G8QQRDiMcCBcH3Cc+CDv/7xA4Tvh9Rz/y8QADBwMWgQAZG/ILNAARQ4GLTcDeIIIhxGOBAuD7hOfBB3/94gcJ3w+o5/5eIAIAAAVwWgQAVQ2ORaIQwEMAJiDg95G4nQL7mQVWI6GwRcfsZAcsKkJvxgxEjzFUgfHoSQ9Qq7KNwqHwuB13MA4a1q/DmBrHgPcmjiGoh//EwC5nGPEmS4RcfkVKOhJf+WOgoxJclFz3kgn//dBA+ya1GhurNn8zb//9NNutNuhz31f////9vt///z+IdAEAAAK4LQIAKobHItEIYCGAExBwe8jcToF9zIKrEdDYIuP2MgOWFSE34wYiR5iqQPj0JIeoVdlG4VD4XA67mAcNa1fhzA1jwHuTRxDUQ//iYBczjHiTJcIuPyKlHQkv/LHQUYkuSi57yQT//uggfZNajQ3Vmz+Zt//+mm3Wm3Q576v////+32///5/EOgAAADVghQAAAAA//uQZAUAB1WI0PZugAAAAAoQwAAAEk3nRd2qAAAAACiDgAAAAAAABCqEEQRLCgwpBGMlJkIz8jKhGvj4k6jzRnqasNKIeoh5gI7BJaC1A1AoNBjJgbyApVS4IDlZgDU5WUAxEKDNmmALHzZp0Fkz1FMTmGFl1FMEyodIavcCAUHDWrKAIA4aa2oCgILEBupZgHvAhEBcZ6joQBxS76AgccrFlczBvKLC0QI2cBoCFvfTDAo7eoOQInqDPBtvrDEZBNYN5xwNwxQRfw8ZQ5wQVLvO8OYU+mHvFLlDh05Mdg7BT6YrRPpCBznMB2r//xKJjyyOh+cImr2/4doscwD6neZjuZR4AgAABYAAAABy1xcdQtxYBYYZdifkUDgzzXaXn98Z0oi9ILU5mBjFANmRwlVJ3/6jYDAmxaiDG3/6xjQQCCKkRb/6kg/wW+kSJ5//rLobkLSiKmqP/0ikJuDaSaSf/6JiLYLEYnW/+kXg1WRVJL/9EmQ1YZIsv/6Qzwy5qk7/+tEU0nkls3/zIUMPKNX/6yZLf+kFgAfgGyLFAUwY//uQZAUABcd5UiNPVXAAAApAAAAAE0VZQKw9ISAAACgAAAAAVQIygIElVrFkBS+Jhi+EAuu+lKAkYUEIsmEAEoMeDmCETMvfSHTGkF5RWH7kz/ESHWPAq/kcCRhqBtMdokPdM7vil7RG98A2sc7zO6ZvTdM7pmOUAZTnJW+NXxqmd41dqJ6mLTXxrPpnV8avaIf5SvL7pndPvPpndJR9Kuu8fePvuiuhorgWjp7Mf/PRjxcFCPDkW31srioCExivv9lcwKEaHsf/7ow2Fl1T/9RkXgEhYElAoCLFtMArxwivDJJ+bR1HTKJdlEoTELCIqgEwVGSQ+hIm0NbK8WXcTEI0UPoa2NbG4y2K00JEWbZavJXkYaqo9CRHS55FcZTjKEk3NKoCYUnSQ0rWxrZbFKbKIhOKPZe1cJKzZSaQrIyULHDZmV5K4xySsDRKWOruanGtjLJXFEmwaIbDLX0hIPBUQPVFVkQkDoUNfSoDgQGKPekoxeGzA4DUvnn4bxzcZrtJyipKfPNy5w+9lnXwgqsiyHNeSVpemw4bWb9psYeq//uQZBoABQt4yMVxYAIAAAkQoAAAHvYpL5m6AAgAACXDAAAAD59jblTirQe9upFsmZbpMudy7Lz1X1DYsxOOSWpfPqNX2WqktK0DMvuGwlbNj44TleLPQ+Gsfb+GOWOKJoIrWb3cIMeeON6lz2umTqMXV8Mj30yWPpjoSa9ujK8SyeJP5y5mOW1D6hvLepeveEAEDo0mgCRClOEgANv3B9a6fikgUSu/DmAMATrGx7nng5p5iimPNZsfQLYB2sDLIkzRKZOHGAaUyDcpFBSLG9MCQALgAIgQs2YunOszLSAyQYPVC2YdGGeHD2dTdJk1pAHGAWDjnkcLKFymS3RQZTInzySoBwMG0QueC3gMsCEYxUqlrcxK6k1LQQcsmyYeQPdC2YfuGPASCBkcVMQQqpVJshui1tkXQJQV0OXGAZMXSOEEBRirXbVRQW7ugq7IM7rPWSZyDlM3IuNEkxzCOJ0ny2ThNkyRai1b6ev//3dzNGzNb//4uAvHT5sURcZCFcuKLhOFs8mLAAEAt4UWAAIABAAAAAB4qbHo0tIjVkUU//uQZAwABfSFz3ZqQAAAAAngwAAAE1HjMp2qAAAAACZDgAAAD5UkTE1UgZEUExqYynN1qZvqIOREEFmBcJQkwdxiFtw0qEOkGYfRDifBui9MQg4QAHAqWtAWHoCxu1Yf4VfWLPIM2mHDFsbQEVGwyqQoQcwnfHeIkNt9YnkiaS1oizycqJrx4KOQjahZxWbcZgztj2c49nKmkId44S71j0c8eV9yDK6uPRzx5X18eDvjvQ6yKo9ZSS6l//8elePK/Lf//IInrOF/FvDoADYAGBMGb7FtErm5MXMlmPAJQVgWta7Zx2go+8xJ0UiCb8LHHdftWyLJE0QIAIsI+UbXu67dZMjmgDGCGl1H+vpF4NSDckSIkk7Vd+sxEhBQMRU8j/12UIRhzSaUdQ+rQU5kGeFxm+hb1oh6pWWmv3uvmReDl0UnvtapVaIzo1jZbf/pD6ElLqSX+rUmOQNpJFa/r+sa4e/pBlAABoAAAAA3CUgShLdGIxsY7AUABPRrgCABdDuQ5GC7DqPQCgbbJUAoRSUj+NIEig0YfyWUho1VBBBA//uQZB4ABZx5zfMakeAAAAmwAAAAF5F3P0w9GtAAACfAAAAAwLhMDmAYWMgVEG1U0FIGCBgXBXAtfMH10000EEEEEECUBYln03TTTdNBDZopopYvrTTdNa325mImNg3TTPV9q3pmY0xoO6bv3r00y+IDGid/9aaaZTGMuj9mpu9Mpio1dXrr5HERTZSmqU36A3CumzN/9Robv/Xx4v9ijkSRSNLQhAWumap82WRSBUqXStV/YcS+XVLnSS+WLDroqArFkMEsAS+eWmrUzrO0oEmE40RlMZ5+ODIkAyKAGUwZ3mVKmcamcJnMW26MRPgUw6j+LkhyHGVGYjSUUKNpuJUQoOIAyDvEyG8S5yfK6dhZc0Tx1KI/gviKL6qvvFs1+bWtaz58uUNnryq6kt5RzOCkPWlVqVX2a/EEBUdU1KrXLf40GoiiFXK///qpoiDXrOgqDR38JB0bw7SoL+ZB9o1RCkQjQ2CBYZKd/+VJxZRRZlqSkKiws0WFxUyCwsKiMy7hUVFhIaCrNQsKkTIsLivwKKigsj8XYlwt/WKi2N4d//uQRCSAAjURNIHpMZBGYiaQPSYyAAABLAAAAAAAACWAAAAApUF/Mg+0aohSIRobBAsMlO//Kk4soosy1JSFRYWaLC4qZBYWFRGZdwqKiwkNBVmoWFSJkWFxX4FFRQWR+LsS4W/rFRb/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////VEFHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAU291bmRib3kuZGUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMjAwNGh0dHA6Ly93d3cuc291bmRib3kuZGUAAAAAAAAAACU=").play()}function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(A){return!1}}function load_style(A,u){var e=document.getElementsByTagName("head")[0],r=document.createElement("link");r.rel="stylesheet",r.type="text/css",r.href=A,r.media="all",e.appendChild(r),u&&u(A,"ok")}function load_script(A,u,e){function r(){n||(n=!0,u&&u(A,"ok"))}var n=!1,t=document.getElementsByTagName("head")[0],F=document.createElement("script");e&&(F.async=!1),F.onload=r,F.onreadystatechange=function(){n||"complete"===F.readyState&&r()},F.onerror=function(){n||(n=!0,u&&u(A,"error"))},F.src=A,t.appendChild(F)}var urlParams={},counter=0;
;"use strict";jQuery,window.popUtils={getPath:function(t){var e=document.createElement("a");return e.href=t,e.pathname.substr(M.PATHSTARTPOS)}};
;"use strict";String.prototype.format||(String.prototype.format=function(){var t=arguments;return this.replace(/{(\d+)}/g,function(r,o){return void 0!==t[o]?t[o]:r})}),"function"!=typeof String.prototype.startsWith&&(String.prototype.startsWith=function(t){return 0==this.indexOf(t)}),Array.prototype.some||(Array.prototype.some=function(t){var r=this.length;if("function"!=typeof t)throw new TypeError;for(var o=arguments[1],n=0;n<r;n++)if(n in this&&t.call(o,this[n],n,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t){var r=this.length;if("function"!=typeof t)throw new TypeError;for(var o=new Array,n=arguments[1],e=0;e<r;e++)if(e in this){var i=this[e];t.call(n,i,e,this)&&o.push(i)}return o}),Date.now||(Date.now=function(){return(new Date).getTime()});
;"use strict";!function(e){window.popJSLibraryManager={libraries:[],methods:{},register:function(r,i,t,s){var a=this;M.USECODESPLITTING&&popCodeSplitJSLibraryManager.register(r,i,t,s),a.libraries.push(r),e.each(i,function(e,i){a.methods[i]&&!s||(a.methods[i]=[]),t?a.methods[i].unshift(r):a.methods[i].push(r)})},getLibraries:function(e){return this.methods[e]||[]},execute:function(r,i){var t={},s=this.methods[r];if(s){if(M.USECODESPLITTING){var a={libraries:s};e.extend(a,i),popCodeSplitJSLibraryManager.maybeFilterLibraries(r,a),s=a.libraries}e.each(s,function(e,s){t["l"+e]=s[r](i)})}return t}}}(jQuery);
;"use strict";!function(s){window.popJSRuntimeManager={"full-session-ids":{},"last-session-ids":{},blockURL:null,pageSectionURL:null,setPageSectionURL:function(s){this.pageSectionURL=s},setBlockURL:function(e){var t=this,i="";if("object"==s.type(e)){var n=e;i=popManager.getBlockTopLevelURL(n)}else i=e;t.blockURL=i,t.setPageSectionURL(i)},initBlockVarPaths:function(s,e,t,i,n,a,o){o=o||M.JSMETHOD_GROUP_MAIN,s[e]||(s[e]={}),s[e][t]||(s[e][t]={}),s[e][t][i]||(s[e][t][i]={}),s[e][t][i][n]||(s[e][t][i][n]={}),s[e][t][i][n][a]||(s[e][t][i][n][a]={}),s[e][t][i][n][a][o]||(s[e][t][i][n][a][o]=[])},initVars:function(s,e,t,i,n,a){var o=this;o.initBlockVarPaths(o["full-session-ids"],s,e,t,i,n,a),o.initBlockVarPaths(o["last-session-ids"],s,e,t,i,n,a)},addGroup:function(s,e){return e&&(s+=M.ID_SEPARATOR+e),s},addPageSectionId:function(s,e,t,i,n){return this.addTemplateId(s,e,e,t,i,n,!0,!0)},addTemplateId:function(s,e,t,i,n,a,o,d,l){var r=this;return d||(n+=popManager.getUniqueId(s)),o||(n+=M.ID_SEPARATOR+counterNext()),n=r.addGroup(n,a),l||r.addTargetId(r.pageSectionURL,s,e,e,i,a,n),e!=t&&r.addTargetId(r.blockURL,s,e,t,i,a,n),n},addTargetId:function(s,e,t,i,n,a,o){var d=this;return a=a||M.JSMETHOD_GROUP_MAIN,d.initVars(s,e,t,i,n,a),d["full-session-ids"][s][e][t][i][n][a].push(o),d["last-session-ids"][s][e][t][i][n][a].push(o),o},getLastGeneratedId:function(s,e,t,i,n){var a=this;n=n||M.JSMETHOD_GROUP_MAIN;var o=e==t?a.pageSectionURL:a.blockURL,d=a["full-session-ids"][o][s][e][t][i][n];return d[d.length-1]},getPageSectionSessionIds:function(s,e,t){var i=this,n=i.pageSectionURL;return i.getTargetSessionIds(n,s,e,e,t)},getBlockSessionIds:function(s,e,t,i){var n=this,a=popManager.getBlockTopLevelURL(t);return n.getTargetSessionIds(a,s,e,t,i)},getTargetSessionIds:function(s,e,t,i,n){var a=this,o=popManager.getSettingsId(t),d=popManager.getSettingsId(i);return n=n||"last",a[n+"-session-ids"][s]&&a[n+"-session-ids"][s][e]&&a[n+"-session-ids"][s][e][o]?a[n+"-session-ids"][s][e][o][d]:null},deletePageSectionLastSessionIds:function(e,t){var i=this,n=popManager.getSettingsId(t),a=i.pageSectionURL;delete i["last-session-ids"][a][e][n][n],s.isEmptyObject(i["last-session-ids"][a][e][n])&&(delete i["last-session-ids"][a][e][n],s.isEmptyObject(i["last-session-ids"][a][e])&&(delete i["last-session-ids"][a][e],s.isEmptyObject(i["last-session-ids"][a])&&delete i["last-session-ids"][a]))},deleteBlockLastSessionIds:function(e,t,i){var n=this,a=popManager.getSettingsId(t),o=popManager.getSettingsId(i),d=popManager.getBlockTopLevelURL(i);n["last-session-ids"][d]&&n["last-session-ids"][d][e]&&n["last-session-ids"][d][e][a]&&n["last-session-ids"][d][e][a][o]&&(delete n["last-session-ids"][d][e][a][o],s.isEmptyObject(n["last-session-ids"][d][e][a])&&(delete n["last-session-ids"][d][e][a],s.isEmptyObject(n["last-session-ids"][d][e])&&(delete n["last-session-ids"][d][e],s.isEmptyObject(n["last-session-ids"][d])&&delete n["last-session-ids"][d])))}}}(jQuery);
;"use strict";!function(t){window.popPageSectionManager={offcanvasToggle:function(e){var n=this;e.pageSection;e.targets.click(function(e){e.preventDefault();var a=t(this),s=a.data("mode"),o=t(a.data("target")),i=a.data("toggle");"offcanvas-open"==i?n.open(o,s):"offcanvas-close"==i?n.close(o,s):"offcanvas-toggle"==i&&n.toggle(o,s)})},isHidden:function(t){var e=this,n=t.targets.closest(".offcanvas");return e.execIsHidden(n)},execIsHidden:function(t){var e=this;if(t.length){var n=e.getOffcanvasActiveClass(t);return!e.getGroup(t).hasClass(n)}return!1},getOffcanvasActiveClass:function(t,e){var n="active-"+t.data("offcanvas");return"xs"==e&&(n+="-xs"),n},open:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.addClass(s),n.triggerStatus(t,e,"opened")},close:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.removeClass(s),n.triggerStatus(t,e,"closed")},toggle:function(t,e){var n=this,a=n.getGroup(t),s=n.getOffcanvasActiveClass(t,e);a.hasClass(s)?n.close(t,e):n.open(t,e)},triggerStatus:function(t,e,n){this.getGroup(t).triggerHandler("on.bs.pagesection-group:pagesection-"+t.attr("id")+":"+n,[t,e])},getTopLevelSettingsId:function(){return M.TEMPLATE_TOPLEVEL_SETTINGS_ID},getPageSectionStatus:function(e){return t("#"+e.attr("id")+"-status")},getGroup:function(e){return e?e.closest(".pop-pagesection-group"):t("#"+M.TEMPLATE_PAGESECTIONGROUP_ID)},theater:function(t){var e=this,n=e.getGroup();e.transitionEndResize(),t?(n.addClass("theater"),n.triggerHandler("on.bs.pagesection:theater")):(n.removeClass("theater"),n.triggerHandler("off.bs.pagesection:theater"))},isTheater:function(){return this.getGroup().hasClass("theater")},transitionEndResize:function(){this.getGroup().one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){windowResize()})},getOpenMode:function(t){return t.data("pagesection-openmode")||"automatic"}}}(jQuery),popJSLibraryManager.register(popPageSectionManager,["isHidden","offcanvasToggle"],!0);
;"use strict";!function(e){window.popBrowserHistory={loaded:!1,documentInitialized:function(){var t=this;e(window).on("popstate",function(e){if(t.loaded){var r=t.removePushURLAtts(window.location.href);r=t.getApplicationURL(r);var o={skipPushState:!0};popURLInterceptors.getInterceptors(r).length?popURLInterceptors.intercept(r,o):popManager.fetch(r,o)}else t.loaded=!0})},getApplicationURL:function(e){var t={url:e};return popJSLibraryManager.execute("modifyApplicationURL",t),e=t.url},addPushURLAtts:function(t){var r=popManager.getTopLevelFeedback(getDomain(t));return e.each(r[M.DATALOAD_PUSHURLATTS],function(e,r){t=add_query_arg(e,r,t)}),t},removePushURLAtts:function(t){var r=popManager.getTopLevelFeedback(getDomain(t)),o=[];return e.each(r[M.DATALOAD_PUSHURLATTS],function(e,t){o.push(e)}),removeQueryFields(t,o)},pushState:function(e){var t=this,r={url:e=t.addPushURLAtts(e)};popJSLibraryManager.execute("modifyPushStateURL",r),e=r.url,history.pushState({url:e},"",e),t.loaded=!0},replaceState:function(e){var t=this;window.location.url!=e&&(e=t.addPushURLAtts(e),history.replaceState({url:e},"",e),t.loaded=!0)}}}(jQuery),popJSLibraryManager.register(popBrowserHistory,["documentInitialized"],!0);
;"use strict";!function(t){window.popURLInterceptors={fullurl:{},partialurl:{},pageSectionNewDOMsInitialized:function(e){var r=this,a=e.pageSection,n=e.newDOMs;n.find('[data-intercept="fullurl"]').addBack('[data-intercept="fullurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e));r.fullurl[l]||(r.fullurl[l]={}),r.fullurl[l][i]||(r.fullurl[l][i]=[]),r.fullurl[l][i].push(n)}),n.find('[data-intercept="partialurl"]').addBack('[data-intercept="partialurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e));r.partialurl[l]||(r.partialurl[l]={}),r.partialurl[l][n]=i})},destroyTarget:function(e){var r=this,a=e.pageSection,n=e.destroyTarget;n.find('[data-intercept="fullurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getUrl(e),l=(r.getSettings(e),r.getTarget(a,e)),u=r.fullurl[l][i];u&&((u=u.filter(function(t,e){return n!=t})).length?r.fullurl[l][i]=u:delete r.fullurl[l][i])}),n.find('[data-intercept="partialurl"]').each(function(){var e=t(this),n=e.attr("id"),i=r.getTarget(a,e);delete r.partialurl[i][n]})},getSettings:function(t){var e=t.data("intercept-settings")||"";return e=e.split(M.SEPARATOR)},getTarget:function(t,e){return e.attr("target")||popManager.getFrameTarget(t)},getUrl:function(t){return t.data("intercept-url")},getFullUrlInterceptors:function(e,r){var a=this,n=[],i=(r=r||{}).target||M.URLPARAM_TARGET_MAIN,l=a.fullurl;if(l[i])if(l[i][e])n.push(t("#"+l[i][e].join(", #")));else{var u=removeParams(e);if(e!=u&&l[i][u]){var p=t("#"+l[i][u].join(", #")).filter(".pop-interceptor");p.length&&n.push(p)}}return n},getPartialUrlInterceptor:function(e,r){var a=this,n=null,i=(r=r||{}).target||M.URLPARAM_TARGET_MAIN,l=a.partialurl;if(i){var u=l[i];u&&t.each(u,function(r,a){if(e.startsWith(a))return n=t("#"+r),!1})}return n},getURLInterceptors:function(t,e){var r=this,a=r.getFullUrlInterceptors(t,e),n=r.getPartialUrlInterceptor(t,e);return n&&a.push(n),a},getInterceptors:function(t,e){var r=this,a=r.getURLInterceptors(t,e);if(a.length)return a;var n=removeMarker(t);return n!=t&&(a=r.getURLInterceptors(n,e)),a},intercept:function(e,r){var a=this;r=r||{};var n=a.getInterceptors(e,r);if(n.length){r.event&&r.event.stopImmediatePropagation(),t.each(n,function(t,a){if(!(a.data("intercept-skipstateupdate")||r.skipstateupdate))return r.skipPushState||popBrowserHistory.pushState(e),popManager.updateTitle(a.data("title")),-1});var i=r["interceptor-atts"]||{};return t.each(n,function(n,l){t.each(i,function(t,e){l.data(t,e)});var u=r.relatedTarget;l.data("interceptedTarget",u);a.getSettings(l.parent());l.data("original-url",e),l.data("post-data",getParams(e)),l.trigger("click")}),!0}return!1}}}(jQuery),popJSLibraryManager.register(popURLInterceptors,["destroyTarget","pageSectionNewDOMsInitialized"],!0);
;"use strict";!function(e){window.popManager={mergingTemplatePromise:!1,state:{},sitemapping:{},runtimeMemory:{general:{},url:{}},initialBlockMemory:{},urlPointers:{},replicableMemory:{},firstLoad:{},documentTitle:null,domains:{},loaded:!1,getMemory:function(e){return this.state[e].memory},getDatabase:function(e){return this.state[e].database},getUserDatabase:function(e){return this.state[e].userdatabase},getInitialBlockMemory:function(e){var t=this;if(e==M.INITIAL_URL)return t.initialBlockMemory[e];var n=t.urlPointers[e];return n?t.initialBlockMemory[n.url]:t.initialBlockMemory[e]||{}},addInitialBlockMemory:function(t){var n=this,a=t.feedback.toplevel[M.URLPARAM_URL];n.initialBlockMemory[a]||(n.initialBlockMemory[a]={dataset:{},feedback:{block:{}},"query-state":{general:{},domain:{}},runtimesettings:{configuration:{}}});var i=n.initialBlockMemory[a];e.each(t.settings.configuration,function(n,a){i["query-state"].general[n]||(i["query-state"].general[n]={},i["query-state"].domain[n]={},i.runtimesettings.configuration[n]={},i.dataset[n]={},i.feedback.block[n]={}),e.extend(i["query-state"].general[n],t["query-state"].general[n]),e.extend(i["query-state"].domain[n],t["query-state"].domain[n]),e.extend(i.runtimesettings.configuration[n],t.runtimesettings.configuration[n]),e.extend(i.dataset[n],t.dataset[n]),e.extend(i.feedback.block[n],t.feedback.block[n])})},getReplicableMemory:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN;var a=n.urlPointers[e];return n.replicableMemory[a.url][a.target]},saveUrlPointers:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var i=t.feedback.toplevel[M.URLPARAM_URL];e.each(t.feedback.pagesection,function(t,r){r["intercept-urls"]&&e.each(r["intercept-urls"],function(t,r){e.each(r,function(e,t){a.urlPointers[t]={url:i,target:n}})})}),e.each(t.feedback.block,function(t,r){e.each(r,function(t,r){r["intercept-urls"]&&e.each(r["intercept-urls"],function(t,r){e.each(r,function(e,t){a.urlPointers[t]={url:i,target:n}})})})})},addReplicableMemory:function(t,n){var a=this;n=n||M.URLPARAM_TARGET_MAIN;var i=!1;if(e.each(t.settings.configuration,function(e,t){if(t[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE].length)return i=!0,-1}),i){var r=t.feedback.toplevel[M.URLPARAM_URL];a.replicableMemory[r]||(a.replicableMemory[r]={}),a.replicableMemory[r][n]={dataset:e.extend(!0,{},t.dataset),feedback:e.extend(!0,{},t.feedback),"query-state":e.extend(!0,{},t["query-state"])}}},getRuntimeMemory:function(e,t,n,a){var i=this;if(a=a||{},i.getPageSectionPage(n).data("paramsscope")==M.SETTINGS_PARAMSSCOPE_URL){var r=a.url||i.getTopLevelFeedback(e)[M.URLPARAM_URL];return i.runtimeMemory.url[r]||(i.runtimeMemory.url[r]={}),n.data(M.PARAMS_PARAMSSCOPE_URL,r),i.runtimeMemory.url[r]}return i.runtimeMemory.general},newRuntimeMemoryPage:function(e,t,n,a){var i=this;if(!(a=a||{}).url){var r=i.getTopLevelFeedback(e);a.url=r[M.URLPARAM_URL]}var o=i.getRuntimeMemory(e,t,n,a),s=i.getSettingsId(t),c=i.getSettingsId(n);return o[s]||(o[s]={}),o[s][c]={"query-state":{general:{},domain:{}},id:null},o[s][c]},deleteRuntimeMemoryPage:function(t,n,a,i){var r=this,o=r.getRuntimeMemory(t,n,a,i),s=r.getSettingsId(n),c=r.getSettingsId(a);o[s]&&(delete o[s][c],e.isEmptyObject(o[s])&&delete o[s])},getRuntimeMemoryPage:function(t,n,a){var i,r,o=this;if((a=a||{}).url)r=a.url;else if("object"==e.type(n)){var s=n;r=o.getTargetParamsScopeURL(s)}i=r?o.runtimeMemory.url[r]:o.runtimeMemory.general;var c=o.getSettingsId(t),g=o.getSettingsId(n);if(!i[c]||!i[c][g]){var u="Mempage not available";throw r&&(u+=" for url "+r),new Error(u)}return i[c][g]},isFirstLoad:function(e){var t=this;return t.firstLoad[t.getSettingsId(e)]},initDomainVars:function(e){this.state[e]={memory:{settings:{"js-settings":{},jsmethods:{pagesection:{},block:{}},"templates-cbs":{},"templates-paths":{},"db-keys":{},configuration:{}},runtimesettings:{"query-url":{},"query-multidomain-urls":{},configuration:{},"js-settings":{}},dataset:{},feedback:{block:{},pagesection:{},toplevel:{}},"query-state":{general:{},domain:{}}},database:{},userdatabase:{}}},init:function(){var t=this;if(e(document.body).removeClass("pop-loadinghtml"),e("#"+popPageSectionManager.getTopLevelSettingsId()).length){var n=M.HOME_DOMAIN;t.initLocalStorage(),t.initDomain(n),t.initTopLevelJson(n),t.initDocument(n);var a=t.getMemory(n),i=[],r=t.getTopLevelFeedback(n),o=r[M.URLPARAM_URL],s=r[M.URLPARAM_SILENTDOCUMENT],c=r[M.URLPARAM_BACKGROUNDLOADURLS];popJSRuntimeManager.setPageSectionURL(o),e.each(a.settings.configuration,function(a,r){var o=r[M.JS_FRONTENDID],s=e("#"+o);s.attr("data-settings-id",a),s.addClass("pop-pagesection"),t.initPageSectionSettings(n,s,r),t.addPageSectionIds(n,s,r[M.JS_TEMPLATE]),t.initPageSection(n,s),i.push(s)});var g={init:!0,"session-ids-url":o},u=null;M.USE_PROGRESSIVEBOOTING&&(u=M.PROGRESSIVEBOOTING.CRITICAL);var l=e.Deferred();t.mergingTemplatePromise=l.promise(),e.each(i,function(e,a){t.renderPageSection(n,a,u,g)}),l.resolve(),e(document.body).removeClass("pop-loadingframe"),e.each(i,function(e,a){t.pageSectionInitialized(n,a)}),s||(popBrowserHistory.replaceState(o),t.updateDocument(n)),t.documentInitialized(n),e(document.body).removeClass("pop-loadingjs"),t.backgroundLoad(c),window.addEventListener("load",function(){t.documentLoaded(n),M.USE_PROGRESSIVEBOOTING&&e.each(i,function(e,a){t.initPageSectionBranches(n,a,M.PROGRESSIVEBOOTING.NONCRITICAL,g)})})}},maybeModifyURL:function(e){var t={url:e};return popJSLibraryManager.execute("maybeModifyURL",t),t.url},expandJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&(e[M.JS_MODULES]&&(e.modules=e[M.JS_MODULES]),e.bs&&e.bs["db-keys"]&&e.bs["db-keys"][M.JS_SUBCOMPONENTS]&&(e.bs["db-keys"].subcomponents=e.bs["db-keys"][M.JS_SUBCOMPONENTS]),e[M.JS_TEMPLATE]&&(e.template=e[M.JS_TEMPLATE]),e[M.JS_TEMPLATEIDS]&&(e["template-ids"]=e[M.JS_TEMPLATEIDS]),e[M.JS_SETTINGSID]&&(e["settings-id"]=e[M.JS_SETTINGSID]),e[M.JS_SETTINGSIDS]&&(e["settings-ids"]=e[M.JS_SETTINGSIDS],e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS]&&(e["settings-ids"].blockunits=e[M.JS_SETTINGSIDS][M.JS_BLOCKUNITS])),e[M.JS_TEMPLATESOURCES]&&(e["template-sources"]=e[M.JS_TEMPLATESOURCES]),e[M.JS_INTERCEPT]&&(e.intercept=e[M.JS_INTERCEPT]),e[M.JS_BLOCKSETTINGSIDS]&&(e["block-settings-ids"]=e[M.JS_BLOCKSETTINGSIDS],e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]&&(e["block-settings-ids"].blockunits=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITS]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]&&(e["block-settings-ids"]["blockunits-replicable"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSREPLICABLE]),e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME]&&(e["block-settings-ids"]["blockunits-frame"]=e[M.JS_BLOCKSETTINGSIDS][M.JS_BLOCKUNITSFRAME])),e[M.JS_REPLICATEBLOCKSETTINGSIDS]&&(e["replicate-blocksettingsids"]=e[M.JS_REPLICATEBLOCKSETTINGSIDS],e[M.JS_INTERCEPTSKIPSTATEUPDATE]&&(e["intercept-skipstateupdate"]=e[M.JS_INTERCEPTSKIPSTATEUPDATE]),e[M.JS_UNIQUEURLS]&&(e["unique-urls"]=e[M.JS_UNIQUEURLS]),e[M.JS_REPLICATETYPES]&&(e["replicate-types"]=e[M.JS_REPLICATETYPES])),e[M.JS_PARAMS]&&(e.params=e[M.JS_PARAMS]),e[M.JS_ITEMOBJECTPARAMS]&&(e["itemobject-params"]=e[M.JS_ITEMOBJECTPARAMS]),e[M.JS_PREVIOUSTEMPLATESIDS]&&(e["previoustemplates-ids"]=e[M.JS_PREVIOUSTEMPLATESIDS]),e[M.JS_BLOCKFEEDBACKPARAMS]&&(e["blockfeedback-params"]=e[M.JS_BLOCKFEEDBACKPARAMS]),e[M.JS_APPENDABLE]&&(e.appendable=e[M.JS_APPENDABLE]),e[M.JS_CLASS]&&(e.class=e[M.JS_CLASS]),e[M.JS_CLASSES]&&(e.classes=e[M.JS_CLASSES],e[M.JS_CLASSES][M.JS_APPENDABLE]&&(e.classes.appendable=e[M.JS_CLASSES][M.JS_APPENDABLE])),e[M.JS_STYLE]&&(e.style=e[M.JS_STYLE]),e[M.JS_STYLES]&&(e.styles=e[M.JS_STYLES]),e[M.JS_TITLES]&&(e.titles=e[M.JS_TITLES]),e[M.JS_DESCRIPTION]&&(e.description=e[M.JS_DESCRIPTION]),popJSLibraryManager.execute("expandJSKeys",{context:e}))},addPageSectionIds:function(e,t,n){var a=this.getSettingsId(t),i=t.attr("id");popJSRuntimeManager.addPageSectionId(e,a,n,i);var r={domain:e,pageSection:t,template:n};popJSLibraryManager.execute("addPageSectionIds",r)},initDocument:function(t){var n=this;e(document).on("user:loggedout",function(e,t,a){n.clearUserDatabase(a)});var a={domain:t};popJSLibraryManager.execute("initDocument",a),e(document).triggerHandler("initialize.pop.document",[t])},initDomain:function(t){var n=this;n.domains[t]={initialized:!0},n.initDomainVars(t);var a={domain:t};popJSLibraryManager.execute("initDomain",a),e(document).triggerHandler("initialize.pop.domain",[t])},maybeInitializeDomain:function(e){var t=this;t.domains[e]&&t.domains[e].initialized||t.initDomain(e)},documentInitialized:function(t){var n={domain:t};popJSLibraryManager.execute("documentInitialized",n),e(document).triggerHandler("initialized.pop.document")},documentLoaded:function(t){this.loaded=!0;var n={domain:t};popJSLibraryManager.execute("documentInitializedIndependent",n),popJSLibraryManager.execute("documentLoaded",n),e(document).triggerHandler("loaded.pop.document")},pageSectionFetchSuccess:function(e,t,n){var a={pageSection:e,response:t,options:n};popJSLibraryManager.execute("pageSectionFetchSuccess",a),e.triggerHandler("fetched.pop.pageSection")},blockFetchSuccess:function(e,t,n){popJSLibraryManager.execute("blockFetchSuccess",{pageSection:e,block:t,response:n}),t.triggerHandler("fetched.pop.block")},backgroundLoad:function(t){var n=this;n.loaded?n.execBackgroundLoad(t):e(document).on("loaded.pop.document",function(){n.execBackgroundLoad(t)})},execBackgroundLoad:function(t){var n=this,a={"loadingmsg-target":null,silentDocument:!0};e.each(t,function(t,i){e.each(i,function(i,r){n.fetch(t,e.extend({target:r},a))})})},initPageSection:function(t,n){var a=this;a.firstLoad[a.getSettingsId(n)]=!0,a.initPageSectionRuntimeMemory(t,n),n.triggerHandler("initialize"),e(document).triggerHandler("initialize.pop.pagesection",[n])},pageSectionInitialized:function(e,t){var n=this;popJSLibraryManager.execute("pageSectionInitialized",{domain:e,pageSection:t}),t.triggerHandler("initialized"),t.triggerHandler("completed"),n.firstLoad[n.getSettingsId(t)]=!1},pageSectionNewDOMsInitialized:function(t,n,a,i,r){var o=this,s=a.filter(".pop-pagesection-page");if(s.length){r["fetch-params"]&&e.each(r["fetch-params"],function(e,t){s.data(e,t)});var c=popPageSectionManager.getOpenMode(n),g=o.isFirstLoad(n);("automatic"==c||g&&"initial"==c)&&popPageSectionManager.open(n)}var u={domain:t,pageSection:n,newDOMs:a};o.extendArgs(u,r),popJSLibraryManager.execute("pageSectionNewDOMsBeforeInitialize",u),o.initPageSectionBranches(t,n,i,r),popJSLibraryManager.execute("pageSectionNewDOMsInitialized",u)},initPageSectionBranches:function(t,n,a,i){var r=this,o=(i=i||{})["session-ids-url"];o||(o=popManager.getTopLevelFeedback(t)[M.URLPARAM_URL]),popJSRuntimeManager.setPageSectionURL(o),r.runPageSectionJSMethods(t,n,a,i);var s=r.getPageSectionJsSettings(t,n)["initjs-blockbranches"];s&&(s=e(s.join(",")),s=a!=M.PROGRESSIVEBOOTING.NONCRITICAL?s.not("."+M.JS_INITIALIZED):s.filter("."+M.CRITICALJS_INITIALIZED),r.initBlockBranches(t,n,s,a,i)),a!=M.PROGRESSIVEBOOTING.CRITICAL&&(popJSRuntimeManager.setPageSectionURL(o),popJSRuntimeManager.deletePageSectionLastSessionIds(t,n))},triggerDestroyTarget:function(e,t){var n=this;t=t||M.URLPARAM_TARGET_MAIN,n.removeOpenTab(e,t),popURLInterceptors.intercept(n.getDestroyUrl(e),{target:t})},destroyTarget:function(t,n,a){var i=this,r={domain:t,pageSection:n,destroyTarget:a};popJSLibraryManager.execute("destroyTarget",r),a.triggerHandler("destroy"),a.find(".pop-block."+M.JS_INITIALIZED).addBack(".pop-block."+M.JS_INITIALIZED).each(function(){var a=e(this);i.deleteRuntimeMemoryPage(t,n,a,{url:i.getTargetParamsScopeURL(a)})}),a.remove()},destroyPageSectionPage:function(e,t,n){var a=this,i=n||t;n.siblings(".pop-pagesection-page").length||(popPageSectionManager.close(t),popPageSectionManager.close(t,"xs")),a.destroyTarget(e,t,i)},pageSectionRendered:function(e,t,n,a,i){this.pageSectionNewDOMsInitialized(e,t,n,a,i)},runScriptsBefore:function(e,t){var n={pageSection:e,newDOMs:t};popJSLibraryManager.execute("runScriptsBefore",n)},jsInitialized:function(e){return e.hasClass(M.JS_INITIALIZED)},jsLazy:function(e){return e.hasClass(M.CLASS_LAZYJS)},setJsInitialized:function(e,t){e.addClass(M.JS_INITIALIZED).removeClass(M.CLASS_LAZYJS),t==M.PROGRESSIVEBOOTING.CRITICAL&&e.addClass(M.CRITICALJS_INITIALIZED)},initBlockBranches:function(t,n,a,i,r){var o=this;a.length&&a.each(function(){var a=e(this),s=!0;if(i!=M.PROGRESSIVEBOOTING.NONCRITICAL&&(s=!o.jsInitialized(a)),r["force-init"]||(s=s&&!o.jsLazy(a)),s){i!=M.PROGRESSIVEBOOTING.NONCRITICAL?o.initBlock(t,n,a,i,r):(popJSRuntimeManager.setBlockURL(a),o.runBlockJSMethods(t,n,a,i,r));var c=o.getJsSettings(t,n,a),g=c["initjs-blockbranches"];g&&(g=e(g.join(", ")),g=i!=M.PROGRESSIVEBOOTING.NONCRITICAL?g.not("."+M.JS_INITIALIZED):g.filter("."+M.CRITICALJS_INITIALIZED),o.initBlockBranches(t,n,g,i,r));var u=c["initjs-blockchildren"];if(u){var l=a;e.each(u,function(t,n){e.each(n,function(e,t){l=l.children(t),l=i!=M.PROGRESSIVEBOOTING.NONCRITICAL?l.not("."+M.JS_INITIALIZED):l.filter("."+M.CRITICALJS_INITIALIZED)})}),o.initBlockBranches(t,n,l,i,r)}}})},initBlock:function(t,n,a,i,r){var o=this;r=r||{},o.initBlockRuntimeMemory(t,n,a,e.extend({},r)),o.initializeBlock(a,i),o.runScriptsBefore(n,a),o.runBlockJSMethods(t,n,a,i,r),a.on("rendered",function(t,a,i,s){var c=e(this);popJSRuntimeManager.setBlockURL(c),o.runScriptsBefore(n,a),o.runBlockJSMethods(s,n,c,null,null,r)}),o.blockInitialized(t,n,a,r),o.loadBlockContent(t,n,a)},initializeBlock:function(e,t){this.setJsInitialized(e,t),e.triggerHandler("initialize")},extendArgs:function(t,n){(n=n||{})["js-args"]&&e.extend(t,n["js-args"])},blockInitialized:function(e,t,n,a){var i={domain:e,pageSection:t,block:n};this.extendArgs(i,a),popJSLibraryManager.execute("blockInitialized",i),n.triggerHandler("js:initialized")},loadBlockContent:function(t,n,a){var i=this;if(!i.isContentLoaded(n,a)){a.one("fetchDomainCompleted",function(e,t,n){a.removeClass(M.CLASS_LOADINGCONTENT)}),i.setContentLoaded(n,a);var r={action:M.CBACTION_LOADCONTENT,"post-data":a.data("post-data")};i.getJsSettings(t,n,a)["loadcontent-showdisabledlayer"]&&(r["show-disabled-layer"]=!0),e(document).ready(function(e){i.fetchBlock(n,a,r)})}},getGroupMethodsByPriority:function(t,n){var a=[M.PROGRESSIVEBOOTING.CRITICAL,M.PROGRESSIVEBOOTING.NONCRITICAL];if(a.indexOf(n)>=0)return t[n];var i={};return e.each(a,function(n,a){t[a]&&e.each(t[a],function(e,t){i[e]?i[e]=i[e].concat(t):i[e]=t})}),i},runPageSectionJSMethods:function(t,n,a,i){var r=this,o=popJSRuntimeManager.getPageSectionSessionIds(t,n,"last");if(o){var s=[],c=r.getPageSectionJsMethods(t,n);e.each(c,function(c,g){if(-1==s.indexOf(c)){s.push(c);var u=r.getGroupMethodsByPriority(g,a);o[c]&&u&&e.each(u,function(a,s){var g=o[c][a];if(g){var u="#"+g.join(", #"),l=e(u);l.length&&e.each(s,function(e,a){var o={domain:t,pageSection:n,targets:l};r.extendArgs(o,i),popJSLibraryManager.execute(a,o)})}})}})}},runBlockJSMethods:function(e,t,n,a,i){this.runJSMethods(e,t,n,null,null,a,i),a!=M.PROGRESSIVEBOOTING.CRITICAL&&popJSRuntimeManager.deleteBlockLastSessionIds(e,t,n)},runJSMethods:function(e,t,n,a,i,r,o){var s=this,c=popJSRuntimeManager.getBlockSessionIds(e,t,n,i);if(c){var g=s.getTemplateJSMethods(e,t,n,a);s.runJSMethodsInner(e,t,n,g,c,[],r,o)}},runJSMethodsInner:function(t,n,a,i,r,o,s,c){var g=this;c=c||{};var u=i[M.JS_TEMPLATE];if(-1==o.indexOf(u)&&(o.push(u),i[M.JS_METHODS])){var l=g.getGroupMethodsByPriority(i[M.JS_METHODS],s);r[u]&&l&&e.each(l,function(i,o){var s=r[u][i];if(s){var l="#"+s.join(", #"),d=e(l);d.length&&e.each(o,function(e,i){var r={domain:t,pageSection:n,block:a,targets:d};g.extendArgs(r,c),popJSLibraryManager.execute(i,r)})}})}i[M.JS_NEXT]&&e.each(i[M.JS_NEXT],function(e,i){g.runJSMethodsInner(t,n,a,i,r,o,s,c)})},getTemplateJSMethods:function(e,t,n,a){var i=this,r=i.getBlockJsMethods(e,t,n);return a?i.getTemplateJSMethodsInner(t,n,a,r):r},getTemplateJSMethodsInner:function(t,n,a,i){var r=this;if(i[M.JS_TEMPLATE]==a)return i;var o;return i[M.JS_NEXT]&&e.each(i[M.JS_NEXT],function(e,i){if(o=r.getTemplateJSMethodsInner(t,n,a,i))return!1}),o},maybeRedirect:function(e){var t=this;if(e.redirect&&e.redirect.url){if(!e.redirect.fetch)return window.location=e.redirect.url,!0;t.click(e.redirect.url)}return!1},historyReplaceState:function(e,t){var n=this,a=e.data("historystate-url"),i=e.data("historystate-title");e.data("historystate-thumb");popBrowserHistory.replaceState(a),i&&(n.documentTitle=unescapeHtml(i),document.title=n.documentTitle)},isHidden:function(t){if(t.hasClass("hidden"))return!0;var n=t.attr("id");if(n&&!e("#"+n).length)return!0;var a=t.parents(".tab-pane"),i=a.filter(".active");if(a.length>i.length)return!0;var r=popJSLibraryManager.execute("isHidden",{targets:t}),o=!1;return e.each(r,function(e,t){if(t)return o=!0,-1}),o},isActive:function(t){var n=popJSLibraryManager.execute("isActive",{targets:t}),a=!0;return e.each(n,function(e,t){if(!t)return a=!1,-1}),a},isContentLoaded:function(e,t){return this.getBlockQueryState(e,t)[M.DATALOAD_CONTENTLOADED]||!1},setContentLoaded:function(e,t){this.getBlockQueryState(e,t)[M.DATALOAD_CONTENTLOADED]=!0},updateDocument:function(e){var t=this;t.updateTitle(t.getTopLevelFeedback(e)[M.URLPARAM_TITLE])},updateTitle:function(e){var t=this;e&&(t.documentTitle=unescapeHtml(e),document.title=t.documentTitle)},executeSetFilterBlockParams:function(t,n,a){var i=this.getBlockQueryState(t,n);i.filter=a.find("."+M.FILTER_INPUT).filter(function(){return e.trim(this.value)}).serialize(),i.filter&&(i.filter+="&"+a.find("."+M.FILTER_NAME_INPUT).serialize())},setFilterBlockParams:function(e,t,n){var a=this;a.jsInitialized(t)?a.executeSetFilterBlockParams(e,t,n):t.one("js:initialized",function(){a.executeSetFilterBlockParams(e,t,n)})},filter:function(e,t,n){var a=this;a.setFilterBlockParams(e,t,n),a.reload(e,t),a.blockScrollTop(e,t)},blockScrollTop:function(e,t){var n=this,a=t.closest(".modal");0==a.length?n.scrollToElem(e,t.children(".blocksection-status").first(),!0):a.animate({scrollTop:0},"fast")},setReloadBlockParams:function(t,n){var a=this.getBlockMultiDomainQueryState(t,n);e.each(a,function(e,t){t[M.DATALOAD_PARAMS]&&t[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]&&(t[M.DATALOAD_PARAMS][M.URLPARAM_PAGED]=""),t[M.URLPARAM_STOPFETCHING]&&(t[M.URLPARAM_STOPFETCHING]=!1)})},refetch:function(e,t,n){var a=this;(n=n||{}).action=M.CBACTION_REFETCH,t.triggerHandler("beforeRefetch"),a.reload(e,t,n)},reset:function(e,t,n,a){var i=this;(a=a||{})["skip-restore"]||i.restoreInitialBlockMemory(t,n),i.processBlock(e,t,n,{operation:M.URLPARAM_OPERATION_REPLACE,action:M.CBACTION_RESET,reset:!0})},reload:function(e,t,n){var a=this;(n=n||{}).operation=M.URLPARAM_OPERATION_REPLACE,n.reload=!0,n["hide-latestcount"]=!0,a.setReloadBlockParams(e,t),t.triggerHandler("beforeReload"),a.fetchBlock(e,t,n)},loadLatest:function(t,n,a,i){var r=this;i=i||{};var o=r.getBlockDomainQueryState(t,n,a);i.operation=M.URLPARAM_OPERATION_PREPEND,i["skip-stopfetching-check"]=!0,i["hide-latestcount"]=!0;var s={};s[M.URLPARAM_ACTION]=M.URLPARAM_ACTION_LATEST,s[M.URLPARAM_TIMESTAMP]=o[M.URLPARAM_TIMESTAMP],i["onetime-post-data"]=e.param(s),a.triggerHandler("beforeLoadLatest"),r.fetchBlock(n,a,i)},handlePageSectionLoadingStatus:function(t,n,a){var i,r=this;if(void 0!==(a=a||{})["loadingmsg-target"]){if(!a["loadingmsg-target"])return;i=e(a["loadingmsg-target"])}else i=popPageSectionManager.getPageSectionStatus(t).find(".pop-loading");r.handleLoadingStatus(i,n,a)},handleLoadingStatus:function(e,t){var n=e.data("num")||0;"add"==t?n+=1:"remove"==t&&(n-=1),e.data("num",n),n?e.removeClass("hidden"):e.addClass("hidden"),n>=2?e.find(".pop-box").text("x"+n):e.find(".pop-box").text("")},fetch:function(e,t){var n=this;t=t||{};var a=n.getFetchTargetPageSection(t.target);n.getPageSectionParams(a)?n.fetchPageSection(a,e,t):t["noparams-reload-url"]&&(window.location=e)},removeLocalStorageItem:function(e,t){var n={result:t.startsWith(e),key:t,path:e};return popJSLibraryManager.execute("removeLocalStorageItem",n),n.result},initLocalStorage:function(){var e=this;if(M.USELOCALSTORAGE&&supports_html5_storage()){var t=localStorage["PoP:version"];t&&t==M.VERSION||(Object.keys(localStorage).forEach(function(t){M.ALLOWED_DOMAINS.forEach(function(n){if(e.removeLocalStorageItem(n,t))return localStorage.removeItem(t),-1})}),localStorage["PoP:version"]=M.VERSION)}},openTabs:function(){var t=this;if(M.KEEP_OPEN_TABS){var n={silentDocument:!0,"js-args":{inactivePane:!0,addOpenTab:!1}},a=t.getTabsCurrentURL(),i=t.getScreenOpenTabs();e.each(i,function(i,r){if(n.target=i,i==M.URLPARAM_TARGET_MAIN){var o=r.indexOf(a);-1!==o&&r.splice(o,1)}e.each(r,function(e,a){t.fetch(a,n)})})}},getTabsCurrentURL:function(){var e=window.location.href;return e==M.HOME_DOMAIN&&(e=M.HOME_DOMAIN+"/"),e==M.HOME_DOMAIN+"/"&&M.HOMELOCALE_URL&&(e=M.HOMELOCALE_URL+"/"),e},getOpenTabsKey:function(){var t=this,n=M.LOCALE,a=M.HOME_DOMAIN,i=t.getTopLevelFeedback(a)[M.DATALOAD_PARAMS];return e.each(i,function(e,t){n+="|"+e+"="+t}),n},getScreenOpenTabs:function(){var e=this;return e.getOpenTabs()[e.getOpenTabsKey()]||{}},keepScreenOpenTab:function(e,t){var n=this,a=n.getOpenTabs(),i=n.getOpenTabsKey();a[i]={},a[i][t]=[e],n.storeData("PoP:openTabs",a)},getOpenTabs:function(){var e=this;return M.KEEP_OPEN_TABS?e.getStoredData("PoP:openTabs")||{}:{}},addOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),i=n.getOpenTabsKey();return a[i]=a[i]||{},a[i][t]=a[i][t]||[],!(a[i][t].indexOf(e)>-1)&&(a[i][t].push(e),n.storeData("PoP:openTabs",a),!0)},removeOpenTab:function(e,t){var n=this;if(!M.KEEP_OPEN_TABS)return!1;var a=n.getOpenTabs(),i=n.getOpenTabsKey();a[i]=a[i]||{},a[i][t]=a[i][t]||[];var r=a[i][t].indexOf(e);return-1!==r&&(a[i][t].splice(r,1),a[i][t].length||(delete a[i][t],a[i].length||delete a[i]),n.storeData("PoP:openTabs",a),!0)},replaceOpenTab:function(e,t,n){var a=this;M.KEEP_OPEN_TABS&&a.removeOpenTab(e,n)&&a.addOpenTab(t,n)},getStoredData:function(e,t){if(M.USELOCALSTORAGE&&supports_html5_storage()){var n=localStorage[e];if(n)return n=JSON.parse(n),t?n.version==M.VERSION&&(void 0===n.expires||n.expires>Date.now())?n.value:(delete localStorage[e],null):n.value}return null},storeData:function(e,t,n){if(M.USELOCALSTORAGE&&supports_html5_storage()){var a={version:M.VERSION,value:t};n&&(a.expires=Date.now()+n);try{localStorage[e]=JSON.stringify(a)}catch(e){console.log("Error: "+e.message)}}},fetchPageSection:function(t,n,a){var i=this,r=i.getPageSectionParams(t);if(r&&!(r.loading.indexOf(n)>-1)){a=a||{};var o=i.getTarget(t),s=getDomain(n);i.maybeInitializeDomain(s);var c={domain:s,options:a,url:n};popJSLibraryManager.execute("modifyFetchArgs",c);var g=c.url;g.indexOf("#")>-1&&(g=g.substr(0,g.indexOf("#"))),g=add_query_arg(M.URLPARAM_TARGET,o,g),g=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_SETTINGSDATA,g),g=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,g),popJSLibraryManager.execute("preFetchPageSection",{url:g,options:a});var u=i.getTopLevelFeedback(s),l=e.extend({},u[M.DATALOAD_PARAMS],r[M.DATALOAD_PARAMS]);a.params&&e.extend(l,a.params);var d,p=e.param(l);d=g+"|"+p;var S=s==M.HOME_DOMAIN&&i.getStoredData(d);if(S)return i.prePageSectionSuccess(t,S,a),void i.processPageSectionResponse(s,t,n,g,S,a);var m=popPageSectionManager.getPageSectionStatus(t).find(".pop-error");a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").removeClass("hidden");var f=i.getCrossDomainOptions(g);e.ajax(e.extend(f,{dataType:"json",url:g,data:p,beforeSend:function(e,s){e.url=n,r.url[e.url]=n,r.target[e.url]=o,r["fetch-url"][e.url]=s.url,r.loading.push(n),i.handlePageSectionLoadingStatus(t,"add",a)},complete:function(n){var o=r.url[n.url];if(delete r.url[n.url],delete r.target[n.url],delete r["fetch-url"][n.url],r.loading.splice(r.loading.indexOf(o),1),i.handlePageSectionLoadingStatus(t,"remove",a),a["urlfetched-callbacks"]){var s="urlfetched:"+escape(o);e.each(a["urlfetched-callbacks"],function(t,n){e(document).one(s,n)})}a["disable-layer"]&&a["disable-layer"].children(".pop-disabledlayer").addClass("hidden")},success:function(e,n,o){i.prePageSectionSuccess(t,e,a),m.addClass("hidden");var c=r.url[o.url],u=e.feedback.toplevel[M.URLPARAM_URL],l=r.target[o.url];c!=u&&i.replaceOpenTab(c,u,l),a["fetch-params"]={url:c,target:l,"fetch-url":r["fetch-url"][o.url]},e.feedback.toplevel[M.URLPARAM_STORELOCAL]&&s==M.HOME_DOMAIN&&i.storeData(d,e),i.processPageSectionResponse(s,t,c,g,e,a)},error:function(e,n,o){r.url[e.url];var s=r.url[e.url];a.silentDocument||i.showError(t,i.getError(t,s,e,n,o)),i.triggerURLFetchFailed(s),t.triggerHandler("fetchFailed")}}))}},prePageSectionSuccess:function(e,t,n){var a=this;a.pageSectionFetchSuccess(e,t,n),a.backgroundLoad(t.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS])},getCrossDomainOptions:function(t){var n={};return t.startsWith(M.HOME_DOMAIN)||e.each(M.ALLOWED_DOMAINS,function(e,a){if(t.startsWith(a))return n.xhrFields={withCredentials:!0},n.crossDomain=!0,-1}),n},showError:function(e,t){var n=this,a=popPageSectionManager.getPageSectionStatus(e).find(".pop-error");a.children("div.pop-box").html(t),a.removeClass("hidden"),n.scrollTop(a)},triggerURLFetched:function(t,n){e(document).triggerHandler("urlfetched:"+escape(t)),e(document).triggerHandler("urlfetched",[t,n]),e(document).triggerHandler("urlfetchcompleted:"+escape(t))},triggerURLFetchFailed:function(t){e(document).triggerHandler("urlfetchfailed:"+escape(t)),e(document).triggerHandler("urlfetchfailed",[t]),e(document).triggerHandler("urlfetchcompleted:"+escape(t))},processPageSectionResponse:function(e,t,n,a,i,r){var o=this,s=o.getTarget(t);o.saveUrlPointers(i,s),o.addReplicableMemory(i,s),o.addInitialBlockMemory(i),o.integrateDatabases(e,i),o.checkExecuteProcessPageSectionResponse(e,t,n,a,i,r)},checkExecuteProcessPageSectionResponse:function(e,t,n,a,i,r){var o=this,s={loaded:!M.USECODESPLITTING,fetchUrl:a};popJSLibraryManager.execute("areResourcesLoaded",s),s.loaded?o.executeProcessPageSectionResponse(e,t,n,i,r):setTimeout(function(){o.checkExecuteProcessPageSectionResponse(e,t,n,a,i,r)},100)},executeProcessPageSectionResponse:function(t,n,a,i,r){var o=this,s=e.Deferred(),c=o.mergingTemplatePromise;o.mergingTemplatePromise=s.promise(),c.done(function(){try{o.processPageSection(t,n,i,r),o.triggerURLFetched(a,r)}catch(e){o.triggerURLFetchFailed(a),console.log("Error: "+e.message)}s.resolve()})},maybeUpdateDocument:function(e,t,n){var a=this;if(!(n=n||{}).silentDocument&&a.getFetchPageSectionSettings(t).updateDocument){if(!n.skipPushState){var i=a.getTopLevelFeedback(e);popBrowserHistory.pushState(i[M.URLPARAM_URL])}a.updateDocument(e)}},processPageSection:function(t,n,a,i){var r=this,o=r.getTarget(n);r.integrateTopLevelFeedback(t,a);var s=r.getTopLevelFeedback(t),c=s[M.URLPARAM_ERROR];c&&r.showError(n,c);var g=s[M.URLPARAM_URL];i.reloadurl&&r.triggerDestroyTarget(g,o),s[M.URLPARAM_SILENTDOCUMENT]&&(i.silentDocument=!0),r.maybeUpdateDocument(t,n,i),i.maybeRedirect&&r.maybeRedirect(s)||(r.integratePageSection(t,a),popJSRuntimeManager.setPageSectionURL(g),e.each(a.settings.configuration,function(n,a){var o=a[M.JS_FRONTENDID],s=e("#"+o);r.renderPageSection(t,s,null,i),s.triggerHandler("fetched",[i,g,t]),s.triggerHandler("completed")}))},scrollToElem:function(e,t,n){popJSLibraryManager.execute("scrollToElem",{elem:e,position:t,animate:n})},scrollTop:function(e,t,n){popJSLibraryManager.execute("scrollTop",{elem:e,top:t,animate:n})},getSettingsId:function(t){return"object"==e.type(t)?t.attr("data-settings-id"):t},getError:function(e,t,n,a,i){var r=this.getTarget(e);return 0===n.status?M.ERROR_OFFLINE.format(t,r):404==n.status?M.ERROR_404:M.ERROR_MSG.format(t,r)},closeMessageFeedback:function(e){var t={elem:e};popJSLibraryManager.execute("closeMessageFeedback",t)},closeMessageFeedbacks:function(e){var t={pageSection:e};popJSLibraryManager.execute("closeMessageFeedbacks",t)},processBlock:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n),s=i.getMemory(e);a.extendContext={items:s.dataset[r][o],ignorePSRuntimeId:!0},popJSRuntimeManager.setBlockURL(n),i.renderTarget(e,t,n,a)},fetchBlock:function(e,t,n){var a=this;!(n=n||{})["skip-stopfetching-check"]&&a.stopFetchingBlock(e,t)||a.executeFetchBlock(e,t,n)},getBlockPostData:function(t,n,a,i){var r=this,o=(i=i||{}).paramsGroup||"all",s=r.getBlockQueryState(n,a),c=r.getBlockDomainQueryState(t,n,a),g={};"all"==o&&(e.extend(g,s[M.DATALOAD_PARAMS]),c[M.DATALOAD_PARAMS]&&e.extend(g,c[M.DATALOAD_PARAMS])),s[M.DATALOAD_VISIBLEPARAMS]&&e.extend(g,s[M.DATALOAD_VISIBLEPARAMS]),c[M.DATALOAD_VISIBLEPARAMS]&&e.extend(g,c[M.DATALOAD_VISIBLEPARAMS]),e.each(g,function(e,t){t||delete g[e]});var u=e.param(g);return s.filter&&(u&&(u+="&"),u+=s.filter),u},handleBlockError:function(t,n,a){var i=this,r=[".errormsg.status-"+n.status,".errormsg.general"];e.each(r,function(e,n){var a=t.find(n);if(a.length)return a.removeClass("hidden").siblings(".errormsg").addClass("hidden"),!1}),a["skip-status"]||(t.removeClass("hidden"),i.scrollTop(t))},getMultiDomainBlockStatus:function(e,t,n){return{timestamp:n,isFirst:e.timestamps[n].length===Object.keys(t).length,isLast:1===e.timestamps[n].length}},executeFetchBlock:function(t,n,a){var i=this,r=(a=a||{}).type||"GET",o=i.getBlockQueryState(t,n);a["post-data"]&&(o["post-data"]=a["post-data"]);var s={},c=i.getQueryMultiDomainUrls(t,n);if(e.each(c,function(c,g){if(g&&(a["skip-stopfetching-check"]||!i.stopFetchingDomainBlock(c,t,n))){i.maybeInitializeDomain(c),i.initMultiDomainFeedback(c,t,n);var u={domain:c,options:a,url:g,type:r};popJSLibraryManager.execute("modifyFetchBlockArgs",u),g=u.url;var l=i.getTopLevelFeedback(c),d=i.getPageSectionFeedback(c,t),p=i.getBlockFeedback(c,t,n),S=e.extend({},l[M.DATALOAD_PARAMS],d[M.DATALOAD_PARAMS],p[M.DATALOAD_PARAMS]),m=e.param(S);o["post-data"]&&(m&&(m+="&"),m+=o["post-data"]),a["onetime-post-data"]&&(m&&(m+="&"),m+=a["onetime-post-data"]);var f=i.getBlockPostData(c,t,n);m&&f&&(m+="&"),m+=f;var h=i.getTarget(t);g=add_query_arg(M.URLPARAM_TARGET,h,g),g=add_query_arg(M.URLPARAM_MODULE,M.URLPARAM_MODULE_DATA,g);var T=(g=add_query_arg(M.URLPARAM_OUTPUT,M.URLPARAM_OUTPUT_JSON,g))+m;o.loading.indexOf(T)>-1||(s[c]={url:g,loading:T,data:m})}}),!e.isEmptyObject(s)){var g=n.find(".pop-loading"),u=n.find(".pop-error");a["skip-status"]||(g.removeClass("hidden"),u.addClass("hidden"),i.closeMessageFeedback(n)),i.triggerEvent(t,n,"beforeFetch",[a]),a["show-disabled-layer"]&&n.children(".pop-disabledlayer").removeClass("hidden");var l=Date.now();e.each(s,function(c,d){var p=d.url,S=d.loading,m=d.data,f=i.getCrossDomainOptions(p);e.ajax(e.extend(f,{dataType:"json",url:p,data:m,type:r,beforeSend:function(e,t){e.url=t.url,o.url[e.url]=S,o.loading.push(S),o.timestamps[l]=o.timestamps[l]||[],o.timestamps[l].push(S),o.operation[S]=a.operation,o.action[S]=a.action,o.domain[S]=c,o["paramsscope-url"][S]=i.getTargetParamsScopeURL(n),a.reload&&o.reload.push(S),a["skip-status"]||i.handleLoadingStatus(g,"add")},success:function(r,c,g){i.blockFetchSuccess(t,n,r),i.backgroundLoad(r.feedback.toplevel[M.URLPARAM_BACKGROUNDLOADURLS]),a["hide-latestcount"]&&n.children(".blocksection-latestcount").find(".pop-latestcount").addClass("hidden").find(".pop-count").text("0");var u=i.getMultiDomainBlockStatus(o,s,l),d=i.mergingTemplatePromise,p=e.Deferred(),S=p.promise();i.mergingTemplatePromise=S,d.done(function(){try{i.executeFetchBlockSuccess(t,n,r,u,g)}catch(e){console.log("Error: "+e.message)}p.resolve()})},error:function(e,r,o){i.handleBlockError(u,e,a),i.triggerEvent(t,n,"fetchFailed")},complete:function(r){var c=i.getMultiDomainBlockStatus(o,s,l),u=o.action[d];c.action=u;var d=o.url[r.url];delete o.url[r.url];var p=o.domain[d];o.loading.splice(o.loading.indexOf(d),1),delete o.operation[d],delete o.action[d],delete o.domain[d],delete o["paramsscope-url"][d],o.timestamps[l].splice(o.timestamps[l].indexOf(d),1),o.timestamps[l].length||delete o.timestamps[l];var S=o.reload.indexOf(d);S>-1&&(c.reload=!0,o.reload.splice(S,1)),a["skip-status"]||i.handleLoadingStatus(g,"remove");var m=i.mergingTemplatePromise,M=e.Deferred(),f=M.promise();i.mergingTemplatePromise=f,m.done(function(){try{i.fetchBlockComplete(p,t,n,c,a)}catch(e){console.log("Error: "+e.message)}M.resolve()})}}))})}},fetchBlockComplete:function(t,n,a,i,r){var o=this,s=o.getBlockQueryState(n,a);a.children(".pop-disabledlayer").addClass("hidden"),r["datasetcount-target"]&&o.displayDatasetCount(t,n,a,e(r["datasetcount-target"]),r["datasetcount-updatetitle"]),s.loading.length||a.find(".pop-loading").addClass("hidden"),o.stopFetchingBlock(n,a)?a.addClass("pop-stopfetching"):a.removeClass("pop-stopfetching"),o.triggerEvent(n,a,"fetchDomainCompleted",[i,t]),i.isLast&&o.triggerEvent(n,a,"fetchCompleted",[i])},stopFetchingBlock:function(t,n){var a=this,i=!0,r=a.getQueryMultiDomainUrls(t,n);return e.each(r,function(e,r){if(!a.getBlockDomainQueryState(e,t,n)[M.URLPARAM_STOPFETCHING])return i=!1,-1}),i},stopFetchingDomainBlock:function(e,t,n){return this.getBlockDomainQueryState(e,t,n)[M.URLPARAM_STOPFETCHING]},displayDatasetCount:function(e,t,n,a,i){var r=this,o=r.getBlockDataset(e,t,n);if(o.length){var s=a.data("datasetcount-mode")||"add",c=o.length;"add"==s&&(c+=a.text()?parseInt(a.text()):0),c&&(a.removeClass("hidden").text(c),i&&(document.title="("+c+") "+r.documentTitle))}},initMultiDomainFeedback:function(t,n,a){var i=this,r=i.getMemory(t),o=i.getBlockTopLevelDomain(a);if(t!=o){var s=i.getSettingsId(n),c=i.getSettingsId(a),g=i.getMemory(o);e.isEmptyObject(r.feedback.toplevel)&&(r.feedback.toplevel=e.extend(!0,{},g.feedback.toplevel),void 0!==r.feedback.toplevel[M.DATALOAD_USER]&&delete r.feedback.toplevel[M.DATALOAD_USER]),e.isEmptyObject(r.feedback.pagesection[s])&&(r.feedback.pagesection[s]=e.extend(!0,{},g.feedback.pagesection[s]),r.feedback.block[s]={}),e.isEmptyObject(r.feedback.block[s][c])&&(r.feedback.block[s][c]=e.extend(!0,{},g.feedback.block[s][c]))}},initMultiDomainMemory:function(t,n,a,i){var r=this,o=r.getMemory(t),s=r.getBlockTopLevelDomain(a);if(t!=s){var c=r.getMemory(s);e.each(i["query-state"].general,function(t,n){if(e.isEmptyObject(o["query-state"].general[t])){o["query-state"].general[t]={},o["query-state"].domain[t]={},o.dataset[t]={},o.runtimesettings.configuration[t]={},o.runtimesettings["query-url"][t]={},o.runtimesettings["query-multidomain-urls"][t]={},o.runtimesettings.configuration[t]={},o.runtimesettings["js-settings"][t]={},o.settings["js-settings"][t]={},o.settings.jsmethods.pagesection[t]=e.extend({},c.settings.jsmethods.pagesection[t]),o.settings.jsmethods.block[t]={},o.settings["templates-cbs"][t]={},o.settings["templates-paths"][t]={},o.settings["db-keys"][t]={},o.settings.configuration[t]={},o.settings.configuration[t][M.JS_MODULES]={};var a=o.settings.configuration[t],i=c.settings.configuration[t];e.each(i,function(e,t){e!=M.JS_MODULES&&"modules"!=e&&"root-context"!=e&&"parent-context"!=e&&r.copyToConfiguration(e,t,a,!0)})}e.each(n,function(n,a){if(e.isEmptyObject(o["query-state"].general[t][n])){o["query-state"].general[t][n]=e.extend({},c["query-state"].general[t][n]),o["query-state"].domain[t][n]=e.extend({},c["query-state"].domain[t][n]),o.dataset[t][n]=e.extend({},c.dataset[t][n]),o.runtimesettings.configuration[t][n]={},o.runtimesettings["query-url"][t][n]=e.extend({},c.runtimesettings["query-url"][t][n]),o.runtimesettings["query-multidomain-urls"][t][n]=e.extend({},c.runtimesettings["query-multidomain-urls"][t][n]),o.runtimesettings.configuration[t][n]=e.extend({},c.runtimesettings.configuration[t][n]),o.runtimesettings["js-settings"][t][n]=e.extend({},c.runtimesettings["js-settings"][t][n]),o.settings["js-settings"][t][n]=e.extend({},c.settings["js-settings"][t][n]),o.settings.jsmethods.block[t][n]=e.extend({},c.settings.jsmethods.block[t][n]),o.settings["templates-cbs"][t][n]=e.extend({},c.settings["templates-cbs"][t][n]),o.settings["templates-paths"][t][n]=e.extend({},c.settings["templates-paths"][t][n]),o.settings["db-keys"][t][n]=e.extend({},c.settings["db-keys"][t][n]);var i=c.settings.configuration[t][M.JS_MODULES][n];delete i["root-context"],delete i["parent-context"],o.settings.configuration[t][M.JS_MODULES][n]=e.extend(!0,{},i)}})})}},executeFetchBlockSuccess:function(t,n,a,i,r){var o=this,s=o.getBlockQueryState(t,n),c=s.url[r.url],g=s.action[c],u={url:s["paramsscope-url"][c]},l={operation:s.operation[c],action:s.action[c],"fetch-status":i},d=s.domain[c];o.initMultiDomainMemory(d,t,n,a);var p=o.getMemory(d);if([M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(g)>-1){var S=o.getInitialBlockMemory(u.url);e.each(a["query-state"].general,function(t,n){e.each(n,function(e,n){p.runtimesettings.configuration[t][e]=S.runtimesettings.configuration[t][e]})})}o.integrateTopLevelFeedback(d,a),o.integrateDatabases(d,a),e.each(a["query-state"].general,function(t,n){var i=e("#"+p.settings.configuration[t].id);p.feedback.block[t]||(p.feedback.block[t]={}),e.extend(p.feedback.block[t],a.feedback.block[t]),p.dataset[t]||(p.dataset[t]={}),e.extend(p.dataset[t],a.dataset[t]),p["query-state"].general[t]||(p["query-state"].general[t]={}),p["query-state"].domain[t]||(p["query-state"].domain[t]={}),e.each(n,function(n,r){try{var s=e("#"+o.getBlockId(t,n,u));if(e.extend(o.getBlockQueryState(i,s,u),r),e.extend(o.getBlockDomainQueryState(d,i,s,u),a["query-state"].domain[t][n]),[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH].indexOf(g)>-1&&o.getJsSettings(d,i,s)["processblock-ifhasdata"]&&!a.dataset[t][n].length)return;o.processBlock(d,i,s,l)}catch(e){console.log("Error: "+e.message)}})}),n.triggerHandler("fetched",[a,g,d])},triggerEvent:function(e,t,n,a){t.triggerHandler(n,a)},integrateTopLevelFeedback:function(t,n){var a=this.getMemory(t).feedback.toplevel;e.each(n.feedback.toplevel,function(t,n){"array"==e.type(n)&&0==n.length||("object"==e.type(n)?(a[t]||(a[t]={}),e.extend(a[t],n)):a[t]=n)})},clearUserDatabase:function(e){this.state[e].userdatabase={}},integrateDatabase:function(t,n){e.each(n,function(n,a){t[n]=t[n]||{},"array"!=e.type(a)&&e.each(a,function(a,i){t[n][a]||(t[n][a]={}),e.extend(t[n][a],i)})})},integrateDatabases:function(e,t){var n=this;n.integrateDatabase(n.getDatabase(e),t.database),n.integrateDatabase(n.getUserDatabase(e),t.userdatabase)},getMergeTargetContainer:function(t){return t.data("merge-container")?e(t.data("merge-container")):t},getMergeTarget:function(t,n,a){var i=this,r=".pop-merge."+n,o=(a=a||{})["merge-target"]?e(a["merge-target"]):t.find(r).addBack(r);return i.getMergeTargetContainer(o)},generateUniqueId:function(e){var t=this,n=Date.now();return t.getTopLevelFeedback(e)[M.UNIQUEID]=n,n},getUniqueId:function(e){return this.getTopLevelFeedback(e)[M.UNIQUEID]},addUniqueId:function(e){var t=this,n=getDomain(e);return e+"#"+t.getUniqueId(n)},mergeTargetTemplate:function(e,t,n,a,i){var r=this;i=i||{};var o=[M.CBACTION_LOADCONTENT,M.CBACTION_REFETCH,M.CBACTION_RESET].indexOf(i.action)>-1;o&&r.generateUniqueId(e);var s=r.getTemplateHtml(e,t,n,a,i),c=r.getMergeTarget(n,a,i);i.operation=i.operation||M.URLPARAM_OPERATION_REPLACE,i.operation==M.URLPARAM_OPERATION_REPLACE&&(n.triggerHandler("replace",[i.action]),o&&n.triggerHandler("rerender",[i.action]),c.empty());var g=r.mergeHtml(s,c,i.operation);return n.triggerHandler("merged",[g.newDOMs]),g},mergeHtml:function(t,n,a){var i=this,r=e(t);return a==M.URLPARAM_OPERATION_PREPEND?n.prepend(r):a==M.URLPARAM_OPERATION_REPLACEINLINE?(n.replaceWith(r),n=r):n.append(r),i.triggerHTMLMerged(),{targetContainer:n,newDOMs:r}},triggerHTMLMerged:function(){e(document).triggerHandler("template:merged")},renderPageSection:function(t,n,a,i){var r=this;i=i||{},e.extend(i,r.getFetchPageSectionSettings(n));var o={newDOMs:null,domain:t,pageSection:n,priority:a,options:i};popJSLibraryManager.execute("renderPageSectionDOMs",o);var s=o.newDOMs;s||(s=r.renderTarget(t,n,n,i)),s.length?r.pageSectionRendered(t,n,s,a,i):r.isFirstLoad(n)&&r.initPageSectionBranches(t,n,a,i)},getPageSectionDOMs:function(t,n){var a=this,i=a.getTemplatesCbs(t,n,n),r=e(),o=e();return e.each(i,function(e,t){var i=a.getMergeTarget(n,t);r.add(i),o=o.add(i.children())}),a.triggerRendered(t,n,o,r),o},renderTarget:function(t,n,a,i){var r=this,o=(i=i||{})["fetch-status"]||{isFirst:!0,isLast:!0};i.operation=i.operation||(o.isFirst?M.URLPARAM_OPERATION_REPLACE:M.URLPARAM_OPERATION_APPEND),i.operation!=M.URLPARAM_OPERATION_REPLACE||o.isFirst||(i.operation=M.URLPARAM_OPERATION_APPEND),a.triggerHandler("beforeRender",[i]);var s=r.getTemplatesCbs(t,n,a,i.action),c=e(),g=e();return e.each(s,function(e,o){var s=r.mergeTargetTemplate(t,n,a,o,i);c=c.add(s.targetContainer),g=g.add(s.newDOMs)}),r.triggerRendered(t,a,g,c),g},triggerRendered:function(t,n,a,i){n.triggerHandler("rendered",[a,i,t]),e(document).triggerHandler("rendered",[n,a,i,t])},getPageSectionConfiguration:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).settings.configuration[a]},getTargetConfiguration:function(t,n,a,i){var r=this,o=r.getTemplatePath(t,n,a,i),s=r.getPageSectionConfiguration(t,n);return o&&e.each(o,function(e,t){s=s[t]}),s},overrideFromItemObject:function(t,n,a){t&&e.each(a,function(e,a){n[a.key]=t[a.field]})},replaceFromItemObject:function(t,n,a,i,r,o,s){var c=this,g=c.getTopLevelFeedback(t),u=c.getTargetConfiguration(t,n,a,i);e.each(s,function(t,n){var a=n["replace-where-field"],i=n["replace-where-path"],s=n["replace-from-field"]||a,c=n.replacements,l=u[s];e.each(c,function(e,t){var n=t["replace-str"];if(r){var a=t["replace-with-field"];if(a&&n!=r[a]){var i=r[a];t["encode-uri-component"]?i=encodeURIComponent(i):t["encode-uri"]&&(i=encodeURI(i)),l=l.replace(new RegExp(n,"g"),i)}}var o=t["replace-from-feedback"];o&&n!=g[o]&&(l=l.replace(new RegExp(n,"g"),g[o]))});var d=o;i&&e.each(i,function(e,t){d[t]={},d=d[t]}),d[a]=l})},getTemplateHtml:function(t,n,a,i,r,o,s){var c=this,g=c.getTargetConfiguration(t,n,a,i);r=r||{};var u=g;if(c.getTemplatePath(t,n,a,i).length){var l=c.getBlock(a);c.initContextSettings(t,n,l,u),c.extendContext(u,t,o,s)}var d=r.extendContext;return d&&(u=e.extend({},u,d)),c.getHtml(i,u)},extendContext:function(t,n,a,i,r){var o=this;if(r=r||{},e.extend(t,r),a&&(e.extend(t,{itemDBKey:a}),i)){var s=o.getItemObject(n,a,i);e.extend(t,{itemObject:s,itemObjectDBKey:a})}},initTopLevelJson:function(t){var n=this,a=e("#"+popPageSectionManager.getTopLevelSettingsId()),i=JSON.parse(a.html());e(document).triggerHandler("initTopLevelJson",[i]),n.sitemapping=i.sitemapping,n.state[t].database=i.database||{},n.state[t].userdatabase=i.userdatabase||{};var r=n.getMemory(t);r.settings=i.settings,r.runtimesettings=i.runtimesettings,r.dataset=i.dataset,r.feedback=i.feedback,r["query-state"]=i["query-state"],e.each(r.dataset,function(t,n){"array"==e.type(n)&&(r.dataset[t]={})}),e.each(r["query-state"].general,function(t,n){"array"==e.type(n)&&(r["query-state"].general[t]={})}),e.each(r["query-state"].domain,function(t,n){"array"==e.type(n)&&(r["query-state"].domain[t]={})}),e.each(r.feedback.pagesection,function(t,n){"array"==e.type(n)&&(r.feedback.pagesection[t]={})}),e.each(r.feedback.block,function(t,n){"array"==e.type(n)&&(r.feedback.block[t]={})}),n.saveUrlPointers(i),n.addReplicableMemory(i),n.addInitialBlockMemory(i)},getBlockDefaultParams:function(){return{url:{},loading:[],reload:[],operation:{},action:{},domain:{},timestamps:{},"paramsscope-url":{},"post-data":"",filter:""}},getBlockDefaultMultiDomainParams:function(){return{}},getPageSectionDefaultParams:function(){return{url:{},target:{},"fetch-url":{},loading:[]}},initPageSectionRuntimeMemory:function(e,t,n){var a=this,i=a.newRuntimeMemoryPage(e,t,t,n);a.getSettingsId(t);i["query-state"]=a.getPageSectionDefaultParams();var r={domain:e,pageSection:t,runtimeMempage:i};popJSLibraryManager.execute("initPageSectionRuntimeMemory",r),popJSLibraryManager.execute("initPageSectionRuntimeMemoryIndependent",r)},initBlockRuntimeMemory:function(t,n,a,i){var r=this,o=r.newRuntimeMemoryPage(t,n,a,i),s=r.getMemory(t),c=r.getSettingsId(n),g=r.getSettingsId(a);o.id=a.attr("id"),o["query-url"]=r.getRuntimeSettings(t,n,a,"query-url"),o["query-multidomain-urls"]={},o["query-state"]={general:e.extend(r.getBlockDefaultParams(),s["query-state"].general[c][g]),domain:{}};var u=r.getRuntimeSettings(t,n,a,"query-multidomain-urls");e.each(u,function(t,n){var a=getDomain(n);o["query-multidomain-urls"][a]=n,o["query-state"].domain[a]=e.extend(r.getBlockDefaultMultiDomainParams(),s["query-state"].domain[c][g])});var l={domain:t,pageSection:n,block:a,runtimeMempage:o};popJSLibraryManager.execute("initBlockRuntimeMemory",l),popJSLibraryManager.execute("initBlockRuntimeMemoryIndependent",l)},getViewport:function(e,t){var n=t.closest(".pop-viewport");return n.length?n:e},getDOMContainer:function(t,n){var a=this;return M.DOMCONTAINER_ID?e("#"+M.DOMCONTAINER_ID):a.getViewport(t,n)},getBlock:function(t){return t.hasClass("pop-block")?t:t.closest(".pop-block").length?t.closest(".pop-block"):t.closest("[data-block]").length?e(t.closest("[data-block]").data("block")):null},getTargetParamsScopeURL:function(e){return e.data(M.PARAMS_PARAMSSCOPE_URL)},getBlockTopLevelURL:function(e){return e.data(M.PARAMS_TOPLEVEL_URL)},getBlockTopLevelDomain:function(e){return e.data(M.PARAMS_TOPLEVEL_DOMAIN)},isBlockGroup:function(e){return e.hasClass("pop-blockgroup")},getBlockGroupActiveBlock:function(e){return e.find(".tab-pane.active .pop-block, .collapse.in .pop-block")},getBlockGroupBlocks:function(e){return e.find(".pop-block")},getTemplateSource:function(e){return this.sitemapping["template-sources"][e]||e},initPageSectionSettings:function(t,n,a){var i=this,r=i.getTopLevelSettings(t);e.extend(a,{tls:r});var o=i.getPageSectionSettings(t,n),s=i.getSettingsId(n),c=a[M.JS_FRONTENDID];e.extend(a,{pss:o}),i.expandJSKeys(a),a[M.JS_MODULES]&&e.each(a[M.JS_MODULES],function(n,a){var g=a[M.JS_FRONTENDID],u=i.getBlockSettings(t,t,s,n,c,g);e.extend(a,{tls:r,pss:o,bs:u}),i.expandJSKeys(a)})},initContextSettings:function(t,n,a,i){var r=this,o=r.getTopLevelSettings(t);e.extend(i,{tls:o});var s=r.getPageSectionSettings(t,n);e.extend(i,{pss:s});var c=r.getSettingsId(n),g=n.attr("id"),u=r.getSettingsId(a),l=a.attr("id"),d=r.getBlockSettings(t,r.getBlockTopLevelDomain(a),c,u,g,l);e.extend(i,{pss:s,bs:d}),r.expandJSKeys(i),i.itemDBKey||(i.itemDBKey=d["db-keys"]["db-key"])},copyToConfiguration:function(t,n,a,i){"array"==e.type(n)?a[t]={}:"object"==e.type(n)?(a[t]||(a[t]={}),i?e.extend(!0,a[t],n):e.extend(a[t],n)):a[t]=n},integratePageSection:function(t,n){var a=this;e.extend(a.sitemapping["template-sources"],n.sitemapping["template-sources"]);var i=a.getMemory(t);e.each(n.settings.configuration,function(r,o){i["query-state"].general[r]=i["query-state"].general[r]||{},i["query-state"].domain[r]=i["query-state"].domain[r]||{},i.dataset[r]=i.dataset[r]||{},i.feedback.pagesection[r]=i.feedback.pagesection[r]||{},i.feedback.block[r]=i.feedback.block[r]||{},i.runtimesettings["query-url"][r]=i.runtimesettings["query-url"][r]||{},i.runtimesettings["query-multidomain-urls"][r]=i.runtimesettings["query-multidomain-urls"][r]||{},i.runtimesettings.configuration[r]=i.runtimesettings.configuration[r]||{},i.runtimesettings["js-settings"][r]=i.runtimesettings["js-settings"][r]||{},i.settings["js-settings"][r]=i.settings["js-settings"][r]||{},i.settings.jsmethods.pagesection[r]=i.settings.jsmethods.pagesection[r]||{},i.settings.jsmethods.block[r]=i.settings.jsmethods.block[r]||{},i.settings["templates-cbs"][r]=i.settings["templates-cbs"][r]||{},i.settings["templates-paths"][r]=i.settings["templates-paths"][r]||{},i.settings["db-keys"][r]=i.settings["db-keys"][r]||{},i.settings.configuration[r]=i.settings.configuration[r]||{},e.extend(i["query-state"].general[r],n["query-state"].general[r]),e.extend(i["query-state"].domain[r],n["query-state"].domain[r]),e.extend(i.dataset[r],n.dataset[r]),e.extend(i.feedback.pagesection[r],n.feedback.pagesection[r]),e.extend(i.feedback.block[r],n.feedback.block[r]),e.extend(i.runtimesettings["query-url"][r],n.runtimesettings["query-url"][r]),e.extend(i.runtimesettings["query-multidomain-urls"][r],n.runtimesettings["query-multidomain-urls"][r]),e.extend(i.runtimesettings.configuration[r],n.runtimesettings.configuration[r]),e.extend(i.runtimesettings["js-settings"][r],n.runtimesettings["js-settings"][r]),e.extend(i.settings["js-settings"][r],n.settings["js-settings"][r]),e.extend(i.settings.jsmethods.pagesection[r],n.settings.jsmethods.pagesection[r]),e.extend(i.settings.jsmethods.block[r],n.settings.jsmethods.block[r]),e.extend(i.settings["templates-cbs"][r],n.settings["templates-cbs"][r]),e.extend(i.settings["templates-paths"][r],n.settings["templates-paths"][r]),e.extend(i.settings["db-keys"][r],n.settings["db-keys"][r]);var s=i.settings.configuration[r];e.each(o,function(e,t){a.copyToConfiguration(e,t,s,!1)});var c=o[M.JS_FRONTENDID],g=e("#"+c);a.initPageSectionSettings(t,g,s)})},getTopLevelSettings:function(e){var t=this;return{domain:e,"domain-id":getDomainId(e),feedback:t.getTopLevelFeedback(e)}},getPageSectionSettings:function(e,t){var n=this,a=n.getSettingsId(t),i=t.attr("id");return{feedback:n.getPageSectionFeedback(e,t),pssId:a,psId:i}},isMultiDomain:function(e,t,n){var a=this.getRuntimeSettings(e,t,n,"query-multidomain-urls");return a&&a.length>=2},getBlockSettings:function(e,t,n,a,i,r){var o=this,s={"db-keys":o.getDatabaseKeys(e,n,a),dataset:o.getBlockDataset(e,n,a),feedback:o.getBlockFeedback(e,n,a),bsId:a,bId:r,"toplevel-domain":t,"is-multidomain":o.isMultiDomain(t,n,a)};return o.expandBlockSettingsJSKeys(s),s},expandBlockSettingsJSKeys:function(e){e&&M.COMPACT_JS_KEYS&&e["db-keys"]&&e["db-keys"][M.JS_SUBCOMPONENTS]&&(e["db-keys"].subcomponents=e["db-keys"][M.JS_SUBCOMPONENTS])},getBlockDataset:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).dataset[i][r]},getBlockFeedback:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).feedback.block[i][r]},getPageSectionFeedback:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).feedback.pagesection[a]},getTopLevelFeedback:function(e){return this.getMemory(e).feedback.toplevel},getSettings:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n);return i.getMemory(e).settings[a][r][o]},getRuntimeSettings:function(e,t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n);return i.getMemory(e).runtimesettings[a][r][o]},getQueryUrl:function(e,t){return this.getRuntimeMemoryPage(e,t)["query-url"]},getQueryMultiDomainUrls:function(e,t){return this.getRuntimeMemoryPage(e,t)["query-multidomain-urls"]},getRuntimeConfiguration:function(e,t,n,a){var i=this;a=a||n;var r=i.getTemplateOrObjectSettingsId(a);return i.getRuntimeSettings(e,t,n,"configuration")[r]||{}},getDatabaseKeys:function(e,t,n){return this.getSettings(e,t,n,"db-keys")},getBlockFilteringUrl:function(e,t,n,a){var i=this,r=i.getQueryUrl(t,n);!r&&a&&(r=i.getTopLevelFeedback(e)[M.URLPARAM_URL]);var o=i.getBlockPostData(e,t,n,{paramsGroup:"visible"});return o&&(r.indexOf("?")>-1?r+="&":r+="?",r+=o),r},click:function(t,n,a){n=n||"",a=a||e(document.body),e('<a href="'+t+'" target="'+n+'" class="hidden"></a>').appendTo(a).trigger("click")},getAPIUrl:function(t){return e.each(M.API_URLPARAMS,function(e,n){t=add_query_arg(e,n,t)}),t},getDestroyUrl:function(e){var t=getDomain(e);return t+"/destroy"+e.substr(t.length)},getTemplateOrObjectSettingsId:function(t){return"object"==e.type(t)?t.data("templateid"):t},getPageSectionJsSettings:function(e,t){var n=this;n.getSettingsId(t);return n.getSettings(e,t,t,"js-settings")||{}},getJsSettings:function(t,n,a,i){var r=this;i=i||a;r.getSettingsId(n),r.getSettingsId(a);var o=r.getTemplateOrObjectSettingsId(i),s=r.getSettings(t,n,a,"js-settings"),c=r.getRuntimeSettings(t,n,a,"js-settings"),g={};return s[o]&&e.extend(g,s[o]),c[o]&&e.extend(!0,g,c[o]),g},getPageSectionJsMethods:function(e,t){var n=this,a=n.getSettingsId(t);return n.getMemory(e).settings.jsmethods.pagesection[a]||{}},getBlockJsMethods:function(e,t,n){var a=this,i=a.getSettingsId(t),r=a.getSettingsId(n);return a.getMemory(e).settings.jsmethods.block[i][r]||{}},restoreInitialBlockMemory:function(t,n,a){var i=this,r=i.getSettingsId(t),o=i.getSettingsId(n),s=i.getTargetParamsScopeURL(n),c=i.getInitialBlockMemory(s),g=i.getRuntimeMemoryPage(t,n,a)["query-state"];g.general=e.extend(i.getBlockDefaultParams(),c["query-state"].general[r][o]);var u=c.dataset[r][o],l=i.getQueryMultiDomainUrls(t,n);e.each(l,function(t,n){g.domain[t]=e.extend(i.getBlockDefaultMultiDomainParams(),c["query-state"].domain[r][o]);var a=i.getMemory(t);a.runtimesettings.configuration[r][o]=e.extend({},c.runtimesettings.configuration[r][o]),a.feedback.block[r][o]=e.extend({},c.feedback.block[r][o]),u.length?e.extend(a.dataset[r][o],u):a.dataset[r][o]=[]})},getBlockQueryState:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n)["query-state"].general},getBlockMultiDomainQueryState:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n)["query-state"].domain},getBlockDomainQueryState:function(e,t,n,a){return this.getBlockMultiDomainQueryState(t,n,a)[e]||{}},getPageSectionParams:function(e,t){return this.getRuntimeMemoryPage(e,e,t)["query-state"]},getTarget:function(t){var n=t.attr("id"),a=M.URLPARAM_TARGET_MAIN;return e.each(M.FETCHTARGET_SETTINGS,function(e,t){if(t==n)return a=e,-1}),a},targetExists:function(e){return M.FETCHTARGET_SETTINGS[e]},getFetchTargetPageSection:function(t){return t&&"_self"!=t&&M.FETCHTARGET_SETTINGS[t]||(t=M.URLPARAM_TARGET_MAIN),e("#"+M.FETCHTARGET_SETTINGS[t])},getFetchPageSectionSettings:function(e){var t=e.attr("id");return M.FETCHPAGESECTION_SETTINGS[t]||{}},getTemplatesCbs:function(t,n,a,i){var r=this;i=i||"main";var o=r.getSettings(t,n,a,"templates-cbs"),s=o.cbs,c=o.actions;if(e.isArray(c)&&!c.length)return s;var g=[];return e.each(s,function(e,t){(!c[t]||c[t].indexOf(i)>-1)&&g.push(t)}),g},getTemplatePath:function(e,t,n,a){return this.getSettings(e,t,n,"templates-paths")[a]},getScriptTemplate:function(e){var t=this.getTemplateSource(e);return Handlebars.templates[t]},getPageSectionGroup:function(e){return e.closest(".pop-pagesection-group").addBack(".pop-pagesection-group")},getPageSection:function(e){return e.closest(".pop-pagesection").addBack(".pop-pagesection")},getPageSectionPage:function(e){var t=this,n=e.closest(".pop-pagesection-page").addBack(".pop-pagesection-page");return n.length?n:t.getPageSection(e)},getBlockId:function(e,t,n){return this.getRuntimeMemoryPage(e,t,n).id},getHtml:function(e,t){var n=this.getScriptTemplate(e);if(void 0===n)return console.error("No template for "+e),"";try{return n(t)}catch(t){console.log("Error in "+e+": "+t.message)}return""},getItemObject:function(t,n,a){var i=this,r={},o={},s=i.getUserDatabase(t),c=i.getDatabase(t);return s[n]&&s[n][a]&&(r=s[n][a]),c[n]&&c[n][a]&&(o=c[n][a]),e.extend({},r,o)},getFrameTarget:function(e){return e.data("frametarget")||M.URLPARAM_TARGET_MAIN},getClickFrameTarget:function(e){var t=this;return e.data("clickframetarget")||t.getFrameTarget(e)},getOriginalLink:function(e){var t=this,n=e.data("interceptedTarget");return n?t.getOriginalLink(n):e}}}(jQuery);
;"use strict";!function(e){window.popTopLevelJSON={objects:{},strings:{},getProperties:function(){var e=this,t={};return e.addProperties(t,e.strings,!0),e.addProperties(t,e.objects,!1),t},addProperties:function(t,i,n){if(!e.isEmptyObject(i))for(var o in i)i.hasOwnProperty(o)&&(t[o]=n?JSON.parse(i[o]):i[o])},init:function(){var t=this;M.RUNTIMEJS&&e(document).on("initTopLevelJson",function(i,n){e.extend(n,t.getProperties())})}}}(jQuery),popTopLevelJSON.init();
;"use strict";!function(e){window.popReplicate={replicateTopLevel:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultipleTopLevel(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSingleTopLevel(n,t)})},replicatePageSection:function(t){var a=this,n=t.pageSection;t.targets.each(function(){var t=e(this),i=t.data("replicate-type");i==M.REPLICATETYPES.MULTIPLE?a.replicateMultiplePageSection(n,t):i==M.REPLICATETYPES.SINGLE&&a.replicateSinglePageSection(n,t)})},replicateMultipleTopLevel:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this),r=i.data("unique-url")||!1;n.execReplicateTopLevel(t,i,!0,r)})},replicateSingleTopLevel:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicateTopLevel(t,i,!1,!1)})},execReplicateTopLevel:function(t,a,n,i){var r=a.data("original-url"),p=getDomain(r),c=(popManager.getMemory(p),a.data("intercept-url")),o=popManager.getFrameTarget(t),l=popManager.getReplicableMemory(c,o),g=popManager.getTopLevelFeedback(p);e.each(l.feedback.toplevel,function(t,a){"array"==e.type(a)&&0==a.length||("object"==e.type(a)?(g[t]||(g[t]={}),e.extend(g[t],a)):g[t]=a)}),n&&(i&&r.indexOf("#")>-1?g[M.UNIQUEID]=r.substr(r.indexOf("#")+1):(popManager.generateUniqueId(p),i&&(r=popManager.addUniqueId(r))));var u=a.data("title");g[M.URLPARAM_TITLE]=u,g[M.URLPARAM_URL]=r,popManager.maybeUpdateDocument(p,t)},replicateMultiplePageSection:function(t,a){var n=this;a.click(function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},replicateSinglePageSection:function(t,a){var n=this;a.one("click",function(a){a.preventDefault();var i=e(this);n.execReplicatePageSection(t,i)})},execReplicatePageSection:function(t,a){a.data("block-settingsid"),popManager.getSettingsId(t);var n=a.data("templateid"),i=a.data("intercept-url"),r=getDomain(i),p=popManager.getMemory(r),c=popManager.getFrameTarget(t),o=popManager.getReplicableMemory(i,c);e.extend(p.feedback.pagesection,o.feedback.pagesection),e.each(o.feedback.block,function(t,a){e.extend(p.feedback.block[t],a),e.extend(p.dataset[t],o.dataset[t]),e.extend(p["query-state"].general[t],o["query-state"].general[t]),e.extend(p["query-state"].domain[t],o["query-state"].domain[t])});var l=popManager.getTopLevelFeedback(r),g=popManager.getPageSectionFeedback(r,t),u=popManager.getPageSectionConfiguration(r,t);g["intercept-urls"][n]||(g["intercept-urls"][n]={}),g["intercept-urls"][n][n]=l[M.URLPARAM_URL],u[M.JS_TEMPLATE]=n;var d={};a.next(".pop-interceptor-blocksettingsids").children().each(function(){var t=e(this),a=t.data("value");a=t.data("value")?[t.data("value")]:[],d[t.data("key")]=a}),u[M.JS_BLOCKSETTINGSIDS]=d,popManager.initPageSectionSettings(r,t,u);var s={"js-args":{relatedTarget:a},url:l[M.URLPARAM_URL]};popJSRuntimeManager.setPageSectionURL(l[M.URLPARAM_URL]),popManager.renderPageSection(r,t,null,s)}}}(jQuery),popJSLibraryManager.register(popReplicate,["replicateTopLevel","replicatePageSection"]);
;"use strict";!function(e){window.popLifecycle={destroyPage:function(t){var a=t.domain,r=t.pageSection;t.targets.click(function(t){t.preventDefault();var i=e(this),o=e(i.data("target"));popManager.destroyPageSectionPage(a,r,o)})}}}(jQuery),popJSLibraryManager.register(popLifecycle,["destroyPage"]);