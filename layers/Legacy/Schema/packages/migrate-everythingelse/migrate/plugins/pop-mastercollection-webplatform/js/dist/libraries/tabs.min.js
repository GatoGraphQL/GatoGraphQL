"use strict";!function(e){window.popTabs={documentInitialized:function(a){e(document).ready(function(e){var a=!1,t=popManager.getTabsCurrentURL(),n=popManager.getScreenOpenTabs();if(e.each(n,function(e,n){if(n.length>1||e!=M.URLPARAM_TARGET_MAIN&&n.length||e==M.URLPARAM_TARGET_MAIN&&n[0]!=t)return a=!0,-1}),a)if(e.cookie("opentabs"))"true"==e.cookie("opentabs")?popManager.openTabs():popManager.keepScreenOpenTab(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);else{var r=e("#"+M.IDS_APPSTATUS),o="popTabs.keepScreenOpenTab('{0}', '{1}')".format(popManager.getTabsCurrentURL(),M.URLPARAM_TARGET_MAIN);r.prepend(M.TABS_REOPENMSG.format("popTabs.openTabs()",o))}})},onDestroyPageSwitchTab:function(a){var t=this;a.pageSection;a.targets.each(function(){var a=e(this);popManager.getPageSectionPage(a).on("destroy",function(){t.switchTab(a)})})},addOpenTab:function(a){var t=this,n=a.pageSection,r=a.targets;!1!==a.addOpenTab&&r.each(function(){var a=e(this),r=t.getDestroyPageTabParams(n,a);popManager.addOpenTab(r.url,r.target)})},closePageTab:function(a){var t=this,n=a.pageSection;a.targets.click(function(a){a.preventDefault();var r=e(this),o=t.getDestroyPageTabParams(n,r);popManager.triggerDestroyTarget(o.url,o.target)})},getDestroyPageTabParams:function(e,a){return{url:a.data("url")||popManager.getTargetParamsScopeURL(popManager.getBlock(a)),target:a.attr("target")||popManager.getFrameTarget(e)}},switchTab:function(e){if(e.prev("a.pop-pagetab-btn").hasClass("active")){var a=popManager.getPageSectionPage(e),t=a.nextAll(".pop-pagesection-page").first();t.length||(t=a.prevAll(".pop-pagesection-page").first()),t.length&&t.find("a.pop-pagetab-btn").trigger("click")}},saveCookie:function(a){e("#"+M.IDS_TABS_REMEMBERCHECKBOX).prop("checked")&&e.cookie("opentabs",a,{expires:365,path:"/"})},openTabs:function(){this.saveCookie("true"),popManager.openTabs()},keepScreenOpenTab:function(e,a){this.saveCookie("false"),popManager.keepScreenOpenTab(e,a)}}}(jQuery),M.OPENTABS&&popJSLibraryManager.register(popTabs,["documentInitialized","onDestroyPageSwitchTab","addOpenTab","closePageTab"]);