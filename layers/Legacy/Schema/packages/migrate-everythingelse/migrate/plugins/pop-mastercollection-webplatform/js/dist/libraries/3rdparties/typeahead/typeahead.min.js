"use strict";!function(e){window.popTypeahead={selectTypeahead:function(e,t,a,n,r){var o=n.find('input[type="text"].tt-input');popTypeaheadTriggerSelect.triggerSelect(e,t,a,n,r),o.typeahead("val","")},typeahead:function(t,a,n,r){var o=this;popManager.getPageSectionPage(n).one("destroy",function(){o.destroy(r)}),n.one("rerender",function(e){o.destroy(r)}),r.each(function(){var r=e(this),o=r.find('input[type="text"]'),i=popManager.getJsSettings(t,a,n,r),p=[];e.each(i["dataset-components"],function(e,r){var o=popManager.getJsSettings(t,a,n,r);p.push(o.dataset)}),e.each(p,function(e,t){var a=t.layout;t.template=popManager.getScriptTemplate(a);var n={};t.prefetch&&(n.url=popManager.maybeModifyURL(t.prefetch),popJSLibraryManager.execute("typeaheadPrefetchURL",n),t.prefetch=n.url),t.remote&&(n.url=popManager.maybeModifyURL(t.remote),popJSLibraryManager.execute("typeaheadRemoteURL",n),t.remote=n.url)});var h=[],c=[];e.each(p,function(t,a){var n=a.limit;p.length>1&&n>3&&(n=3);var r={datumTokenizer:function(t){var n=[];return e.each(a.tokenizerKeys,function(e,a){n=n.concat(Bloodhound.tokenizers.whitespace(t[a]))}),n},queryTokenizer:Bloodhound.tokenizers.whitespace};a.local&&(r.local=a.local),a.prefetch&&(r.prefetch={url:a.prefetch,thumbprint:a[M.KEYS_THUMBPRINT]}),a.remote&&(r.remote={url:a.remote,wildcard:M.JSPLACEHOLDER_QUERY});var o=new Bloodhound(r);h.push(o);var i;i=a.staticSuggestions?function(t,n){var r=[];e.each(a.staticSuggestions,function(a,n){var o={};e.each(n,function(e,a){"string"==typeof a&&(a=a.replace(M.JSPLACEHOLDER_QUERY,t)),o[e]=a}),r.push(o)}),n(r)}:o.ttAdapter(),c.push({source:i,name:a.name,display:a.valueKey,limit:n,templates:{suggestion:a.template,header:a.header,pending:a.pending,notFound:a.notFound}})}),e.each(h,function(e,t){t.initialize()}),1==c.length?o.typeahead({highlight:!0},c[0]):2==c.length?o.typeahead({highlight:!0},c[0],c[1]):3==c.length?o.typeahead({highlight:!0},c[0],c[1],c[2]):4==c.length&&o.typeahead({highlight:!0},c[0],c[1],c[2],c[3])})},destroy:function(e){e.find('input[type="text"].tt-input').typeahead("destroy")}}}(jQuery);