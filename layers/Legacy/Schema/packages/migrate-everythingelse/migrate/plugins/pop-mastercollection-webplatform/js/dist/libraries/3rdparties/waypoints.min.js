"use strict";jQuery,window.popWaypoints={waypointsHistoryStateNew:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=t.getOptions(n,a),r=new Waypoint({element:a,handler:function(t){var n=this.element;popManager.isHidden(n)||"up"==t&&popManager.historyReplaceState(e(this))},context:i.context,offset:"bottom-in-view"}),s=new Waypoint({element:a,handler:function(t){var n=this.element;popManager.isHidden(n)||"down"==t&&popManager.historyReplaceState(e(this))},context:i.context});t.destroy(n,o,r),t.destroy(n,o,s)})})},waypointsHistoryStateOriginal:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=t.getOptions(n,a),r=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||"up"==e&&popManager.historyReplaceState(t)},context:i.context});t.destroy(n,o,r)})})},waypointsToggleClass:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=e(a.data("target")),r=a.data("class");if(i.length&&r){var s=t.getOptions(n,a),c=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?i.addClass(r):"up"==e&&i.removeClass(r))},context:s.context,offset:s.context?0:function(){return t.getOffset(this.element)}});t.destroy(n,o,c)}})})},waypointsToggleCollapse:function(e){var t=this,n=e.targets;jQuery(document).ready(function(e){n.each(function(){var n=e(this),o=e(n.data("collapse-target"));if(o.length){var a=popManager.getBlock(o),i=popManager.getBlock(a);t.execWaypointsToggleCollapse(i,a,o,n)}})})},waypointsTheater:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){a.each(function(){var a=e(this),i=t.getOptions(n,a),r=new Waypoint({element:a,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?popPageSectionManager.theater(!0):"up"==e&&popPageSectionManager.theater(!1))},context:i.context,offset:i.context?0:function(){return t.getOffset(this.element)}});t.destroy(n,o,r)})})},waypointsFetchMore:function(e){var t=this,n=e.pageSection,o=e.block,a=e.targets;jQuery(document).ready(function(e){var i=[],r=popManager.isContentLoaded(n,o);a.each(function(){var a=e(this),s=t.getOptions(n,a),c=new Waypoint({element:a,handler:function(e){var t=this.element;if("down"==e){if(popManager.isHidden(t))return;t.trigger("click")}},context:s.context,enabled:r,offset:"bottom-in-view"});t.destroy(n,o,c),i.push(c)}),o.on("fetchCompleted",function(o){var a=e(this);popManager.stopFetchingBlock(n,a)?e.each(i,function(e,o){o.enabled&&(o.disable(),t.reEnable(n,a,o))}):e.each(i,function(e,t){t.enabled||t.enable(),t.context.refresh()})})})},reEnable:function(e,t,n){var o=this;t.one("beforeReload",function(){t.one("fetchCompleted",function(){popManager.stopFetchingBlock(e,t)?o.reEnable(e,t,n):n.enable()})})},execWaypointsToggleCollapse:function(e,t,n,o){var a=this,i=a.getOptions(e,n),r=new Waypoint({element:n,handler:function(e){var t=this.element;popManager.isHidden(t)||("down"==e?o.collapse("show"):"up"==e&&o.collapse("hide"))},context:i.context});a.destroy(e,t,r)},getOptions:function(e,t){var n={},o=e.filter(".pop-waypoints-context");return o.length?n.context=o:(o=t.closest(".pop-waypoints-context")).length&&(n.context=o),n},getOffset:function(e){return popManager.getPageSection(e).offset().top},destroy:function(e,t,n){popManager.getPageSectionPage(t).one("destroy",function(){n.destroy()})}},popJSLibraryManager.register(popWaypoints,["waypointsFetchMore","waypointsToggleClass","waypointsToggleCollapse","waypointsTheater","waypointsHistoryStateOriginal","waypointsHistoryStateNew"]);