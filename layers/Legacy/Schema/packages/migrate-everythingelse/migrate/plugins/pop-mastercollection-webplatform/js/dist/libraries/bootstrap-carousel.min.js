"use strict";!function(e){window.popBootstrapCarousel={carouselStatic:function(e){var t=this,o=e.pageSection,a=e.block,r=e.targets;t.prepareCarousel(o,a,r),r.carousel({interval:!1,wrap:!1})},carouselAutomatic:function(t){var o=this,a=t.pageSection,r=t.block,n=t.targets;r.on("beforeReload",function(e){n.carousel("pause")}),o.prepareCarousel(a,r,n),carousel.find(".item.active").length&&(gdBootstrapCarousel.numberSlides(carousel)>=2?(e(window).width()>=768?carousel.carousel():carousel.carousel({interval:!1,wrap:!1}),carousel.find(".pop-carousel-controls").removeClass("hidden")):carousel.find(".pop-carousel-controls").addClass("hidden"))},prepareCarousel:function(e,t,o){var a=this;t.on("rendered",function(){a.targetsAddActive(o)}),a.targetsAddActive(o)},targetsAddActive:function(t){var o=this;t.each(function(){var t=e(this);o.addActive(t)})},addActive:function(e){0==e.find(".item.active").length&&e.find(".item:first-child").addClass("active")},showElement:function(e,t){var o=this,a=t.closest(".item"),r=a.parent().children().index(a);o.slideTo(e,r)},slideTo:function(e,t){e.carousel(t)},next:function(e){e.carousel("next")},prev:function(e){e.carousel("prev")},isFirstSlide:function(e){return e.find(".item:first-child").hasClass("active")},isLastSlide:function(e){return e.find(".item:last-child").hasClass("active")},isNthSlide:function(e,t){return e.find(".item:nth-child("+t+")").hasClass("active")},isNthLastSlide:function(e,t){return e.find(".item:nth-last-child("+t+")").hasClass("active")},numberSlides:function(e){return e.find(".item").length}}}(jQuery),function(e){window.popBootstrapCarouselControls={initBlockRuntimeMemoryIndependent:function(e){var t=this,o=e.pageSection,a=e.block;e.runtimeMempage.carouselControls={},t.resetBlockRuntimeMemory(o,a)},carouselControls:function(e){var t=this,o=e.pageSection,a=e.block,r=e.targets,n=t.getCarousel(r),i=r.children(".pop-carousel-control.right");t.controlCarouselNext(o,a,n,r,i);var s=r.children(".pop-carousel-control.left");t.controlCarouselPrev(o,a,n,r,s),a.on("fetchDomainCompleted",function(e,n,i){t.handleReload(i,o,a,r)}),t.setEnabledDisabled(o,a,r)},getRuntimeMemoryPage:function(e,t){return popManager.getRuntimeMemoryPage(e,t).carouselControls},resetBlockRuntimeMemory:function(t,o){var a=this.getRuntimeMemoryPage(t,o),r={state:""};e.extend(a,r)},slideNext:function(e,t,o,a){var r=this;popBootstrapCarousel.isNthLastSlide(o,2)&&popManager.stopFetchingBlock(e,t)&&r.disable(a),r.enable(a.siblings(".pop-carousel-control.left")),popBootstrapCarousel.next(o)},controlCarouselNext:function(t,o,a,r,n){var i=this,s=popManager.getBlockQueryState(t,o);n.click(function(r){r.preventDefault();var n=e(this);if(!i.disabled(n))if(popBootstrapCarousel.isLastSlide(a)){if(s.loading.length||popManager.stopFetchingBlock(t,o))return;popManager.fetchBlock(t,o,{operation:M.URLPARAM_OPERATION_APPEND}),i.setControlState(t,o,"loading")}else i.slideNext(t,o,a,n)})},controlCarouselPrev:function(t,o,a,r,n){var i=this;n.click(function(t){t.preventDefault();var o=e(this);i.disabled(o)||(popBootstrapCarousel.isNthSlide(a,2)&&i.disable(o),popBootstrapCarousel.numberSlides(a)>1&&i.enable(o.siblings(".pop-carousel-control.right")),popBootstrapCarousel.prev(a))})},handleReload:function(e,t,o,a){var r=this,n=popManager.getBlockDataset(e,t,o);if(r.setEnabledDisabled(t,o,a),n&&n.length&&"loading"==r.getControlState(t,o)){var i=r.getCarousel(a),s=a.children(".pop-carousel-control.right");r.slideNext(t,o,i,s)}r.setControlState(t,o,"")},getControlState:function(e,t){return this.getRuntimeMemoryPage(e,t).state},setControlState:function(e,t,o){this.getRuntimeMemoryPage(e,t).state=o},getCarousel:function(t){return e(t.data("target"))},setEnabledDisabled:function(e,t,o){var a=this,r=a.getCarousel(o),n=o.children(".pop-carousel-control.left"),i=o.children(".pop-carousel-control.right");0==popBootstrapCarousel.numberSlides(r)?(a.disable(n),a.disable(i)):(popBootstrapCarousel.isFirstSlide(r)?a.disable(n):a.enable(n),popBootstrapCarousel.isLastSlide(r)&&popManager.stopFetchingBlock(e,t)?a.disable(i):a.enable(i))},disable:function(e){e.addClass("disabled"),e.attr("disabled",!0)},enable:function(e){e.removeClass("disabled"),e.attr("disabled",!1)},disabled:function(e){return e.hasClass("disabled")}}}(jQuery),popJSLibraryManager.register(popBootstrapCarousel,["carouselStatic","carouselAutomatic"]),popJSLibraryManager.register(popBootstrapCarouselControls,["initBlockRuntimeMemoryIndependent","controlCarouselPrev","controlCarouselNext","carouselControls"]);