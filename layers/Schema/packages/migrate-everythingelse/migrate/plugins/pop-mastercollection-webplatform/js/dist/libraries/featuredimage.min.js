"use strict";!function(e){window.popFeaturedImage={frame:null,init:function(){var t=this;e(document).ready(function(e){t.frame=wp.media({title:M.LABELS.MEDIA_FEATUREDIMAGE_TITLE,multiple:!1,library:{type:"image"},button:{text:M.LABELS.MEDIA_FEATUREDIMAGE_BTN}})})},documentInitializedIndependent:function(t){var a=this;e(document).ready(function(e){a.frame.on("open",function(){var e=a.getOpenFeaturedImage().find('input[type="hidden"]');if(e.val()){var t=a.frame.state().get("selection"),n=wp.media.attachment(e.val());n.fetch(),t.add(n?[n]:[])}}),a.frame.on("close",function(){var t=e(".pop-featuredimage.open"),n=a.frame.state().get("selection");if(n.length){var i,r,o=t.data("img-size");n.map(function(e){var t=(e=e.toJSON()).sizes[o]||e.sizes.medium||e.sizes.thumbnail;i=e.id,r={src:t.url,width:t.width,height:t.height}});var m=popManager.getBlock(t),p=popManager.getPageSection(m),u=popManager.getBlockTopLevelDomain(m);a.merge(u,p,m,t,i,r)}t.removeClass("open")}),e(document).triggerHandler("initialized.featuredImage",[a.frame])})},featuredImageSet:function(t){var a=this;t.pageSection,t.block;t.targets.click(function(t){t.preventDefault(),e(this).closest(".pop-featuredimage").addClass("open"),a.frame.open()})},featuredImageRemove:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block;t.targets.click(function(t){t.preventDefault();var o=e(this).closest(".pop-featuredimage");a.remove(n,i,r,o)})},merge:function(e,t,a,n,i,r){var o={extendContext:{value:i,img:r}},m=n.data("merge-template");popJSRuntimeManager.setBlockURL(a),popManager.mergeTargetTemplate(e,t,a,m,o),popManager.runJSMethods(e,t,a,m,"full")},remove:function(e,t,a,n){this.merge(e,t,a,n,"","")},getFrame:function(){return this.frame},getOpenFeaturedImage:function(){return e(".pop-featuredimage.open")}}}(jQuery),popJSLibraryManager.register(popFeaturedImage,["documentInitializedIndependent","featuredImageSet","featuredImageRemove"]),popFeaturedImage.init();