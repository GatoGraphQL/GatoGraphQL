"use strict";!function(e){window.popEmbedFunctions={reloadEmbedPreview:function(t){var r=this,a=t.domain,n=t.pageSection,i=t.block;t.targets.each(function(){var t=e(this);e(t.data("input-target")).change(function(){e(this);r.embedPreviewFromInput(a,n,i,t)}),r.embedPreviewFromInput(a,n,i,t)})},getUnembedUrl:function(t){var r=popJSLibraryManager.execute("getUnembedUrl",{url:t});return e.each(r,function(e,r){if(r)return t=r,-1}),t},getEmbedUrl:function(t){var r=popJSLibraryManager.execute("getEmbedUrl",{url:t});return e.each(r,function(e,r){if(r)return t=r,-1}),t},getPrintUrl:function(t){var r=popJSLibraryManager.execute("getPrintUrl",{url:t});return e.each(r,function(e,r){if(r)return t=r,-1}),t},embedPreviewFromInput:function(t,r,a,n){var i=this,o=e(n.data("input-target")).val();if(o&&isUrlValid(o)){var u=e(n.data("iframe-target")),d=i.embedPreview(t,r,a,u,o);n.data("iframe-target","#"+d.targetContainer.attr("id"))}},embedPreview:function(e,t,r,a,n){var i={operation:M.URLPARAM_OPERATION_REPLACEINLINE,extendContext:{src:n},"merge-target":"#"+a.attr("id")},o=a.data("templateid");popJSRuntimeManager.setBlockURL(r);var u=popManager.mergeTargetTemplate(e,t,r,o,i);popManager.runJSMethods(e,t,r,o,"full");var d=popJSRuntimeManager.getLastGeneratedId(e,popManager.getSettingsId(t),popManager.getSettingsId(r),o);return r.data("embed-iframe","#"+d),u},execReplaceCode:function(e,t){var r=e.data("code-placeholder").format(t);e.val(r)}}}(jQuery),popJSLibraryManager.register(popEmbedFunctions,["reloadEmbedPreview"]);