"use strict";!function(e){window.popFeaturedImage={frame:null,init:function(){var t=this;e(document).ready(function(e){t.frame=wp.media({title:M.LABELS.MEDIA_FEATUREDIMAGE_TITLE,multiple:!1,library:{type:"image"},button:{text:M.LABELS.MEDIA_FEATUREDIMAGE_BTN}})})},documentInitializedIndependent:function(t){var a=this;e(document).ready(function(e){a.frame.on("open",function(){var e=a.getOpenFeaturedImage().find('input[type="hidden"]');if(e.val()){var t=a.frame.state().get("selection"),n=wp.media.attachment(e.val());n.fetch(),t.add(n?[n]:[])}}),a.frame.on("close",function(){var t=e(".pop-featuredimage.open"),n=a.frame.state().get("selection");if(n.length){var i,r,o=t.data("img-size");n.map(function(e){var t=(e=e.toJSON()).sizes[o]||e.sizes.medium||e.sizes.thumbnail;i=e.id,r={src:t.url,width:t.width,height:t.height}});var m=popManager.getBlock(t),p=popManager.getPageSection(m),u=popManager.getBlockTopLevelDomain(m);a.merge(u,p,m,t,i,r)}t.removeClass("open")}),e(document).triggerHandler("initialized.featuredImage",[a.frame])})},featuredImageSet:function(t){var a=this;t.pageSection,t.block;t.targets.click(function(t){t.preventDefault(),e(this).closest(".pop-featuredimage").addClass("open"),a.frame.open()})},featuredImageRemove:function(t){var a=this,n=t.domain,i=t.pageSection,r=t.block;t.targets.click(function(t){t.preventDefault();var o=e(this).closest(".pop-featuredimage");a.remove(n,i,r,o)})},merge:function(e,t,a,n,i,r){var o={extendContext:{value:i,img:r}},m=n.data("merge-template");popJSRuntimeManager.setBlockURL(a),popManager.mergeTargetTemplate(e,t,a,m,o),popManager.runJSMethods(e,t,a,m,"full")},remove:function(e,t,a,n){this.merge(e,t,a,n,"","")},getFrame:function(){return this.frame},getOpenFeaturedImage:function(){return e(".pop-featuredimage.open")}}}(jQuery),popJSLibraryManager.register(popFeaturedImage,["documentInitializedIndependent","featuredImageSet","featuredImageRemove"]),popFeaturedImage.init();
;"use strict";!function(a){window.popMediaManagerState={domain:null,documentInitialized:function(){var e=this;a(document.body).on("click.add-media-button",".insert-media",function(n){var t=a(n.currentTarget),i=a("#"+t.data("editor")),o=popManager.getBlock(i);e.domain=popManager.getBlockTopLevelDomain(o)})},getDomain:function(){return this.domain}}}(jQuery),popJSLibraryManager.register(popMediaManagerState,["documentInitialized"]);
;"use strict";!function(e){window.popMediaManager={initialized:{},needsRefresh:{},documentInitializedIndependent:function(){var t=this;e(document).on("uploader:start:settings",function(e,i){t.setUploadSettings(i)}),e(document).on("user:loggedout",function(e){t.needsRefresh={featuredImage:!0,"editor-gallery":!0,"editor-insert":!0}}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var i=wp.media.frame.state();["gallery","insert"].indexOf(i.id)>-1&&(t.initialized["editor-"+i.id]&&t.needsRefresh["editor-"+i.id]&&t.refresh(i),t.initialized["editor-"+i.id]=!0,t.needsRefresh["editor-"+i.id]=!1)}),"undefined"!=typeof popFeaturedImage?t.initFeaturedImage():e(document).on("initialized.featuredImage",function(){t.initFeaturedImage()})})},featuredImageSet:function(e){var t=e.domain;e.targets.click(function(e){popMediaManagerState.domain=t})},initFeaturedImage:function(){var e=this;popFeaturedImage.getFrame().on("open",function(){e.initialized.featuredImage&&e.needsRefresh.featuredImage&&e.refresh(wp.media.frame.state()),e.initialized.featuredImage=!0,e.needsRefresh.featuredImage=!1})},getDomain:function(){return popMediaManagerState.getDomain()},refresh:function(e){e.get("library")._requery(!0)},setUploadSettings:function(e){e.multipart_params.post_id&&delete e.multipart_params.post_id}}}(jQuery),popJSLibraryManager.register(popMediaManager,["documentInitializedIndependent"]),popJSLibraryManager.register(popMediaManager,["featuredImageSet"],!0);
;"use strict";!function(e){window.popMediaManagerCORS={domains:{"editor-gallery":null,"editor-insert":null,featuredImage:null},documentInitializedIndependent:function(){var a=this;e(document).on("wp.ajax:send:options",function(e,t){a.setEditorOptions(t)}),e(document).on("uploader:start:settings",function(e,t){a.setUploadSettings(t)}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var t=popMediaManager.getDomain(),n=wp.media.frame.state();["gallery","insert"].indexOf(n.id)>-1&&(t&&a.domains["editor-"+n.id]&&t!=a.domains["editor-"+n.id]&&(popMediaManager.needsRefresh["editor-"+n.id]=!0),a.domains["editor-"+n.id]=t)}),"undefined"!=typeof popFeaturedImage?a.initFeaturedImage():e(document).on("initialized.featuredImage",function(){a.initFeaturedImage()})})},initFeaturedImage:function(){var e=this;popFeaturedImage.getFrame().on("open",function(){var a=popMediaManager.getDomain();a&&e.domains.featuredImage&&a!=e.domains.featuredImage&&(popMediaManager.needsRefresh.featuredImage=!0),e.domains.featuredImage=a})},setEditorOptions:function(e){var a=popMediaManager.getDomain();if(a&&(a!=M.HOME_DOMAIN&&(e.url=a+M.AJAXURL,e.xhrFields={withCredentials:!0},e.crossDomain=!0),e.data&&e.data.action)){var t={"query-attachments":"media-form","save-attachment-compat":"media-form","save-attachment-order":"media-form","send-attachment-to-editor":"media-send-to-editor","send-link-to-editor":"media-send-to-editor"}[e.data.action];if(t){var n=popManager.getTopLevelFeedback(a)[M.URLPARAM_NONCES][t];e.data._wpnonce&&(e.data._wpnonce=n),e.data.nonce&&(e.data.nonce=n),e.data.query&&e.data.query._wpnonce&&(e.data.query._wpnonce=n),e.data.query&&e.data.query.nonce&&(e.data.query.nonce=n)}}},setUploadSettings:function(e){var a=popMediaManager.getDomain();if(a){e.url=a+M.UPLOADURL;var t={"upload-attachment":"media-form"}[e.multipart_params.action];t&&(e.multipart_params._wpnonce=popManager.getTopLevelFeedback(a)[M.URLPARAM_NONCES][t])}}}}(jQuery),popJSLibraryManager.register(popMediaManagerCORS,["documentInitializedIndependent"],!0);