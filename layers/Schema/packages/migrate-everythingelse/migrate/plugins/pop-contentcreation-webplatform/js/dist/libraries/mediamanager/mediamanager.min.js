"use strict";!function(e){window.popMediaManager={initialized:{},needsRefresh:{},documentInitializedIndependent:function(){var t=this;e(document).on("uploader:start:settings",function(e,i){t.setUploadSettings(i)}),e(document).on("user:loggedout",function(e){t.needsRefresh={featuredImage:!0,"editor-gallery":!0,"editor-insert":!0}}),e(document).ready(function(e){e(document.body).on("click.add-media-button",".insert-media,.media-menu-item",function(e){var i=wp.media.frame.state();["gallery","insert"].indexOf(i.id)>-1&&(t.initialized["editor-"+i.id]&&t.needsRefresh["editor-"+i.id]&&t.refresh(i),t.initialized["editor-"+i.id]=!0,t.needsRefresh["editor-"+i.id]=!1)}),"undefined"!=typeof popFeaturedImage?t.initFeaturedImage():e(document).on("initialized.featuredImage",function(){t.initFeaturedImage()})})},featuredImageSet:function(e){var t=e.domain;e.targets.click(function(e){popMediaManagerState.domain=t})},initFeaturedImage:function(){var e=this;popFeaturedImage.getFrame().on("open",function(){e.initialized.featuredImage&&e.needsRefresh.featuredImage&&e.refresh(wp.media.frame.state()),e.initialized.featuredImage=!0,e.needsRefresh.featuredImage=!1})},getDomain:function(){return popMediaManagerState.getDomain()},refresh:function(e){e.get("library")._requery(!0)},setUploadSettings:function(e){e.multipart_params.post_id&&delete e.multipart_params.post_id}}}(jQuery),popJSLibraryManager.register(popMediaManager,["documentInitializedIndependent"]),popJSLibraryManager.register(popMediaManager,["featuredImageSet"],!0);