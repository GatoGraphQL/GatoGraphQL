# Release Notes: 0.9

## Further Completed the GraphQL Schema

Additional entities from the WordPress data model have been added to the GraphQL schema:

<!-- Add this image! -->
<!-- <a href="../../images/graphql-schema-v09.png" target="_blank">![GraphQL schema](../../images/graphql-schema-v09.png)</a> -->

Let's see what new elements have been added.

### Fetch entities by slug and path

The following fields have been added to the root:

- `Root.postBySlug: Post`
- `Root.unrestrictedPostBySlug: Post` ("admin" field)
- `Root.customPostBySlug: CustomPostUnion`
- `Root.unrestrictedCustomPostBySlug: CustomPostUnion` ("admin" field)
- `Root.genericCustomPostBySlug: GenericCustomPost`
- `Root.unrestrictedGenericCustomPostBySlug: GenericCustomPost` ("admin" field)
- `Root.pageBySlug: Page`
- `Root.unrestrictedPageBySlug: Page` ("admin" field)
- `Root.pageByPath: Page`
- `Root.unrestrictedPageByPath: Page` ("admin" field)
- `Root.postCategoryBySlug: PostCategory`
- `Root.postTagBySlug: PostTag`
- `Root.mediaItemBySlug: MediaItem`

### Filter custom post fields by tag, category and author

On fields to retrieve custom posts, such as:

- `Root.posts`
- `Root.customPosts`
- `Root.genericCustomPosts`
- `Root.myPosts`
- `User.posts`
- `PostCategory.posts`
- `PostTag.posts`

...added field arguments for filtering the results:

- `tagIDs`
- `tagSlugs`
- `categoryIDs`
- `authorIDs`

For instance, this query retrieves posts containing either tag `"graphql"`, `"wordpress"` or `"plugin"`:

```graphql
{
  posts(tagSlugs: ["graphql", "wordpress", "plugin"]) {
    id
    title
  }
}
```

### Pages

Added fields to `Page` to fetch the parent and children, and the menu order:

- `parentPage: Page`
- `childPages: [Page]!`
- `childPageCount: Int!`
- `unrestrictedChildPages: [Page]!`
- `unrestrictedChildPageCount: Int!`
- `menuOrder: Int!`

Filter field `pages` via new arguments:

- `parentIDs: [ID]`
- `parentID: ID`

```graphql
{
  pages(limit: 30, parentID: 0) {
    ...PageProps
    childPages(searchfor: "html") {
      ...PageProps
      childPages(limit: 3) {
        ...PageProps
      }
    }
  }
}

fragment PageProps on Page {
  id
  title
  date
  urlPath
}
```

### Users

Fetch a user by different means:

- `Root.userByUsername: User`
- `Root.userByEmail: User` ("admin" field)

Created the "admin" version of field `users`, enabling to filter users by email:

- `Root.unrestrictedUsers: [User]!`
- `Root.unrestrictedUserCount: Int!`

### Menus

Menus have been upgraded, adding the following fields:

- `Root.menus: [Menu]!`: list of all menus on the site
- `Root.menuByLocation: Menu`: fetch a menu by its location
- `Root.menuBySlug: Menu`: fetch a menu by its slug
- `Menu.name: String`: menu's name
- `Menu.slug: String`: menu's slug
- `Menu.count: Int`: number of items in the menu
- `Menu.locations: [String]!`: locations assigned to the menu
- `Menu.items: [MenuItem]!`: items for a menu
- `MenuItem.children: [MenuItem]!`: children items for a menu item

```graphql
{
  menus {
    id
    name
    slug
    count
    locations
    items {
      ...MenuItemProps
      children {
        ...MenuItemProps
        children {
          ...MenuItemProps
        }
      }
    }
  }
}

fragment MenuItemProps on MenuItem {
  alt
  classes
  description
  id
  objectID
  parentID
  target
  title
  url
}
```

### User avatar

Added type `UserAvatar`, and fields:

- `User.avatar: [UserAvatar]`: the user's avatar
- `UserAvatar.src: String!`: the avatar's URL
- `UserAvatar.size: Int!`: the avatar's size

```graphql
{
  users {
    id
    avatar(size: 150) {
      size
      src
    }
  }
}
```

### Field `urlPath`

Field `urlPath` has been added to several types:

- `Post.urlPath: String!`
- `Page.urlPath: String!`
- `PostCategory.urlPath: String!`
- `PostTag.urlPath: String!`
- `User.urlPath: String!`

For instance, if field `User.url` returns `"https://mysite.com/author/admin/"`, then field `User.urlPath` returns `"/author/admin/"`.

```graphql
{
  users {
    id
    urlPath
  }
}
```

### Media

Added field arguments to `Root.mediaItems: [Media]!` for filtering results.

Added field `Root.imageSizeNames: [String]!` to retrieve the list of the available intermediate image size names.

Added the following fields to `Media`:

- `srcSet`
- `url`
- `urlPath`
- `slug`
- `title`
- `caption`
- `altText`
- `description`
- `date`
- `mimeType`
- `sizes`

```graphql
{
  imageSizeNames
  mediaItems(
    limit: 3,
    order: "title|desc",
    date_from: "2012-01-02"
  ) {
    id
    srcSet
    src(size:"medium")
    sizes(size:"medium")
    height
    width
    slug
    url
    urlPath
    title
    caption
    altText
    description
    date
    mimeType
  }
}
```

## Static sites: Allow to use unsafe defaults

The GraphQL API for WordPress provides safe default settings, to make "live" sites secure:

- The single endpoint is disabled
- The "admin" fields (eg: to query posts with status "draft") are not added to the schema
- Only a few of settings options and meta keys (for posts, users, etc) can be queried
- The number of entities (for posts, users, etc) that can be queried at once is limited

These safe default settings are not needed when building "static" sites, where the WordPress site is not exposed to the Internet.

Starting from `v0.9`, to enable unsafe defaults, add in `wp-config.php`:

```php
define( 'GRAPHQL_API_ENABLE_UNSAFE_DEFAULTS', true );
```

Or define this same key/value as an environment variable.
